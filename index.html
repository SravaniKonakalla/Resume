<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Basic Content Security Policy (CSP) Meta Tag -->
    <!-- NOTE: 'unsafe-inline' is used for styles and scripts due to existing inline handlers/styles. -->
    <!-- For stricter security, refactor inline styles/scripts and configure CSP via HTTP headers if possible. -->
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self'; 
        script-src 'self' https://cdn.tailwindcss.com https://cdn.jsdelivr.net/npm/chart.js https://cdnjs.cloudflare.com 'unsafe-inline'; 
        style-src 'self' https://cdnjs.cloudflare.com 'unsafe-inline'; 
        img-src 'self' https://images.unsplash.com https://placehold.co data:; 
        font-src 'self' https://cdnjs.cloudflare.com; 
        connect-src 'self' https://formspree.io; 
        frame-src 'none'; 
        object-src 'none';
        base-uri 'self';
        form-action 'self' https://formspree.io;
    ">

    <title>Bala Sravani Konakalla | Finance Professional</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com" defer></script> <!-- Added defer -->
    
    <!-- Removed Google Fonts Links -->
    
    <!-- Removed Font Awesome Link -->
    
    <!-- Chart.js for dashboard charts - Added defer and SRI -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" 
            integrity="sha256-eI7lnkWhE+LXSMN3AXxBTIHHR0VoN6NzA3clC+H6izU=" 
            crossorigin="anonymous" defer></script>
    
    <style>
        /* --- COLOR PALETTE --- */
        /* BG #F5F1EA • Surface #FFFFFF • Text #221C2A */
        /* Accent #463863 • Accent-soft #D1A46E • Muted #9C8FA7 */

        html {
            scroll-behavior: smooth;
        }
        body {
            /* Updated Font Stack: System UI fonts */
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            background-color: #F5F1EA;
            color: #221C2A;
            overflow-x: hidden;
        }
        #finance-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
            /* Ensure canvas doesn't block interactions with content */
            pointer-events: none; 
        }
        .card-effect {
            background: #FFFFFF; border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
        .card-effect:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 15px -3px rgba(70, 56, 99, 0.1), 0 4px 6px -4px rgba(70, 56, 99, 0.1), 0 0 25px rgba(209, 164, 110, 0.8);
        }
        header { transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        header.nav-hidden { transform: translateY(-100%); }
        .page { display: none; }
        .page.active { display: block; }
        .nav-container { 
            display: inline-block; background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); 
            border: 1px solid #e2e8f0; border-radius: 9999px; 
            padding: 0.5rem; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1); 
            max-width: 100%;
        }
        #main-nav { display: flex; align-items: center; overflow-x: auto; scrollbar-width: none; }
        #main-nav::-webkit-scrollbar { display: none; }
        .nav-link { 
            flex-shrink: 0; padding: 0.75rem 1.5rem; border-radius: 9999px; 
            transition: all 0.3s ease; font-weight: 500; color: #221C2A;
            cursor: pointer; font-size: 1rem;
        }
        .nav-link.active { background-color: #F5F1EA; color: #463863; font-weight: 700; }
        .nav-link:not(.active):hover { background-color: #F5F1EA; }
        
        /* --- PARALLAX BANNER STYLES --- */
        .parallax-banner {
            height: 100vh; /* UPDATED: Make banner full screen height */
            /* Background images applied via inline style for potential JS optimization later */
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }
        .parallax-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(34, 28, 42, 0.65); /* Darker overlay for better readability */
        }
        .parallax-content {
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .parallax-banner.visible .parallax-content {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- LIGHTBOX STYLES --- */
        #lightbox {
            transition: opacity 0.3s ease-in-out;
        }
        #lightbox-img {
            transition: transform 0.3s ease-in-out;
            max-width: 90vw;
            max-height: 90vh;
        }
        #lightbox.hidden #lightbox-img {
            transform: scale(0.9);
        }


        /* --- PROJECT PAGE SPECIFIC STYLES --- */
        .project-section-fade-in {
            opacity: 0;
            transform: translateY(16px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .project-section-fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .chipotle-logo-glow {
            box-shadow: 0 0 25px rgba(173, 47, 31, 0.5); /* Chipotle Red */
        }
        .btn-primary, .explore-btn {
            background-color: #463863; color: #FFFFFF;
            transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.2s ease;
        }
        .btn-primary:hover, .explore-btn:hover {
            transform: scale(1.03);
            background-color: #D1A46E; /* Muted gold on hover */
            box-shadow: 0 8px 20px -5px rgba(209, 164, 110, 0.4);
        }
        .btn-secondary {
            background-color: #F5F1EA; color: #463863; border: 1px solid #463863;
            transition: transform 0.15s ease-out, background-color 0.15s ease-out;
        }
        .btn-secondary:hover {
            transform: scale(1.02);
            background-color: #eaddd0;
        }
        .btn-icon {
            background-color: transparent; color: #463863;
            transition: transform 0.15s ease-out, color 0.15s ease-out;
        }
        .btn-icon:hover {
            transform: scale(1.05);
            color: #D1A46E;
        }
        
        /* Other original styles */
        #success-toast {
            position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%);
            background-color: #10b981; color: white; padding: 1rem 1.5rem;
            border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 100; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        }
        #success-toast.show {
            opacity: 1; visibility: visible; transform: translate(-50%, -10px);
        }
        
        .logo-holder { width: 60px; height: 60px; background: #FFFFFF; border-radius: 50%; padding: 4px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); transition: box-shadow 0.3s ease; }
        .logo-holder img { width: 100%; height: 100%; border-radius: 50%; object-fit: contain; }
        .skill-logo-holder { width: 48px; height: 48px; background: #FFFFFF; border-radius: 50%; padding: 4px; box-shadow: 0 0 8px rgba(100, 150, 255, 0.6), 0 0 15px rgba(100, 150, 255, 0.4); display: flex; align-items: center; justify-content: center; }
        .skill-logo-holder svg { width: 60%; height: 60%; object-fit: contain; } /* Adjusted for SVG */
        
        .education-card, .certification-card { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.3s ease; }
        .education-card.visible, .certification-card.visible { opacity: 1; transform: translateY(0); }
        .education-card:hover, .certification-card:hover { transform: translateY(-8px); box-shadow: 0 12px 20px -4px rgba(70, 56, 99, 0.15), 0 0 30px rgba(209, 164, 110, 0.7); }
        
        /* Adjusted logo holder - default rectangular */
        .education-card .logo-holder, .certification-card .logo-holder { 
            width: 120px; /* Default width */
            height: auto; align-self: stretch; border-radius: 0; 
            padding: 0; 
            box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); 
            overflow: hidden; 
        }
         /* Image fit */
        .education-card .logo-holder img { border-radius: 0; width: 100%; height: 100%; object-fit: cover; }
        .certification-card .logo-holder img { border-radius: 0; width: 100%; height: 100%; object-fit: contain; padding: 0.75rem; background-color: white; }

        /* Mobile specific styles for Education logos */
        /* REMOVED: Entire @media (max-width: 767px) block */


        .cgpa-badge { background-color: #463863; color: #FFFFFF; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 700; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .cert-view-btn {
            background-color: #463863; color: #FFFFFF; border-radius: 9999px;
            width: 2.25rem; height: 2.25rem; display: inline-flex;
            align-items: center; justify-content: center;
            font-size: 1rem; box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .cert-view-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 10px rgba(70, 56, 99, 0.3);
        }
        /* Style for SVG icons */
        .svg-icon { 
             display: inline-block;
             width: 1em;
             height: 1em;
             stroke-width: 0;
             stroke: currentColor;
             fill: currentColor;
             vertical-align: middle;
             margin-right: 0.25em; /* Space between icon and text */
         }
        
        /* --- NEW FAB and Modal Styles --- */
        #contact-fab {
            position: fixed;
            bottom: 1.5rem; /* bottom-6 */
            right: 1.5rem;  /* right-6 */
            z-index: 50;
        }

        #contact-fab .fab-content {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #463863; /* Accent Violet */
            color: #FFFFFF; /* White */
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            cursor: pointer;
            width: 3rem; /* w-12 */
            height: 3rem; /* h-12 */
            overflow: hidden; /* Crucial for the reveal effect */
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-content {
            width: 12rem; /* w-48 */
        }

        /* Pulse animation for initial load */
        @keyframes pulse-ring {
          0% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0.7), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          70% { box-shadow: 0 0 0 20px rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          100% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        }
        .fab-pulse {
            animation: pulse-ring 2s 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) 1;
        }

        #contact-fab .fab-icon {
            font-size: 1.375rem; /* ~22px */ /* Keep size for SVG */
             width: 1.375rem;
             height: 1.375rem;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-icon {
            transform: translateX(4rem);
        }

        #contact-fab .fab-text {
            white-space: nowrap;
            opacity: 0;
            font-weight: 600;
            position: absolute;
            transform: translateX(-1rem);
            transition: opacity 0.2s ease-in-out 0.1s; /* Delayed fade-in */
        }
        
        #contact-fab:hover .fab-text {
            opacity: 1;
        }
        
        #contact-modal {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #contact-modal.visible {
            opacity: 1;
            visibility: visible;
        }
        #contact-modal .modal-overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        #contact-modal .modal-content {
            position: relative;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 32rem; /* 512px */
            padding: 2rem;
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        #contact-modal.visible .modal-content {
            transform: scale(1);
        }
         #contact-modal .modal-close-icon { /* Style for SVG close button */
             width: 1.5rem;
             height: 1.5rem;
         }

        /* --- NEW: Profile Image Placeholder --- */
        .profile-image-placeholder {
            border-radius: 50%;
            box-shadow:
                0 0 5px rgba(209, 164, 110, 0.8),  /* #D1A46E - Muted Gold */
                0 0 10px rgba(209, 164, 110, 0.6),
                0 0 20px rgba(70, 56, 99, 0.5),   /* #463863 - Accent Violet */
                0 0 40px rgba(70, 56, 99, 0.4);
            transition: box-shadow 0.3s ease-in-out;
        }
       
        /* --- Role Explorer --- */
        .exp-role-explorer-list button {
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }
        .exp-role-explorer-list button:hover {
            background-color: #FFFFFF;
            border-left-color: #D1A46E;
        }
        .exp-role-explorer-list button.active {
            background-color: #FFFFFF;
            border-left-color: #463863;
            transform: translateX(4px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .exp-role-explorer-content {
            transition: opacity 0.3s ease-in-out;
        }
        
        /* --- Finalized Technical Skills Styles --- */
        .skills-matrix-container {
            background-color: #FFFFFF;
            border-radius: 0.75rem;
            padding: 2rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .skill-matrix-item {
            background-color: #F5F1EA;
            border-radius: 0.5rem;
            padding: 1.5rem 1rem;
            text-align: center;
            transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
            border: 1px solid transparent;
        }
        .skill-matrix-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(70, 56, 99, 0.1);
            background-color: #FFFFFF;
            border-color: #D1A46E;
        }
        .skill-matrix-item .skill-logo-holder {
            margin: 0 auto 1rem;
             color: #463863; /* Set SVG color */
        }
        .skill-matrix-item h4 {
            font-weight: 600;
            color: #463863;
        }

        /* --- Chipotle Project Styles --- */
        .chipotle-forecast-section .chart-frame,
        .historical-analysis-section .chart-frame {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            padding: 0.75rem;
            position: relative;
            overflow: hidden;
        }
        .chipotle-forecast-section .chart-frame img,
        .historical-analysis-section .chart-frame img {
            border-radius: 0.25rem;
            transition: opacity 0.4s ease-in-out;
        }
        .justified-text, .justified-text p, .justified-text li {
            text-align: justify;
        }
        .profile-summary-box {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .profile-summary-box:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px -4px rgba(70, 56, 99, 0.15), 0 0 30px rgba(209, 164, 110, 0.7);
        }
        .scenario-selector .mini-card-toggle {
            background-color: #fff;
            border: 2px solid transparent;
            transition: all 0.2s ease-in-out;
        }
        .scenario-selector .mini-card-toggle[aria-pressed="true"] {
            border-color: #463863;
            box-shadow: 0 4px 12px rgba(70, 56, 99, 0.2);
            transform: scale(1.03);
        }
        
        /* --- NEW: Project Neon Highlight Effect --- */
        .project-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .project-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 20px -4px rgba(70, 56, 99, 0.15), 0 0 30px rgba(209, 164, 110, 0.7);
        }

    </style>
</head>
<body class="antialiased">
    
    <div id="progress-bar-container" class="fixed bottom-0 left-0 right-0 h-1.5 z-[60]">
        <div id="progress-bar" class="h-full bg-[#C58940] transition-all duration-100 ease-linear" style="width: 0%;"></div>
    </div>

    <canvas id="finance-canvas"></canvas>
    <div id="success-toast">
        <!-- Checkmark SVG Icon -->
        <svg class="svg-icon mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
        </svg>
        Message sent successfully! I'll get back to you soon.
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 py-4">
        <div class="container mx-auto flex justify-center items-center px-4">
            <div class="nav-container">
                <nav id="main-nav"></nav>
            </div>
        </div>
    </header>

    <main class="relative z-10">
        <!-- NOTE: Removed pt-24 from main to allow hero to be full screen -->
    </main>

    <footer class="py-6 text-center text-gray-500 relative z-10">
        <p>&copy; <span id="copyright-year"></span> Bala Sravani Konakalla. All Rights Reserved.</p>
    </footer>

    <!-- Lightbox for resume and certificates -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-[100] hidden items-center justify-center p-4">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-4xl opacity-80 hover:opacity-100 transition-opacity">&times;</button>
        <img id="lightbox-img" src="" alt="Resume full view" class="max-w-full max-h-full rounded-lg shadow-2xl" loading="lazy"> <!-- Added lazy loading -->
    </div>

    <!-- Floating Action Button -->
    <div id="contact-fab">
        <div class="fab-content fab-pulse">
            <!-- Comments SVG Icon -->
             <svg class="fab-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
               <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.083-3.25A9.006 9.006 0 012 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd" />
             </svg>
            <span class="fab-text">Let's discuss</span>
        </div>
    </div>
    
    <!-- Contact Modal -->
    <div id="contact-modal" class="fixed inset-0 z-[100] hidden items-center justify-center p-4">
        <div class="modal-overlay absolute inset-0"></div>
        <div class="modal-content relative bg-white rounded-lg shadow-2xl p-8 w-full max-w-lg">
             <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl transition-colors">
                 <!-- Times/Close SVG Icon -->
                 <svg class="modal-close-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                   <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                 </svg>
            </button>
            <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center" style="color: #221C2A;">Let’s talk — I’m open to new opportunities</h3>
             <form class="contact-form w-full" action="" method="POST">
                <div class="space-y-4 text-left">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="--tw-ring-color: #463863;">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="--tw-ring-color: #463863;">
                    <textarea name="message" rows="4" placeholder="Your Message" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="--tw-ring-color: #463863;"></textarea>
                </div>
                <div class="mt-6">
                    <button type="submit" class="btn-primary font-bold py-3 px-6 rounded-lg transition-all duration-300 w-full">
                        Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- DATA SOURCE ---
            const portfolioData = {
                pages: [
                    { id: 'home', label: 'Home' },
                    { id: 'experience', label: 'Experience' },
                    { id: 'projects', label: 'Projects' },
                    { id: 'education', label: 'Education' },
                    { id: 'resume', label: 'Resume' }
                ],
                home: {
                    name: "Bala Sravani Konakalla",
                    about: "A strategic corporate finance professional at Tata Consultancy Services, who builds AI-augmented, scalable financial models and dashboards that surface actionable insights for forecasting, budgeting, and executive decision-making.",
                    summary: "As a Business Analyst at Tata Consultancy Services, I leverage corporate-finance expertise and modern analytics to build automated reporting solutions using advanced Excel, SAP BPC and vibe-coding, and to integrate AI tools, Tableau and market-data platforms such as S&P Capital IQ and Refinitiv to accelerate insight generation. I develop scalable models and dashboards to support forecasting, budgeting and scenario analysis. Moving forward, I am focused on applying this blend of financial acumen and technical skill to address complex valuation and market challenges and to transition into strategic roles that deliver measurable business impact.",
                },
                imageUrls: {
                    profile: "Profile pic.webp",
                    certFinancialModeling: 'Certificate 1.webp',
                    certBloomberg: 'Certificate 2.webp',
                    certMicrosoft: 'Certificate 3.webp',
                    resumePreview: "Resume.webp",
                    chipotleHistFinancials: 'Chip graph 1.webp',
                    chipotleStoresVsSss: 'Chip Graph 2.webp',
                    chipotleForecastBase: 'Chip Graph 4 Base.webp',
                    chipotleForecastBear: 'Chip Graph 5 Worst.webp',
                    chipotleForecastBull: 'Chip Graph 3 Best.webp',
                    // Logos
                    logoTcs: 'TCS LOGO.webp',
                    logoMercedes: 'Benz Logo.webp',
                    logoGitam: 'Gitam Logo.webp',
                    logoVishnu: 'Vishnu Logo.webp',
                    logoFinancialModeling: 'CFI Logo.webp',
                    logoMicrosoft: 'Microsoft Logo.webp',
                    logoChipotle: 'chipotle logo.webp',
                    logoBloomberg: 'Bloomberg Logo.webp'
                },
                experiences: [
                    { 
                        type: 'job',
                        date: 'Jun, 2024 – Present', 
                        title: 'Financial Systems & Business Analyst', 
                        company: 'Tata Consultancy Services',
                        companyFull: 'Tata Consultancy Services | Hyderabad',
                        logoUrlKey: 'logoTcs',
                        duties: [
                           '<strong>Financial Forecasting & Analysis:</strong> Integrated the real-time foreign exchange (FX) data into SAP BPC, enhancing the accuracy of multi-currency financial forecasts and empowering clients with robust scenario-planning and risk assessment capabilities.',
                           '<strong>Data Integrity & Financial Close:</strong> Executed critical Role Forward activities with 100% accuracy by transferring prior-period closing balances into new periods for month-end and quarter-end closes safeguarding data integrity for regulatory reporting.',
                           '<strong>Advanced Financial Modeling & Automation:</strong> Re-engineered logic scripts to automate complex financial calculations and currency translations, directly improving the speed and reliability of the core consolidation process.',
                           '<strong>Functional Testing & Controls Validation:</strong> Led comprehensive functional checkouts of the environment, validating system integrity across all financial planning, budgeting, and consolidation modules to ensure unwavering system reliability for stakeholders.',
                           '<strong>Role ID Administration & Access Controls:</strong> Created and updated Role IDs and “cost-center mappings” within the BPC security model, applying Excel automation to accelerate provisioning and audit readiness.',
                           '<strong>Strategic Innovation:</strong> Proposed a pioneering "Finance Digital Twin" concept—an AI-driven, real-time virtual replica of a company\'s financial ecosystem—to enable dynamic what-if analysis.'
                        ],
                        domain: [
                           '<strong>Tools & platforms:</strong> SAP BPC; Excel (Advanced)',
                           '<strong>Finance & Analytics:</strong> Financial forecasting; Multi-currency (FX) forecasting; Financial consolidation; Currency translation',
                           '<strong>Data & automation:</strong> Script automation; Role-forward activities; Data integrity; Functional Checkouts, Cost-center mapping',
                           '<strong>Strategy & innovation:</strong> Scenario planning; Finance Digital Twin'
                        ]
                    },
                    { 
                        type: 'internship',
                        date: 'Jun 2023 – Aug 2023', 
                        title: 'Sales Trainee - Internship', 
                        company: 'Silver Star Mercedes Benz', 
                        companyFull: 'Silver Star Mercedes Benz | Hyderabad',
                        logoUrlKey: 'logoMercedes',
                        duties: [
                            '<strong>Credit & Working capital analysis:</strong> Conducted financial-statement analysis and risk scoring to assess customer creditworthiness, prioritising collections and cutting payment delays by 10%. Reviewed receivables and payables and recommended actions that tightened the cash-conversion cycle and strengthened short-term liquidity.',
                            '<strong>Accounts payable & vendor management:</strong> Managed full AP lifecycle—invoice validation, dispute resolution and vendor reconciliation—reducing late fees and strengthening supplier relationships.',
                            '<strong>Financial modelling & ROI Analysis:</strong> Conducted detailed cost-benefit analyses for major marketing campaigns, translating performance data into actionable reports that identified high-ROI initiatives and guided the strategic reallocation of the marketing budget.',
                            '<strong>Receivables optimisation:</strong> Collaborated with cross-functional teams to streamline the end-to-end accounts payable and receivable cycles, enhancing vendor relationships through timely payments and improving the company\'s overall cash flow position.'
                        ],
                        domain: [
                           '<strong>Tools & platforms:</strong> Excel (Advanced); Tableau',
                           '<strong>Working capital & credit:</strong> Credit analysis; Risk scoring; Receivables optimisation; Short-term liquidity management',
                           '<strong>Payables & vendor management:</strong> Accounts payable lifecycle; Invoice validation',
                           '<strong>Financial analysis & modelling:</strong> Financial modelling; ROI analysis'
                        ]
                    }
                ],
                skillsByCategory: { // This structure is kept but potentially unused if only using the new list
                    "Software & Platforms": [
                        { name: 'SAP BPC' },
                        { name: 'Tableau' },
                        { name: 'MS Office Suite' },
                    ],
                    "Core Competencies": [
                        { name: 'Financial Modeling' },
                        { name: 'Data Analysis' },
                        { name: 'Compliance' },
                        { name: 'Credit Monitoring' },
                    ],
                    "Technical Skills": [
                         { name: 'Advanced Excel' },
                    ]
                },
                educations: [
                    { 
                        degree: 'Masters of Business Administration', 
                        specialization: 'Finance & Marketing',
                        school: 'GITAM School of Business', 
                        location: 'Visakhapatnam',
                        date: '2022 - 2024', 
                        details: 'CGPA: 8.19',
                        logoUrlKey: 'logoGitam' 
                    },
                    { 
                        degree: 'Bachelor of Technology', 
                        specialization: 'Civil Engineering',
                        school: 'Shri Vishnu Engineering College for Women', 
                        location: 'Bhimavaram',
                        date: '2017 - 2021', 
                        details: 'CGPA: 8.29',
                        logoUrlKey: 'logoVishnu'
                    }
                ],
                certifications: [
                    { 
                        id: 'fmva',
                        title: 'Financial Modeling & Valuation Analyst (FMVA)', issuer: 'Corporate Finance Institute (CFI)',
                        logoUrlKey: 'logoFinancialModeling', issueDate: 'Jun 2025',
                        imageUrlKey: 'certFinancialModeling'
                    },
                     { 
                        id: 'bloomberg',
                        title: 'Bloomberg Market Concepts', issuer: 'Bloomberg',
                        logoUrlKey: 'logoBloomberg', issueDate: 'Sep 2025',
                        imageUrlKey: 'certBloomberg'
                    },
                    { 
                        id: 'microsoft',
                        title: 'Microsoft 365 Fundamentals', issuer: 'Microsoft (Coursera)', 
                        logoUrlKey: 'logoMicrosoft', issueDate: 'Apr 2023',
                        imageUrlKey: 'certMicrosoft'
                    }
                ],
                contact: {
                    email: 'sravikonakalla@gmail.com',
                    linkedin: 'https://linkedin.com/in/kbalasravani',
                    formspree_url: 'https://formspree.io/f/myznbzer'
                },
                 chipotleProject: {
                    dashboardData: {
                        valuationRange: "$2800 – $3200",
                        impliedUpside: "+8%",
                        wacc: "7.5%",
                        terminalGrowth: "3.0%"
                    }
                }
            };

            const mainContainer = document.querySelector('main');
            const navContainer = document.getElementById('main-nav');
            
            // --- SVG Icon Definitions ---
            // Simple replacement SVGs. More complex icons might require specific SVG paths.
            const svgIcons = {
                'fa-calculator': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V4a2 2 0 00-2-2H6zm1 2h6v2H7V4zm0 3h6v2H7V7zm0 3h6v2H7v-2zm0 3h6v2H7v-2z" clip-rule="evenodd" /></svg>',
                'fa-sitemap': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a1 1 0 00-1 1v4H5a1 1 0 100 2h4v4H5a1 1 0 100 2h4v1a1 1 0 102 0v-1h4a1 1 0 100-2h-4v-4h4a1 1 0 100-2h-4V3a1 1 0 00-1-1zm0 8a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd" /></svg>',
                'fa-chart-line': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M2 11h1v5H2v-5zM4 5h1v11H4V5zm2 4h1v7H6V9zm1.707 3.707l3-3 1.414 1.414L10.828 15H17v-2h-4.172l-1.121-1.121 2.828-2.828 1.414 1.414L18.414 8 20 9.586l-6.293 6.293a1 1 0 01-1.414 0L9 12.586l-1.293 1.293a1 1 0 01-1.414-1.414l3-3zM10 3h1v13h-1V3zm2-2h1v15h-1V1zm2 3h1v12h-1V4zm2 5h1v7h-1V9z"/></svg>',
                'fa-search-dollar': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path d="M8.433 7.418c.158-.103.34-.153.532-.153.428 0 .788.306.88.724l.084.397.74.315A7.001 7.001 0 008 4c-3.866 0-7 3.134-7 7s3.134 7 7 7a6.999 6.999 0 004.582-1.727l.249.106a1.006 1.006 0 00.998-.05l.16-.079a1.006 1.006 0 00.41-.266l.245-.306.012-.016a1 1 0 00.082-.164l.044-.1.028-.07.019-.058a1 1 0 00-.01-.115l-.03-.105-.034-.117-.042-.127a1 1 0 00-.06-.15l-.049-.115-.06-.112a1 1 0 00-.08-.12l-.066-.095-.078-.1-.082-.09a1 1 0 00-.18-.17l-.11-.08-.12-.07a1.01 1.01 0 00-.21-.09l-.13-.05a1 1 0 00-.28-.05l-.11-.01H10a1 1 0 00-.11.01l-.11.01-.13.03-.14.04-.15.05-.16.06-.16.07-.17.08-.17.09-.17.1-.16.1-.15.11-.14.12-.13.12-.12.13-.1.13-.09.13-.08.13a1 1 0 00-.19.38l-.01.06-.01.07-.01.08a7.003 7.003 0 00-5.433-2.582zM15.5 10a5.5 5.5 0 11-11 0 5.5 5.5 0 0111 0z"/><path d="M12.94 10.94a1.5 1.5 0 11-2.12-2.12 1.5 1.5 0 012.12 2.12z"/></svg>',
                'fa-cogs': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd" /></svg>',
                'fa-check-double': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.707a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" /><path d="M12.293 7.293a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L11 8.414l-1.293 1.293a1 1 0 01-1.414-1.414l4-4z"/></svg>',
                'fa-code': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.316 3.051a1 1 0 01.633 1.265l-4 12a1 1 0 11-1.898-.632l4-12a1 1 0 011.265-.633zM5.707 6.293a1 1 0 010 1.414L3.414 10l2.293 2.293a1 1 0 11-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0zm8.586 0a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 11-1.414-1.414L16.586 10l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>',
                'fa-robot': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 2a8 8 0 100 16 8 8 0 000-16zM6 9a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm8 0a1 1 0 00-1 1v1a1 1 0 102 0v-1a1 1 0 00-1-1zm-4 4a1.5 1.5 0 01-1.5 1.5h-1a1.5 1.5 0 010-3h1A1.5 1.5 0 0110 13zm5.5 1.5a1.5 1.5 0 00-1.5-1.5h-1a1.5 1.5 0 000 3h1a1.5 1.5 0 001.5-1.5z" clip-rule="evenodd" /></svg>',
                'fa-plus': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" /></svg>',
                'fa-download': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>',
                'fa-linkedin': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>',
                'fa-arrow-right': '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>'
            };

            // Helper function to get SVG markup
            const getSvgIcon = (iconClass) => {
                 // Find the relevant class (e.g., 'fa-calculator')
                 const iconName = iconClass; // Assumes iconClass is just the name like 'fa-calculator'
                 return svgIcons[iconName] || ''; // Return SVG string or empty string
            };

            // --- SETUP FUNCTIONS ---
            const setupProjectPage = () => {
                const activePage = document.getElementById('page-projects');
                if (!activePage) return;

                const sections = activePage.querySelectorAll('.project-section-fade-in');
                const sectionObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                sections.forEach(section => sectionObserver.observe(section));
                
                setupHistoricalAnalysis();
                setupProjectForecasts();
            };

            const setupHistoricalAnalysis = () => {
                const container = document.querySelector('.historical-analysis-section');
                if (!container) return;

                const toggles = container.querySelectorAll('.scenario-selector .mini-card-toggle');
                const chartImg = container.querySelector('#historical-analysis-img');
                const interpContainer = container.querySelector('#historical-analysis-interp');

                const viewData = {
                    financials: {
                        imgSrc: portfolioData.imageUrls.chipotleHistFinancials,
                        alt: 'Historical financials: Revenue and Net Income, 2018–2024.',
                        interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Operating Leverage Unlocked —Growth with Margin Expansion</h3>
                            <div class="text-sm text-gray-600 leading-relaxed justified-text space-y-3">
                                <p>The company demonstrates a clear trajectory of profitable growth, with revenues expanding from $7.5 billion in 2021 to $11.3 billion in 2024, while profitability has scaled even faster. </p>
                                <ul class="list-disc list-inside space-y-2 pl-2">
                                    <li>Operating income and net income have more than doubled, reflecting strong operating leverage alongside topline expansion.</li>
                                    <li>Margins steadily improved from 10.7% to 16.9%, underscoring disciplined cost management and economies of scale.</li>
                                    <li>Growth in net income closely tracks operating performance, suggesting gains are sustainable and not eroded by financing or tax pressures.</li>
                                </ul>
                                <p>Overall, the business is converting growth into higher-quality earnings, strengthening its competitive position and signaling resilience.</p>
                            </div>`
                    },
                    stores: {
                        imgSrc: portfolioData.imageUrls.chipotleStoresVsSss,
                        alt: 'Stores vs same-store-sales: 2018–2024.',
                         interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Strategic Evolution—From Recovery Surge to Sustainable Growth</h3>
                            <div class="text-sm text-gray-600 leading-relaxed justified-text space-y-3">
                                <p>This chart visualizes Chipotle's successful transition from a period of anomalous, recovery-driven growth to a more mature and sustainable growth algorithm.</p>
                                <ul class="list-disc list-inside space-y-2 pl-2">
                                    <li>The dramatic 19.3% same-store sales growth (SSSG) in 2021 represents a one-time post-pandemic rebound.</li>
                                    <li>The key insight is the stabilization of SSSG at a best-in-class level of 7.4% to 8.0% from 2022 to 2024, a sign of exceptional brand health.</li>
                                    <li>As intensive growth normalized, Chipotle strategically accelerated extensive growth, expanding its footprint from ~3,000 to over 3,700 stores.</li>
                                </ul>
                                <p>This demonstrates a sophisticated, dual-engine strategy, evolving to a durable, long-term growth phase.</p>
                            </div>`
                    }
                };

                toggles.forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        const view = toggle.dataset.view;
                        
                        toggles.forEach(t => t.setAttribute('aria-pressed', 'false'));
                        toggle.setAttribute('aria-pressed', 'true');
                        
                        chartImg.style.opacity = 0;
                        interpContainer.style.opacity = 0;
                        setTimeout(() => {
                            chartImg.src = viewData[view].imgSrc;
                            chartImg.alt = viewData[view].alt;
                            chartImg.loading = 'lazy'; // Add lazy loading here too
                            interpContainer.innerHTML = viewData[view].interpHTML;
                            chartImg.style.opacity = 1;
                            interpContainer.style.opacity = 1;
                        }, 300);
                    });
                });
                 // Set initial state
                if(toggles.length > 0) toggles[0].click();
            };

            function setupProjectForecasts() {
                const container = document.querySelector('.chipotle-forecast-section');
                if (!container) return;
                
                const toggles = container.querySelectorAll('.scenario-selector .mini-card-toggle');
                const chartImg = container.querySelector('#forecast-analysis-img');
                const interpContainer = container.querySelector('#forecast-analysis-interp');
                
                const viewData = {
                     bear: { 
                        imgSrc: portfolioData.imageUrls.chipotleForecastBear,
                        alt:'Forecast — Net revenue (Bear scenario), 2025–2028.',
                        interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Bear Case — Growth Stagnation: The End of the Expansion Narrative</h3>
                             <div class="text-sm text-gray-600 leading-relaxed justified-text space-y-3">
                                <p>This projection outlines a scenario where Chipotle's growth narrative comes to an abrupt halt, leading to a period of value stagnation. The minimal revenue growth to nearly $15B fails to generate any meaningful shareholder returns, with the implied share price remaining largely flat around the ~$20 mark. This indicates a business that has hit a strategic ceiling, unable to drive the incremental sales and profit necessary to justify its valuation. The flat EPS projection suggests that both key growth levers—same-store sales and new unit economics—have become ineffective, leading to a period of capital inefficiency where investment no longer yields acceptable returns.</p>
                                <ul class="list-disc list-inside space-y-2 pl-2">
                                    <li>Decelerating comparable sales and weakening new store returns are the primary drivers in this model, signaling potential market saturation or a decline in brand relevance.</li>
                                    <li>The stagnant EPS and implied halt in accretive share repurchases indicate that it is a severe valuation de-rating which means the company can no longer efficiently compound shareholder value, breaking the investment thesis.</li>
                                </ul>
                            </div>`
                     },
                     base: { 
                        imgSrc: portfolioData.imageUrls.chipotleForecastBase,
                        alt:'Forecast — Net revenue (Base scenario), 2025–2028.',
                        interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Base Case — The Execution Baseline: Steady Growth Supporting Fundamental Value</h3>
                            <div class="text-sm text-gray-600 leading-relaxed justified-text space-y-3">
                                <p>This projection outlines a more tempered, yet still positive, future, reflecting a normalization of the company's high-growth phase. While revenue continues to build to ~$16B, the corresponding valuation growth to ~$51 is more modest. This suggests a scenario where the market rewards consistent operational delivery but does not award a significant expansion of the valuation multiple. The strategic narrative shifts from one of explosive growth to one of disciplined execution and margin preservation in a more challenging macroeconomic environment.</p>
                                <ul class="list-disc list-inside space-y-2 pl-2">
                                    <li>The model assumes the company successfully navigates a landscape where driving high-percentage comp growth becomes more difficult, placing greater emphasis on operational efficiency to protect profitability.</li>
                                    <li>The valuation growth is primarily a function of the company "growing into" its multiple through solid EPS expansion to $1.7, rather than the market pricing in an accelerating growth story.</li>
                                </ul>
                            </div>`
                     },
                     bull: { 
                        imgSrc: portfolioData.imageUrls.chipotleForecastBull,
                        alt:'Forecast — Net revenue (Bull scenario), 2025–2028.',
                        interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Bull Case Forecast: Revenue-driven value creation</h3>
                            <div class="text-sm text-gray-600 leading-relaxed justified-text space-y-3">
                                <p>Chipotle’s forecast points to a strong, steady expansion of its topline, with revenues climbing toward the $17–18B range over the projection horizon. This trajectory highlights the company’s ability to sustain growth while maintaining brand strength and consumer loyalty, a key driver in scaling consistently. The graph captures not just expansion, but predictability — a signal that growth is anchored in fundamentals.</p>
                                <ul class="list-disc list-inside space-y-2 pl-2">
                                    <li>The implied share price rises in tandem, reaching close to $72, suggesting that valuation upside is being driven primarily by operational delivery rather than speculative multiple expansion. Investors are effectively rewarding Chipotle’s ability to convert sales momentum into shareholder returns.</li>
                                    <li>The closeness of the revenue and price curves underscores executional alignment: predictable sales growth translates into proportionate investor confidence. This points to a business model where scale is compounding value without significant reliance on external factors.</li>
                                    <li>Margin strength, combined with an accretive share repurchase program that drives EPS from $1.5 to $2.0, justifies the premium valuation forecast.</li>
                                </ul>
                            </div>`
                     }
                };

                toggles.forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        const view = toggle.dataset.view;
                        
                        toggles.forEach(t => t.setAttribute('aria-pressed', 'false'));
                        toggle.setAttribute('aria-pressed', 'true');
                        
                        chartImg.style.opacity = 0;
                        interpContainer.style.opacity = 0;
                        setTimeout(() => {
                            chartImg.src = viewData[view].imgSrc;
                            chartImg.alt = viewData[view].alt;
                            chartImg.loading = 'lazy'; // Add lazy loading here too
                            interpContainer.innerHTML = viewData[view].interpHTML;
                            chartImg.style.opacity = 1;
                            interpContainer.style.opacity = 1;
                        }, 300);
                    });
                });
                // Set initial state
                if(toggles.length > 0) {
                    const baseCaseButton = Array.from(toggles).find(t => t.dataset.view === 'base');
                    if(baseCaseButton) baseCaseButton.click();
                }
            }


            const showPage = (pageId) => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                const newPage = document.getElementById(`page-${pageId}`);
                if (newPage) {
                    newPage.classList.add('active');
                    if (pageId === 'projects') {
                        setTimeout(() => {
                            setupProjectPage();
                        }, 50);
                    }
                     // Trigger lazy loading check when page changes
                     window.dispatchEvent(new Event('scroll')); 
                }
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.pageId === pageId) {
                        link.classList.add('active');
                        link.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                    }
                });

                sessionStorage.setItem('activePage', pageId);

                if (pageId !== 'home') {
                    window.scrollTo(0, 0);
                } else {
                     // Ensure parallax visibility check runs on home page load
                     setTimeout(() => window.dispatchEvent(new Event('scroll')), 50);
                }
                handleScrollAnimations(); 
            };

            portfolioData.pages.forEach(page => {
                const link = document.createElement('a');
                link.className = 'nav-link';
                if (page.id === 'home') link.classList.add('active');
                link.textContent = page.label;
                link.dataset.pageId = page.id;
                 // Use click event listener instead of inline onclick for CSP
                 link.addEventListener('click', (e) => {
                     e.preventDefault(); // Prevent default link behavior if needed
                     showPage(page.id);
                 });
                navContainer.appendChild(link);
            });
            
            const createHomePage = () => {
                const page = document.createElement('div');
                page.id = 'page-home';
                page.className = 'page active';

                const parallaxBanners = [
                    { 
                        id: 'experience', 
                        title: 'Work Experience', 
                        description: 'Hands-on experience across management and financial analysis roles, developing expertise through progressive responsibilities and real-world problem-solving.',
                        bg: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?q=80&w=1920&auto=format&fit=crop', // Low quality initially? Needs JS logic
                        buttonPageId: 'experience'
                    },
                    { 
                        id: 'education', 
                        title: 'Academic Background', 
                        description: 'A strong academic foundation with an MBA in Finance and a Bachelor\'s in Technology, providing a robust blend of quantitative and strategic expertise.',
                        bg: 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'education'
                    },
                    { 
                        id: 'projects', 
                        title: 'Key Projects', 
                        description: 'Real-time financial modeling and valuation projects, including Chipotle Mexican Grill FMVA® analysis. Transforming theory into practical, data-driven insights.',
                        bg: 'https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'projects'
                    },
                    { 
                        id: 'resume', 
                        title: 'Resume', 
                        description: 'Certified in financial modeling and valuation, continuously upskilling in finance. Explore my resume to see detailed experience and qualifications.',
                        bg: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?q=80&w=1920&auto-format&fit=crop',
                        buttonPageId: 'resume'
                    }
                ];

                 // Create button click handlers dynamically to avoid inline JS
                 const bannerButtonClickHandlers = {};
                 parallaxBanners.forEach(section => {
                     bannerButtonClickHandlers[section.buttonPageId] = () => {
                         const navLink = document.getElementById('main-nav').querySelector(`[data-page-id=${section.buttonPageId}]`);
                         if(navLink) navLink.click();
                     };
                 });

                const parallaxBannersHTML = parallaxBanners.map(section => `
                    <div class="parallax-banner" style="background-image: url('${section.bg}')">
                        <div class="parallax-overlay"></div>
                        <div class="parallax-content p-8">
                            <h2 class="text-3xl md:text-4xl font-bold mb-4">${section.title}</h2>
                            <div class="max-w-2xl mx-auto mb-6 text-base md:text-lg justified-text">
                                <p>${section.description}</p>
                            </div>
                             <button data-target-page="${section.buttonPageId}" class="explore-btn font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-2" aria-label="Explore ${section.title}">
                                Explore 
                                <!-- Arrow Right SVG -->
                                <svg class="svg-icon w-4 h-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                  <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <div class="min-h-screen flex flex-col relative">
                        <section class="flex-grow flex items-center pt-40 pb-16">
                            <div class="container mx-auto px-6">
                               <div class="grid md:grid-cols-10 gap-8 items-center">
                                    <div class="md:col-span-3 flex justify-center md:justify-end">
                                        <div id="profile-image-container" class="relative profile-image-placeholder w-40 h-40 md:w-56 md:h-56">
                                            <!-- Added width/height for layout stability -->
                                            <img id="profile-image" src="${portfolioData.imageUrls.profile}" alt="Bala Sravani Konakalla" class="rounded-full w-full h-full object-cover border-4 border-white/50" width="224" height="224" onerror="this.onerror=null;this.src='https://placehold.co/224x224/F5F1EA/9C8FA7?text=Image+Not+Found';">
                                        </div>
                                    </div>
                                    <div class="md:col-span-7 text-center md:text-left">
                                        <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight" style="color: #221C2A;">${portfolioData.home.name}</h1>
                                        <p class="text-sm md:text-base max-w-2xl md:mx-0 justified-text" style="color: #463863;">${portfolioData.home.about}</p>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="pb-16 md:pb-24">
                            <div class="container mx-auto px-6">
                               <div class="profile-summary-box max-w-4xl mx-auto bg-white/70 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-200">
                                    <h3 class="text-2xl md:text-3xl font-bold mb-4 text-center" style="color: #221C2A;">Profile Summary</h3>
                                    <p class="text-sm justified-text" style="color: #463863; line-height: 1.8;">${portfolioData.home.summary}</p>
                               </div>
                            </div>
                        </section>
                    </div>
                    
                    <div class="relative z-10">
                        ${parallaxBannersHTML}
                    </div>
                `;
                mainContainer.appendChild(page);

                 // Add event listeners for parallax buttons
                 page.querySelectorAll('.explore-btn[data-target-page]').forEach(button => {
                     const targetPageId = button.dataset.targetPage;
                     if (bannerButtonClickHandlers[targetPageId]) {
                         button.addEventListener('click', bannerButtonClickHandlers[targetPageId]);
                     }
                 });
            };

            const createExperiencePage = () => { // Changed back to a normal function
                const page = document.createElement('div');
                page.id = 'page-experience';
                page.className = 'page';

                const experiencesHTML = portfolioData.experiences.map((exp, index) => {
                    const dutiesHTML = exp.duties.map(duty => `<li class="mb-2">${duty}</li>`).join('');
                    const domainHTML = exp.domain.map(d => `<li class="mb-2">${d}</li>`).join('');

                    return {
                        id: index,
                        ...exp,
                        html: {
                            explorerListItem: `
                                <button class="exp-role-explorer-list-item text-left p-4 rounded-lg w-full ${index === 0 ? 'active' : ''}" data-id="${index}">
                                    <div class="flex items-center gap-3">
                                        <div class="logo-holder !w-10 !h-10">
                                            <img src="${portfolioData.imageUrls[exp.logoUrlKey]}" alt="${exp.company} Logo" loading="lazy" width="40" height="40">
                                        </div>
                                        <div>
                                            <h4 class="font-bold text-sm">${exp.title}</h4>
                                            <p class="text-xs text-gray-500">${exp.company}</p>
                                        </div>
                                    </div>
                                </button>`,
                            explorerContent: `
                                <div class="flex-grow">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2">
                                        <h3 class="text-xl font-bold mb-1 sm:mb-0">${exp.title}</h3>
                                        <p class="text-sm font-medium sm:mt-1 sm:flex-shrink-0 sm:ml-4 order-3 sm:order-2" style="color: #D1A46E;">${exp.date}</p>
                                        <p class="font-semibold mb-0 sm:mb-4 order-2 sm:hidden" style="color: #463863;">${exp.companyFull}</p>
                                    </div>
                                    <p class="font-semibold mb-4 hidden sm:block" style="color: #463863;">${exp.companyFull}</p>
                                    <h4 class="font-bold mb-2" style="color: #D1A46E;">Core Responsibilities:</h4>
                                    <ul class="list-disc pl-5 space-y-1 mb-4">${dutiesHTML}</ul>
                                    <h4 class="font-bold mb-2" style="color: #D1A46E;">Competencies:</h4>
                                    <ul class="list-disc pl-5 space-y-1">${domainHTML}</ul>
                                </div>`,
                        }
                    };
                });
                
                // New Skills List & Icons
                const strategicCapabilities = [
                    { name: 'Financial Modeling & Valuation', iconClass: 'fa-calculator' },
                    { name: 'Scenario Analysis', iconClass: 'fa-sitemap' },
                    { name: 'Advanced Excel & Tableau', iconClass: 'fa-chart-line' },
                    { name: 'S&P Capital IQ', iconClass: 'fa-search-dollar' },
                    { name: 'SAP BPC', iconClass: 'fa-cogs' },
                    { name: 'Data Integrity & Validation', iconClass: 'fa-check-double' },
                    { name: 'Vibe Coding', iconClass: 'fa-code' },
                    { name: 'Power BI & Automation', iconClass: 'fa-robot' }
                ];

                const skillsMatrixHTML = strategicCapabilities.map(skill => `
                    <div class="skill-matrix-item">
                        <div class="skill-logo-holder !w-12 !h-12">
                            ${getSvgIcon(skill.iconClass)}
                        </div>
                        <h4>${skill.name}</h4>
                    </div>
                `).join('');


                page.innerHTML = `
                    <section class="pt-28 pb-16">
                        <div class="container mx-auto px-6">
                            <h2 class="text-3xl md:text-4xl font-bold text-center mb-4" style="color: #221C2A;">Work Experience</h2>
                            <p class="text-center max-w-3xl mx-auto mb-12" style="color: #9C8FA7;">A detailed overview of my professional roles and responsibilities. Use the interactive menu on the left to switch between positions.</p>

                            <div class="bg-white/50 p-4 rounded-lg shadow-inner">
                                <div class="grid md:grid-cols-12 gap-6">
                                    <div class="md:col-span-4 lg:col-span-3">
                                        <div class="exp-role-explorer-list space-y-2">
                                            ${experiencesHTML.map(exp => exp.html.explorerListItem).join('')}
                                        </div>
                                    </div>
                                    <div class="md:col-span-8 lg:col-span-9 bg-white p-6 rounded-lg shadow-md card-effect">
                                        <div id="exp-role-explorer-content">${experiencesHTML[0].html.explorerContent}</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="text-center mt-20">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Strategic Capabilities</h3>
                                
                                <div class="skills-matrix-container max-w-5xl mx-auto">
                                    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4 md:gap-6"> <!-- Adjusted grid cols -->
                                        ${skillsMatrixHTML}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            }; // End createExperiencePage

            const createEducationPage = () => {
                const page = document.createElement('div');
                page.id = 'page-education';
                page.className = 'page';

                const educationCardsHTML = portfolioData.educations.map(edu => `
                    <div class="education-card bg-white rounded-2xl flex overflow-hidden w-full max-w-2xl mx-auto"> <!-- REVERTED: Removed flex-col md:flex-row -->
                        <div class="logo-holder"> <!-- REVERTED: Removed !w-24 md:!w-32 -->
                            <img src="${portfolioData.imageUrls[edu.logoUrlKey]}" alt="${edu.school} Logo" loading="lazy" width="128" height="128" onerror="this.src='https://placehold.co/128x128/FFFFFF/463863?text=Logo'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <div class="py-6 pr-6 pl-8 relative flex-grow"> <!-- REVERTED: Restored padding, removed text-center -->
                            <h4 class="text-xl font-bold" style="color: #221C2A;">${edu.degree}</h4>
                            <p class="font-semibold text-md mb-1" style="color: #463863;">${edu.specialization}</p>
                            <p class="text-sm" style="color: #9C8FA7;">${edu.school}, ${edu.location}</p>
                            <p class."text-sm font-medium" style="color: #D1A46E;">${edu.date}</p> <!-- REVERTED: Removed mb-10 -->
                            <div class="absolute bottom-6 right-6"> <!-- REVERTED: Restored positioning -->
                                <span class="cgpa-badge">${edu.details}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                const certificationCardsHTML = portfolioData.certifications.map(cert => `
                    <div class="certification-card bg-white rounded-2xl flex overflow-hidden w-full max-w-3xl mx-auto"> <!-- REVERTED: Removed flex-col md:flex-row -->
                        <div class="logo-holder !w-24 md:!w-32"> <!-- REVERTED: This class was correct -->
                             <img src="${portfolioData.imageUrls[cert.logoUrlKey]}" alt="${cert.issuer} Logo" loading="lazy" width="128" height="128" onerror="this.src='https://placehold.co/128x128/FFFFFF/463863?text=Logo'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <div class="p-4 md:p-6 flex-grow flex flex-col sm:flex-row justify-between items-start sm:items-center"> <!-- REVERTED: Back to original classes -->
                            <div class="mb-4 sm:mb-0"> <!-- REVERTED: Back to original classes -->
                                <h4 class="text-lg font-bold" style="color: #221C2A;">${cert.title}</h4>
                                <p class="font-semibold text-sm mb-1" style="color: #463863;">${cert.issuer}</p>
                                <p class="text-xs font-medium" style="color: #D1A46E;">Issued: ${cert.issueDate}</p>
                            </div>
                            <button class="view-cert-btn cert-view-btn flex-shrink-0" <!-- REVERTED: Removed absolute/relative positioning classes -->
                                    data-img-src="${portfolioData.imageUrls[cert.imageUrlKey]}" 
                                    aria-label="View ${cert.title} certificate">
                                <!-- Plus SVG -->
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" /></svg>
                            </button>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <section class="pt-28 pb-16">
                        <div class="container mx-auto px-6">
                            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Academic Background</h3>
                            <div class="space-y-8">
                                ${educationCardsHTML}
                            </div>
                            
                            <div class="cert-section mt-20">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Certifications</h3>
                                <div class="max-w-4xl mx-auto space-y-8">
                                    ${certificationCardsHTML}
                                </div>
                            </div>
                        </div>
                    </section>
                    `;
                mainContainer.appendChild(page);

                 // Add event listeners for certificate buttons
                 page.querySelectorAll('.view-cert-btn[data-img-src]').forEach(button => {
                     button.addEventListener('click', (e) => {
                         const imgSrc = e.currentTarget.dataset.imgSrc;
                         if (imgSrc) openLightbox(imgSrc);
                     });
                 });

            };

            const createResumePage = () => {
                const page = document.createElement('div');
                page.id = 'page-resume';
                page.className = 'page';

                page.innerHTML = `
                    <section class="pt-28 pb-16 min-h-[90vh] flex items-center">
                        <div class="container mx-auto px-4 text-center max-w-4xl">
                            <h2 class="text-3xl md:text-4xl font-bold mb-6" style="color: #221C2A;">Resume</h2>
                            
                            <div class="bg-white rounded-2xl shadow-lg p-2 md:p-4 mb-2 cursor-pointer hover:opacity-90 transition-opacity" id="resume-preview-container">
                                <img src="${portfolioData.imageUrls.resumePreview}" 
                                     alt="Preview of Bala Sravani Konakalla’s Resume" 
                                     class="w-full h-auto rounded-lg mx-auto" 
                                     loading="lazy" width="816" height="1056"> <!-- Added lazy loading, width/height -->
                            </div>
                            <p id="resume-last-updated" class="text-sm text-gray-500 text-right italic mb-8"></p>

                            <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                                 <a href="./Bala Sravani Konakalla.pdf" download="Bala_Sravani_Konakalla_Resume.pdf" class="btn-primary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="Download Resume PDF">
                                     <!-- Download SVG -->
                                     <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                       <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                                     </svg>
                                     Download PDF
                                </a>
                                <a href="https://linkedin.com/in/kbalasravani" target="_blank" rel="noopener noreferrer" class="btn-secondary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="View on LinkedIn">
                                     <!-- LinkedIn SVG -->
                                     <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="18" height="18"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                                     View on LinkedIn
                                </a>
                            </div>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);

                // Add click listener for resume preview
                const resumePreviewContainer = page.querySelector('#resume-preview-container');
                const resumeImage = resumePreviewContainer.querySelector('img');
                 if(resumePreviewContainer && resumeImage) {
                    resumePreviewContainer.addEventListener('click', () => {
                         openLightbox(resumeImage.src);
                    });
                 }


                // Set last updated date
                const lastUpdatedEl = page.querySelector('#resume-last-updated');
                if (lastUpdatedEl) {
                    const today = new Date();
                    // Simple approximation: Set to the previous Sunday
                    const dayOfWeek = today.getDay(); // Sunday = 0
                    const diff = today.getDate() - dayOfWeek;
                    const lastSunday = new Date(today.setDate(diff));

                    // Avoid showing future dates if today is Sunday
                    if (lastSunday > new Date()) { 
                         lastSunday.setDate(lastSunday.getDate() - 7);
                    }

                    const formattedDate = lastSunday.toLocaleDateString('en-US', {
                        month: 'long',
                        day: 'numeric',
                        year: 'numeric'
                    });
                    lastUpdatedEl.textContent = `Last updated on ${formattedDate}`;
                }
            };
            
            const createProjectsPage = () => {
                const page = document.createElement('div');
                page.id = 'page-projects';
                page.className = 'page';

                page.innerHTML = `
                <!-- 1. Project Header Section -->
                <div id="project-header" class="project-section-fade-in relative overflow-hidden pt-40 pb-16">
                    <div class="absolute inset-0 z-0">
                        <!-- Decorative SVG -->
                         <svg class="absolute bottom-0 right-0 h-1/2 w-1/2 text-gray-500 opacity-[0.03]" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 597.995c-113.003 0-204.8-91.797-204.8-204.8s91.797-204.8 204.8-204.8 204.8 91.797 204.8 204.8-91.797 204.8-204.8 204.8zM512 256c-79.508 0-144.37 64.862-144.37 144.37s64.862 144.37 144.37 144.37 144.37-64.862 144.37-144.37-64.862-144.37-144.37-144.37z"/><path d="M512 1024c-282.77 0-512-229.23-512-512s229.23-512 512-512 512 229.23 512 512-229.23 512-512 512zM512 61.44C264.604 61.44 61.44 264.604 61.44 512s203.164 450.56 450.56 450.56 450.56-203.164 450.56-450.56-203.164-450.56-450.56-450.56z"/><path d="M961.075 613.99c-30.822-1.946-59.597-10.138-85.3-23.757l-2.048-1.229c-10.138-6.042-19.866-12.7-28.979-20.07-8.806-6.963-16.896-14.541-24.166-22.733-1.434-1.638-2.867-3.277-4.301-4.915-28.365-32.358-49.152-70.554-59.802-112.947-3.277-13.005-5.325-26.317-6.554-39.834-0.614-10.138-0.614-20.378-0.205-30.515 1.536-25.805 6.758-50.995 15.36-74.957 14.848-41.472 40.55-78.131 74.547-107.008 33.382-28.365 73.626-47.309 117.555-55.296 5.837-1.024 11.674-1.843 17.613-2.458 35.84-3.79 72.192-0.307 106.803 10.138 34.099 10.24 65.638 27.238 93.39 49.971 2.867 2.355 5.632 4.813 8.397 7.27 34.816 30.618 60.006 70.144 72.909 114.176 15.36 52.634 15.053 108.954-0.819 161.792-12.902 43.11-37.376 81.92-69.837 114.176-32.051 31.846-70.963 56.525-114.074 71.373-35.635 12.288-73.421 18.227-111.821 17.408-10.138-0.205-20.275-0.819-30.31-1.843z"/></svg>
                    </div>
                    <div class="container mx-auto max-w-screen-xl px-6 md:px-8 relative z-10">
                        <div class="grid md:grid-cols-12 gap-x-4 items-center text-center md:text-left">
                             <div class="md:col-span-2 flex justify-center md:justify-end">
                                <div class="w-28 h-28 md:w-32 md:h-32 bg-white rounded-full chipotle-logo-glow flex items-center justify-center flex-shrink-0 overflow-hidden">
                                    <img src="${portfolioData.imageUrls.logoChipotle}" alt="Chipotle Company Logo" class="w-full h-full object-cover" loading="lazy" width="128" height="128" onerror="this.src='https://placehold.co/128x128/FFFFFF/AD2F1F?text=CMG'">
                                </div>
                            </div>
                            <div class="md:col-span-10">
                                <h1 class="text-3xl md:text-4xl font-extrabold leading-tight">Chipotle Mexican Grill, Inc. (NYSE: CMG)</h1>
                                <h2 class="text-xl md:text-2xl font-semibold mt-2" style="color: #AD2F1F;">Financial Modeling & Multi-Scenario Forecasting</h2>
                            </div>
                        </div>

                        <div class="w-full border-t border-gray-300/60 my-8 md:my-12"></div>
                        
                        <div class="max-w-6xl mx-auto space-y-8">
                            <div class="project-card bg-white/70 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-200 text-left">
                                <h3 class="font-bold text-lg mb-2">About the Company</h3>
                                <p class="text-sm leading-relaxed mb-4 justified-text">
                                    Chipotle Mexican Grill is a company-owned fast-casual restaurant chain built around customizable burritos and bowls. As of 2024 it operates roughly 3,700+ restaurants and has scaled its Chipotlane drive-thru format to meet rising digital demand. The brand’s “Food With Integrity” sourcing, a streamlined menu, and centralized operations support consistent unit economics and quality control. Primary growth drivers are disciplined unit expansion, Chipotlane penetration, digital ordering & loyalty, and menu innovation — all backed by tight cost control that has driven margin expansion. Together, these factors position Chipotle to convert new store growth and higher digital penetration into durable, higher-quality earnings.
                                </p>
                                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center pt-4 border-t border-gray-200">
                                    <div><p class="font-bold">Analysis</p><p class="text-xs">Sep 2025</p></div>
                                    <div><p class="font-bold">Historical</p><p class="text-xs">2021 - 2024</p></div>
                                    <div><p class="font-bold">Forecast</p><p class="text-xs">2025 - 2028</p></div>
                                    <div><p class="font-bold">Sources</p><p class="text-xs">10-K Filings</p></div>
                                </div>
                            </div>
                             <div class="project-card bg-white/70 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-200 text-left">
                                <h3 class="font-bold text-lg mb-2">About the Project</h3>
                                <p class="text-sm leading-relaxed mb-4 justified-text">
                                   Leveraging a comprehensive financial modeling skill set, this project delivers a detailed assessment of Chipotle's financial performance and a forward-looking valuation through FY28. The core of the analysis deconstructs revenue growth into its primary drivers of store expansion and same-store sales, and then traces the impact through margin evolution down to earnings per share. To quantify a range of potential outcomes, the model utilizes Bull, Base, and Bear scenarios to test how Chipotle's intrinsic value responds to shifts in key business assumptions. More than just a final number, this analysis provides a strategic framework for evaluating how operational decisions translate into financial returns.
                                </p>
                                <div class="flex flex-wrap justify-start gap-2 pt-4 border-t border-gray-200">
                                     <span class="bg-blue-100 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full">Scenario Analysis</span>
                                     <span class="bg-green-100 text-green-800 text-xs font-semibold px-3 py-1 rounded-full">Forecasting</span>
                                     <span class="bg-yellow-100 text-yellow-800 text-xs font-semibold px-3 py-1 rounded-full">Financial Modeling</span>
                                     <span class="bg-purple-100 text-purple-800 text-xs font-semibold px-3 py-1 rounded-full">Valuation Analysis</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Historical Analysis Section -->
                <section class="historical-analysis-section py-12 md:py-16 bg-white/50 project-section-fade-in">
                     <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-8">
                             <h2 class="text-3xl md:text-4xl font-bold">Historical Analysis</h2>
                        </div>
                        
                        <div class="grid md:grid-cols-12 gap-6 md:gap-8 items-center">
                            <!-- Chart -->
                            <div class="md:col-span-7">
                                <div class="scenario-selector flex justify-center items-center gap-4 mb-6">
                                    <button class="mini-card-toggle text-left p-3 rounded-lg w-40" data-view="financials" aria-pressed="true">
                                        <h4 class="font-bold text-sm">Financials</h4>
                                        <p class="text-xs text-gray-500">Revenue & Profit</p>
                                    </button>
                                    <button class="mini-card-toggle text-left p-3 rounded-lg w-40" data-view="stores" aria-pressed="false">
                                        <h4 class="font-bold text-sm">Stores vs SSS</h4>
                                        <p class="text-xs text-gray-500">Units & Comps</p>
                                    </button>
                                </div>
                                <div class="chart-frame project-card">
                                    <img id="historical-analysis-img" src="${portfolioData.imageUrls.chipotleHistFinancials}" width="1280" height="720" loading="lazy" alt="Historical financials: Revenue and Net Income, 2018–2024.">
                                </div>
                            </div>
                            <!-- Interpretation -->
                            <div id="historical-analysis-interp" class="md:col-span-5 transition-opacity duration-300 project-card p-4 rounded-lg">
                                <!-- Content will be injected by JS -->
                            </div>
                        </div>
                    </div>
                </section>
                
                 <!-- Forecast Section -->
                <section class="chipotle-forecast-section py-12 md:py-16 project-section-fade-in">
                     <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-12">
                             <h2 class="text-3xl md:text-4xl font-bold">Forecast Scenarios — Bull / Base / Bear (2025–2028)</h2>
                        </div>
                        
                        <div class="grid md:grid-cols-12 gap-6 md:gap-8 items-center">
                            <!-- Chart -->
                            <div class="md:col-span-7">
                                <div class="scenario-selector flex flex-wrap justify-center items-center gap-4 mb-6">
                                    <button class="mini-card-toggle text-left p-3 rounded-lg w-40" data-view="bull" aria-pressed="false">
                                        <h4 class="font-bold text-sm">Bull Case</h4>
                                        <p class="text-xs text-gray-500">Upside Scenario</p>
                                    </button>
                                    <button class="mini-card-toggle text-left p-3 rounded-lg w-40" data-view="base" aria-pressed="true">
                                        <h4 class="font-bold text-sm">Base Case</h4>
                                        <p class="text-xs text-gray-500">Central Scenario</p>
                                    </button>
                                    <button class="mini-card-toggle text-left p-3 rounded-lg w-40" data-view="bear" aria-pressed="false">
                                        <h4 class="font-bold text-sm">Bear Case</h4>
                                        <p class="text-xs text-gray-500">Downside Scenario</p>
                                    </button>
                                </div>
                                <div class="chart-frame project-card">
                                    <img id="forecast-analysis-img" src="${portfolioData.imageUrls.chipotleForecastBase}" width="1280" height="720" loading="lazy" alt="Forecast — Net revenue (Base scenario), 2025–2028.">
                                </div>
                            </div>
                            <!-- Interpretation -->
                            <div id="forecast-analysis-interp" class="md:col-span-5 transition-opacity duration-300 project-card p-4 rounded-lg">
                               <!-- Content will be injected by JS -->
                            </div>
                        </div>
                    </div>
                </section>

                 <!-- 5. Investment Thesis Section -->
                <section id="investment-thesis" class="py-12 md:py-20 project-section-fade-in">
                    <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="bg-white/70 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-gray-200 project-card">
                             <h2 class="text-3xl font-bold mb-8 text-center">Investment Perspective</h2>
                            <div class="grid md:grid-cols-12 gap-8 items-center">
                                <div class="md:col-span-4">
                                    <div class="p-6 bg-gray-100 rounded-lg flex items-center justify-center">
                                         <!-- Investment Perspective SVG -->
                                        <svg class="w-full h-auto max-w-[200px] text-[#463863]" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M4 4h4v16H4V4zm6 6h4v10h-4V10zm6-4h4v14h-4V6z" fill-opacity="0.3"/>
                                            <path d="M5 20V7h2v13H5zm6-10v10h2V10h-2zm6-3v13h2V7h-2z"/>
                                            <path d="M2.5 19.5h19v2h-19v-2z"/>
                                            <path d="M17 5l-4.5 4.5-2.5-2.5L3 14" stroke="#D1A46E" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                            <path d="M13 5h4v4" stroke="#D1A46E" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                </div>
                                <div class="md:col-span-8">
                                    <div class="text-gray-600 leading-relaxed justified-text space-y-3">
                                        <p>The base-case DCF analysis suggests an intrinsic value range of <strong>$2,800–$3,200 per share</strong>, indicating that the stock is fairly valued at current levels.</p>
                                        <ul class="list-disc list-inside space-y-2 pl-2">
                                            <li><strong>Upside Potential:</strong> Primarily driven by strong digital sales growth, the successful implementation of 'Chipotlane' drive-thrus, and effective menu price increases.</li>
                                            <li><strong>Key Risks:</strong> Include rising food and labor costs, supply chain vulnerabilities, and intense competition in the fast-casual dining sector.</li>
                                        </ul>
                                        <p>The company's ability to manage these risks while capitalizing on growth opportunities will be decisive for future shareholder value.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                
                <section class="py-12 project-section-fade-in">
                    <div class="container mx-auto px-6 md:px-8 text-center">
                        <a href="#" aria-label="Download Financial Model" class="btn-primary font-bold py-3 px-8 rounded-lg inline-flex items-center gap-2">
                             <!-- Download SVG -->
                             <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                               <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
                             </svg>
                             Download Financial Model
                        </a>
                    </div>
                </section>
                `;
                mainContainer.appendChild(page);
            };
            
            // --- INITIALIZE ALL PAGES ---
            createHomePage();
            createExperiencePage(); // Now calls the regular function
            createProjectsPage();
            createEducationPage();
            createResumePage();

            // --- GLOBAL LOGIC & EVENT LISTENERS ---
            document.getElementById('copyright-year').textContent = new Date().getFullYear();

            // Event Delegation for Experience Tab
            mainContainer.addEventListener('click', (e) => {
                const roleExplorerButton = e.target.closest('.exp-role-explorer-list-item');
                if (roleExplorerButton) {
                    const explorerList = roleExplorerButton.closest('.exp-role-explorer-list');
                    const explorerContent = document.getElementById('exp-role-explorer-content');
                    if (!explorerList || !explorerContent) return;

                    explorerList.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                    roleExplorerButton.classList.add('active');
                    
                    const expId = parseInt(roleExplorerButton.dataset.id);
                    const exp = portfolioData.experiences[expId]; 

                    if (exp) { 
                        const dutiesHTML = exp.duties.map(duty => `<li class="mb-2">${duty}</li>`).join(''); 
                        const domainHTML = exp.domain.map(d => `<li class="mb-2">${d}</li>`).join(''); 

                        explorerContent.style.opacity = 0;
                        setTimeout(() => {
                            explorerContent.innerHTML = `
                                <div class="flex-grow">
                                    <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start mb-2">
                                        <h3 class="text-xl font-bold mb-1 sm:mb-0">${exp.title}</h3>
                                        <p class="text-sm font-medium sm:mt-1 sm:flex-shrink-0 sm:ml-4 order-3 sm:order-2" style="color: #D1A46E;">${exp.date}</p>
                                        <p class="font-semibold mb-0 sm:mb-4 order-2 sm:hidden" style="color: #463863;">${exp.companyFull}</p>
                                    </div>
                                    <p class="font-semibold mb-4 hidden sm:block" style="color: #463863;">${exp.companyFull}</p>
                                    <h4 class="font-bold mb-2" style="color: #D1A46E;">Core Responsibilities:</h4>
                                    <ul class="list-disc pl-5 space-y-1 mb-4">${dutiesHTML}</ul>
                                    <h4 class="font-bold mb-2" style="color: #D1A46E;">Competencies:</h4> 
                                    <ul class="list-disc pl-5 space-y-1">${domainHTML}</ul>
                                </div>`;
                            explorerContent.style.opacity = 1;
                        }, 300);
                    } 
                }
            });

            const savedPage = sessionStorage.getItem('activePage');
            if (savedPage) {
                showPage(savedPage);
            } else {
                showPage('home');
            }
            
            const header = document.querySelector('header');
            const progressBar = document.getElementById('progress-bar');
            let lastScrollTop = 0;
            
            // Debounce scroll handler for performance
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                 if (scrollTimeout) {
                    window.cancelAnimationFrame(scrollTimeout);
                 }
                scrollTimeout = window.requestAnimationFrame(() => {
                    let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                    const isScrollingDown = scrollTop > lastScrollTop;
                    header.classList.toggle('nav-hidden', isScrollingDown && scrollTop > header.offsetHeight);
                    lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

                    const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                    const scrollPercent = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
                    if (progressBar) {
                        progressBar.style.width = scrollPercent + '%';
                    }

                    // Optimized visibility checks
                    const parallaxBanners = document.querySelectorAll('.parallax-banner:not(.visible)');
                    parallaxBanners.forEach(banner => {
                        const rect = banner.getBoundingClientRect();
                        if (rect.top < window.innerHeight && rect.bottom >= 0) {
                            banner.classList.add('visible');
                        }
                    });

                    const educationCards = document.querySelectorAll('.education-card:not(.visible), .certification-card:not(.visible)');
                     educationCards.forEach(card => {
                         const rect = card.getBoundingClientRect();
                         if (rect.top < window.innerHeight * 0.85 && rect.bottom >= 0) { // Trigger earlier
                             card.classList.add('visible');
                         }
                     });
                     
                     const projectSections = document.querySelectorAll('.project-section-fade-in:not(.visible)');
                     projectSections.forEach(section => {
                          const rect = section.getBoundingClientRect();
                          if (rect.top < window.innerHeight * 0.8 && rect.bottom >= 0) {
                               section.classList.add('visible');
                          }
                     });

                    handleScrollAnimations(); // Keep for potential future use
                });
            }, { passive: true }); // Use passive listener

            // Initial check on load
             setTimeout(() => window.dispatchEvent(new Event('scroll')), 100);
            
            const successToast = document.getElementById('success-toast');
            const contactModal = document.getElementById('contact-modal');
            const contactForm = contactModal.querySelector('.contact-form');
            contactForm.action = portfolioData.contact.formspree_url;
            
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                fetch(this.action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
                .then(response => { 
                    if (response.ok) { 
                        closeContactModal();
                        setTimeout(() => {
                           successToast.classList.add('show'); 
                            setTimeout(() => successToast.classList.remove('show'), 4000);
                        }, 400);
                        contactForm.reset(); 
                    } else {
                         // Improved error handling (avoids blocking alerts)
                         console.error("Form submission failed:", response.status);
                         response.json().then(data => {
                             if (Object.hasOwn(data, 'errors')) {
                                console.error("Form errors:", data["errors"].map(error => error["message"]).join(", "));
                                // Display error to user in a non-blocking way (e.g., append to form)
                             } else {
                                console.error("Unknown form submission error.");
                             }
                         }).catch(() => console.error("Could not parse form error response."));
                    }
                }).catch(error => {
                    console.error("Form submission fetch error:", error);
                    // Display error to user
                }); 
            });


            function handleScrollAnimations() {} // Placeholder

            // Replaced certificate section delegation with direct listeners during creation

            const canvas = document.getElementById('finance-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            const symbols = ['$', '%', '▲', '▼', '📈', '📉'];
            const mouse = { x: null, y: null, radius: 150 }; // Slightly smaller radius

            // --- Canvas Animation Functions ---
            // Keep track if animation is running
            let animationFrameId = null; 

            // Throttle mousemove listener
             let mouseMoveTimeout;
             window.addEventListener('mousemove', (event) => {
                 if (mouseMoveTimeout) cancelAnimationFrame(mouseMoveTimeout);
                 mouseMoveTimeout = requestAnimationFrame(() => {
                    mouse.x = event.clientX;
                    mouse.y = event.clientY;
                 });
             }, { passive: true });

            window.addEventListener('mouseout', () => { mouse.x = null; mouse.y = null; }, { passive: true });

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
                // Recreate particles on resize ONLY if animation is running
                if (animationFrameId) createParticles(); 
            }

            function createParticles() {
                particles = [];
                // Reduce particle density slightly
                let numberOfParticles = Math.min((canvas.width * canvas.height) / 25000, 100); 
                for (let i = 0; i < numberOfParticles; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 0.2, // Slower speed
                        vy: (Math.random() - 0.5) * 0.2,
                        size: Math.random() * 1.5 + 9, // Slightly smaller size range
                        symbol: symbols[Math.floor(Math.random() * symbols.length)],
                        opacity: Math.random() * 0.4 + 0.1 // Add opacity
                    });
                }
            }

            function connectParticles() {
                let particleCount = particles.length;
                for (let a = 0; a < particleCount; a++) {
                    for (let b = a + 1; b < particleCount; b++) { // Start b from a + 1
                        let dx = particles[a].x - particles[b].x;
                        let dy = particles[a].y - particles[b].y;
                        let distanceSq = dx * dx + dy * dy; // Use squared distance
                        let connectDistanceSq = 100 * 100; // Squared connect distance (100px)

                        if (distanceSq < connectDistanceSq) {
                             let distance = Math.sqrt(distanceSq); // Calculate sqrt only when needed
                            let opacity = 1 - distance / 100;
                            ctx.strokeStyle = `rgba(209, 164, 110, ${opacity * 0.5})`; // Use particle opacity too? Maybe later.
                            ctx.lineWidth = 0.4; // Thinner lines
                            ctx.beginPath();
                            ctx.moveTo(particles[a].x, particles[a].y);
                            ctx.lineTo(particles[b].x, particles[b].y);
                            ctx.stroke();
                        }
                    }
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                let particleCount = particles.length;
                for (let i = 0; i < particleCount; i++) {
                    let p = particles[i];
                    p.x += p.vx; 
                    p.y += p.vy;

                    // Boundary checks
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;

                    // Mouse interaction
                    if (mouse.x && mouse.y) {
                        let dx = mouse.x - p.x;
                        let dy = mouse.y - p.y;
                        let distanceSq = dx * dx + dy * dy;
                        let mouseRadiusSq = mouse.radius * mouse.radius;
                        if (distanceSq < mouseRadiusSq) { 
                             let force = 1 - Math.sqrt(distanceSq) / mouse.radius;
                             p.x -= dx * force * 0.05; // Less aggressive push
                             p.y -= dy * force * 0.05;
                             p.opacity = Math.min(p.opacity + 0.1, 0.7); // Increase opacity on interaction
                        } else {
                             p.opacity = Math.max(p.opacity - 0.01, 0.1); // Fade out slightly
                        }
                    } else {
                         p.opacity = Math.max(p.opacity - 0.005, 0.1); // Fade slowly when mouse out
                    }

                    // Draw particle
                    ctx.fillStyle = `rgba(70, 56, 99, ${p.opacity})`; 
                    ctx.font = `${p.size}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif`; // Use system font
                    ctx.fillText(p.symbol, p.x, p.y);
                }
                connectParticles();
                animationFrameId = requestAnimationFrame(animate); // Store frame ID
            }
            
            // --- Start/Stop Animation based on visibility ---
             const observer = new IntersectionObserver((entries) => {
                 entries.forEach(entry => {
                     if (entry.isIntersecting) {
                         if (!animationFrameId) { // Start if not already running
                             resizeCanvas(); // Ensure size is correct
                             // createParticles(); // Create particles only if needed (e.g., first time)
                             if(particles.length === 0) createParticles();
                             animate();
                         }
                     } else {
                         if (animationFrameId) { // Stop if running
                             cancelAnimationFrame(animationFrameId);
                             animationFrameId = null;
                         }
                     }
                 });
             }, { threshold: 0 }); // Trigger as soon as any part is visible/hidden

             observer.observe(canvas); // Observe the canvas element

            // --- Lightbox ---
            const lightbox = document.getElementById('lightbox');
            const lightboxImg = document.getElementById('lightbox-img');
            const lightboxClose = document.getElementById('lightbox-close');
            window.openLightbox = function(src) {
                if (lightbox && lightboxImg) {
                    lightboxImg.src = src;
                    lightbox.classList.remove('hidden');
                    lightbox.classList.add('flex');
                    // Consider adding focus management and ARIA attributes for accessibility
                }
            }
            function closeLightbox() {
                if (lightbox) {
                    lightbox.classList.add('hidden');
                    lightbox.classList.remove('flex');
                    lightboxImg.src = ''; // Clear src
                }
            }
            if (lightbox && lightboxClose) {
                lightboxClose.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => { 
                    if (e.target === lightbox) closeLightbox(); 
                });
            }

            // --- Contact FAB / Modal ---
            const contactFab = document.getElementById('contact-fab');
            const modalOverlay = contactModal.querySelector('.modal-overlay');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            function openContactModal() {
                 contactModal.classList.remove('hidden');
                 contactModal.classList.add('flex');
                 setTimeout(() => contactModal.classList.add('visible'), 10);
                 // Consider focus management: move focus into the modal
            }
            function closeContactModal() {
                contactModal.classList.remove('visible');
                setTimeout(() => {
                    contactModal.classList.add('hidden');
                    contactModal.classList.remove('flex');
                    // Consider focus management: return focus to FAB or previous element
                }, 300);
            }

            if (contactFab) contactFab.addEventListener('click', openContactModal);
            if (modalOverlay) modalOverlay.addEventListener('click', closeContactModal);
            if (modalCloseBtn) modalCloseBtn.addEventListener('click', closeContactModal);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    if (!lightbox.classList.contains('hidden')) {
                         closeLightbox();
                    } else if (!contactModal.classList.contains('hidden')) {
                         closeContactModal();
                    }
                }
            });

            // --- FAB Pulse Animation ---
            const fabContent = document.querySelector('#contact-fab .fab-content');
            if (fabContent) {
                // Ensure animation only runs once after load
                 const animationPlayed = sessionStorage.getItem('fabAnimationPlayed');
                 if (!animationPlayed) {
                     fabContent.classList.add('fab-pulse');
                     fabContent.addEventListener('animationend', () => {
                         fabContent.classList.remove('fab-pulse');
                         try { // Use try-catch for sessionStorage
                            sessionStorage.setItem('fabAnimationPlayed', 'true');
                         } catch (e) {
                             console.warn("Session storage not available for FAB animation state.");
                         }
                     }, { once: true });
                 } else {
                      fabContent.classList.remove('fab-pulse'); // Remove class if already played
                 }
            }

             // --- Service Worker Check ---
             // Note: A full implementation requires a separate sw.js file and cannot be done here.
             // This is just a placeholder to inform about the limitation.
             if ('serviceWorker' in navigator) {
                 console.log("Service Workers are supported, but registration is skipped due to single-file constraint.");
                 // navigator.serviceWorker.register('/sw.js').then(...).catch(...); 
             } else {
                 console.log("Service Workers not supported by this browser.");
             }

        }); // End DOMContentLoaded
    </script>
</body>
</html>



