<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bala Sravani Konakalla | Finance Professional</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chart.js for dashboard charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <style>
        /* --- COLOR PALETTE --- */
        /* BG #F5F1EA • Surface #FFFFFF • Text #221C2A */
        /* Accent #463863 • Accent-soft #D1A46E • Muted #9C8FA7 */

        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #F5F1EA;
            color: #221C2A;
            overflow-x: hidden;
        }
        #finance-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
        }
        .card-effect {
            background: #FFFFFF; border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
        .card-effect:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 15px -3px rgba(70, 56, 99, 0.1), 0 4px 6px -4px rgba(70, 56, 99, 0.1), 0 0 25px rgba(209, 164, 110, 0.8);
        }
        header { transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        header.nav-hidden { transform: translateY(-100%); }
        .page { display: none; }
        .page.active { display: block; }
        .nav-container { 
            display: inline-block; background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); 
            border: 1px solid #e2e8f0; border-radius: 9999px; 
            padding: 0.5rem; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1); 
            max-width: 100%;
        }
        #main-nav { display: flex; align-items: center; overflow-x: auto; scrollbar-width: none; }
        #main-nav::-webkit-scrollbar { display: none; }
        .nav-link { 
            flex-shrink: 0; padding: 0.75rem 1.5rem; border-radius: 9999px; 
            transition: all 0.3s ease; font-weight: 500; color: #221C2A;
            cursor: pointer; font-size: 1rem;
        }
        .nav-link.active { background-color: #F5F1EA; color: #463863; font-weight: 700; }
        .nav-link:not(.active):hover { background-color: #F5F1EA; }
        
        /* --- PARALLAX BANNER STYLES --- */
        .parallax-banner {
            height: 100vh; /* UPDATED: Make banner full screen height */
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }
        .parallax-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(34, 28, 42, 0.65); /* Darker overlay for better readability */
        }
        .parallax-content {
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .parallax-banner.visible .parallax-content {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- OVERLAY PANEL STYLES (Kept for potential future use) --- */
        .overlay-panel-container {
            padding: 4rem 0;
        }
        .overlay-panel {
            height: 40vh;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1.5rem;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .overlay-panel:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 30px -10px rgba(70, 56, 99, 0.15);
        }
        .overlay-panel .heading-underline {
            position: relative;
            display: inline-block;
        }
        .overlay-panel .heading-underline::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #D1A46E;
            transition: width 0.4s ease;
        }
        .overlay-panel:hover .heading-underline::after {
            width: 100%;
        }
        .overlay-panel .cta-button {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            transform: translateX(120%);
            transition: transform 0.4s ease;
        }
        .overlay-panel:hover .cta-button {
            transform: translateX(0);
        }

        /* --- LIGHTBOX STYLES --- */
        #lightbox {
            transition: opacity 0.3s ease-in-out;
        }
        #lightbox-img {
            transition: transform 0.3s ease-in-out;
            max-width: 90vw;
            max-height: 90vh;
        }
        #lightbox.hidden #lightbox-img {
            transform: scale(0.9);
        }


        /* --- PROJECT PAGE SPECIFIC STYLES --- */
        .project-section-fade-in {
            opacity: 0;
            transform: translateY(16px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .project-section-fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .chipotle-logo-glow {
            box-shadow: 0 0 25px rgba(173, 47, 31, 0.5); /* Chipotle Red */
        }
        .btn-primary, .explore-btn {
            background-color: #463863; color: #FFFFFF;
            transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.2s ease;
        }
        .btn-primary:hover, .explore-btn:hover {
            transform: scale(1.03);
            background-color: #D1A46E; /* Muted gold on hover */
            box-shadow: 0 8px 20px -5px rgba(209, 164, 110, 0.4);
        }
        .btn-secondary {
            background-color: #F5F1EA; color: #463863; border: 1px solid #463863;
            transition: transform 0.15s ease-out, background-color 0.15s ease-out;
        }
        .btn-secondary:hover {
            transform: scale(1.02);
            background-color: #eaddd0;
        }
        .btn-icon {
            background-color: transparent; color: #463863;
            transition: transform 0.15s ease-out, color 0.15s ease-out;
        }
        .btn-icon:hover {
            transform: scale(1.05);
            color: #D1A46E;
        }

        /* Interactive Timeline Accordion */
        .timeline-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding: 0 1rem;
        }
        .timeline-details.active {
            max-height: 500px; /* Increased max-height */
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .accordion-icon.rotate-180 {
            transform: rotate(180deg);
        }
        
        /* Other original styles */
        #success-toast {
            position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%);
            background-color: #10b981; color: white; padding: 1rem 1.5rem;
            border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 100; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        }
        #success-toast.show {
            opacity: 1; visibility: visible; transform: translate(-50%, -10px);
        }
        
        /* --- NEW EXPERIENCE TIMELINE STYLES --- */
        .experience-timeline { position: relative; max-width: 768px; margin: 0 auto; }
        .experience-timeline::after {
            content: '';
            position: absolute;
            width: 4px;
            background-color: #e5e7eb;
            top: 0; bottom: 0;
            left: 50%;
            margin-left: -2px;
        }
        .timeline-item-container { 
            position: relative; 
            width: 50%;
            padding: 10px 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .timeline-item-container.visible {
            opacity: 1;
            transform: translateY(0px);
        }
        .timeline-item-container:nth-child(odd) { left: 0; }
        .timeline-item-container:nth-child(even) { left: 50%; }
        .timeline-item-container::after { /* The dot on the timeline */
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            right: -10px;
            background-color: white;
            border: 4px solid #9C8FA7;
            top: 25px;
            border-radius: 50%;
            z-index: 1;
            transition: all 0.3s ease;
        }
        .timeline-item-container:nth-child(even)::after { left: -10px; }
        .timeline-item-container.active::after {
            border-color: #463863;
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(70, 56, 99, 0.6);
        }

        .timeline-content-wrapper { cursor: pointer; }
        
        /* Mobile timeline styles */
        @media (max-width: 768px) {
            .experience-timeline::after { left: 31px; }
            .timeline-item-container {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            .timeline-item-container:nth-child(even) { left: 0%; }
            .timeline-item-container::after { left: 21px; }
        }

        .logo-holder { width: 60px; height: 60px; background: #FFFFFF; border-radius: 50%; padding: 4px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); transition: box-shadow 0.3s ease; }
        .logo-holder img { width: 100%; height: 100%; border-radius: 50%; object-fit: contain; }
        .skill-logo-holder { width: 48px; height: 48px; background: #FFFFFF; border-radius: 50%; padding: 4px; box-shadow: 0 0 8px rgba(100, 150, 255, 0.6), 0 0 15px rgba(100, 150, 255, 0.4); }
        .skill-logo-holder img { width: 100%; height: 100%; border-radius: 50%; object-fit: contain; }
        
        .education-card { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.3s ease; }
        .education-card.visible { opacity: 1; transform: translateY(0); }
        .education-card:hover { transform: translateY(-8px); box-shadow: 0 12px 20px -4px rgba(70, 56, 99, 0.15), 0 0 30px rgba(209, 164, 110, 0.7); }
        .education-card .logo-holder { width: 120px; height: auto; align-self: stretch; border-radius: 0; padding: 0; box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); overflow: hidden; }
        .education-card .logo-holder img { border-radius: 0; width: 100%; height: 100%; object-fit: cover; }
        .cgpa-badge { background-color: #463863; color: #FFFFFF; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 700; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .accordion-item { background-color: #FFFFFF; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05); transition: margin 0.3s ease-in-out; }
        .accordion-item:not(:last-child) { margin-bottom: 1rem; }
        .accordion-header { width: 100%; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; cursor: pointer; background-color: transparent; border: none; text-align: left; font-weight: 600; font-size: 1.125rem; color: #221C2A; transition: background-color 0.3s ease; }
        .accordion-header:hover { background-color: #F5F1EA; }
        .accordion-header .icon { transition: transform 0.3s ease-in-out; color: #463863; }
        .accordion-item.active .accordion-header .icon { transform: rotate(45deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out; padding: 0 1.5rem; }
        .accordion-content-inner { padding-bottom: 1.5rem; }
        .list-rtl { direction: rtl; list-style-position: inside; }
        .list-rtl li { direction: ltr; }
        
        /* --- NEW FAB and Modal Styles --- */
        #contact-fab {
            position: fixed;
            bottom: 1.5rem; /* bottom-6 */
            left: 1.5rem;  /* left-6 */
            z-index: 50;
        }

        #contact-fab .fab-content {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #463863; /* Accent Violet */
            color: #FFFFFF; /* White */
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            cursor: pointer;
            width: 3rem; /* w-12 */
            height: 3rem; /* h-12 */
            overflow: hidden; /* Crucial for the reveal effect */
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-content {
            width: 12rem; /* w-48 */
        }

        /* Pulse animation for initial load */
        @keyframes pulse-ring {
          0% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0.7), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          70% { box-shadow: 0 0 0 20px rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          100% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        }
        .fab-pulse {
            animation: pulse-ring 2s 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) 1;
        }

        #contact-fab .fab-icon {
            font-size: 1.375rem; /* ~22px */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-icon {
            transform: translateX(-4.5rem);
        }

        #contact-fab .fab-text {
            white-space: nowrap;
            opacity: 0;
            font-weight: 600;
            position: absolute;
            transform: translateX(1rem);
            transition: opacity 0.2s ease-in-out 0.1s; /* Delayed fade-in */
        }
        
        #contact-fab:hover .fab-text {
            opacity: 1;
        }
        
        /* Desktop and larger screens */
        @media (min-width: 768px) {
            #contact-fab {
                bottom: auto;
                left: auto;
                right: 1.5rem; /* right-6 */
                top: 50%;
                transform: translateY(-50%);
            }
        }
        
        #contact-modal {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #contact-modal.visible {
            opacity: 1;
            visibility: visible;
        }
        #contact-modal .modal-overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        #contact-modal .modal-content {
            position: relative;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 32rem; /* 512px */
            padding: 2rem;
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        #contact-modal.visible .modal-content {
            transform: scale(1);
        }

        /* --- NEW: Profile Image Placeholder --- */
        .profile-image-placeholder {
            border-radius: 50%;
            box-shadow:
                0 0 5px rgba(209, 164, 110, 0.8),  /* #D1A46E - Muted Gold */
                0 0 10px rgba(209, 164, 110, 0.6),
                0 0 20px rgba(70, 56, 99, 0.5),   /* #463863 - Accent Violet */
                0 0 40px rgba(70, 56, 99, 0.4);
            transition: box-shadow 0.3s ease-in-out;
        }
        .profile-image-placeholder:hover {
            box-shadow:
                0 0 8px rgba(209, 164, 110, 1),
                0 0 15px rgba(209, 164, 110, 0.8),
                0 0 30px rgba(70, 56, 99, 0.7),
                0 0 60px rgba(70, 56, 99, 0.5);
        }

        /* --- Chipotle Historical Analysis Styles --- */
        .historical-analysis-section .chart-frame {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            padding: 0.75rem;
            position: relative;
            overflow: hidden;
        }
        .historical-analysis-section .chart-frame img {
            border-radius: 0.25rem;
            transition: opacity 0.4s ease-in-out;
        }
        .historical-analysis-section .chart-summary {
            padding-top: 0.5rem;
            font-size: 0.8rem;
            color: #9C8FA7;
        }
        .historical-analysis-section .mini-card-toggle {
            background-color: #fff;
            border: 2px solid transparent;
            transition: all 0.2s ease-in-out;
        }
        .historical-analysis-section .mini-card-toggle[aria-pressed="true"] {
            border-color: #463863;
            box-shadow: 0 4px 12px rgba(70, 56, 99, 0.2);
            transform: scale(1.03);
        }
        @media (max-width: 767px) {
            .historical-analysis-nav {
                display: flex;
                overflow-x: auto;
                padding-bottom: 1rem;
                scrollbar-width: none;
            }
             .historical-analysis-nav::-webkit-scrollbar {
                display: none;
            }
            .historical-analysis-nav .mini-card-toggle {
                flex-shrink: 0;
            }
        }
        
        /* --- Chipotle Forecast Preview Variants --- */
        .chipotle-preview-forecasts .preview-badge {
            background-color: #AD2F1F; /* Chipotle Red */
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 1rem;
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .chipotle-preview-forecasts .variant-container {
            border: 2px dashed #D1A46E;
            padding: 1.5rem;
            border-radius: 1rem;
            margin-bottom: 2rem;
            background-color: rgba(255, 255, 255, 0.5);
        }
         .chipotle-preview-forecasts .chart-frame {
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 6px 18px rgba(0,0,0,0.08);
            padding: 0.75rem;
            position: relative;
            overflow: hidden;
        }
        .chipotle-preview-forecasts .chart-frame img {
            border-radius: 0.25rem;
            transition: opacity 0.4s ease-in-out;
        }
        .chipotle-preview-forecasts .chart-summary {
            padding-top: 0.5rem;
            font-size: 0.8rem;
            color: #9C8FA7;
        }

        /* Variant A: Slider */
        .cpv-slider-kpi-band {
            background: #fff;
            border-radius: 0.5rem;
            padding: 0.75rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .cpv-slider-kpi-band .kpi-value {
            transition: color 0.3s ease;
        }
        .cpv-slider input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 5px;
            outline: none;
        }
        .cpv-slider input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #463863;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .cpv-slider input[type=range]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #463863;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* Variant B: Toggle */
        .cpv-toggle-btn-group button[aria-pressed="true"] {
            background-color: #463863;
            color: #fff;
        }
        .cpv-toggle .chart-frame .reveal-mask {
            position: absolute;
            top:0; left:0; bottom:0;
            width: 100%;
            background: white;
            transform-origin: left;
            transform: scaleX(1);
            transition: transform 1s cubic-bezier(0.65, 0, 0.35, 1);
        }
         .cpv-toggle .chart-frame.is-animating .reveal-mask {
             transform: scaleX(0);
         }

        /* Variant C: Mini-map */
        .cpv-minimap .minimap-container {
            background: #fff;
            padding: 0.5rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        .cpv-minimap .minimap-item {
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 0.25rem;
            transition: border-color 0.2s ease, transform 0.2s ease;
        }
        .cpv-minimap .minimap-item:hover {
            transform: scale(1.05);
        }
        .cpv-minimap .minimap-item[aria-pressed="true"] {
            border-color: #463863;
        }

    </style>
</head>
<body class="antialiased">
    
    <div id="progress-bar-container" class="fixed bottom-0 left-0 right-0 h-1.5 z-[60]">
        <div id="progress-bar" class="h-full bg-[#C58940] transition-all duration-100 ease-linear" style="width: 0%;"></div>
    </div>

    <canvas id="finance-canvas"></canvas>
    <div id="success-toast">
        <i class="fas fa-check-circle mr-2"></i> Message sent successfully! I'll get back to you soon.
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 py-4">
        <div class="container mx-auto flex justify-center items-center px-4">
            <div class="nav-container">
                <nav id="main-nav"></nav>
            </div>
        </div>
    </header>

    <main class="relative z-10">
        <!-- NOTE: Removed pt-24 from main to allow hero to be full screen -->
    </main>

    <footer class="py-6 text-center text-gray-500 relative z-10">
        <p>&copy; 2025 Bala Sravani Konakalla. All Rights Reserved.</p>
    </footer>

    <!-- Lightbox for resume and certificates -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-[100] hidden items-center justify-center p-4">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-4xl opacity-80 hover:opacity-100 transition-opacity">&times;</button>
        <img id="lightbox-img" src="" alt="Resume full view" class="max-w-full max-h-full rounded-lg shadow-2xl">
    </div>

    <!-- Floating Action Button -->
    <div id="contact-fab">
        <div class="fab-content fab-pulse">
            <i class="fab-icon fas fa-comments"></i>
            <span class="fab-text">Let's discuss</span>
        </div>
    </div>
    
    <!-- Contact Modal -->
    <div id="contact-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
             <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl transition-colors">
                <i class="fas fa-times"></i>
            </button>
            <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center" style="color: #221C2A;">Let’s talk — I’m open to new opportunities</h3>
             <form class="contact-form w-full" action="" method="POST">
                <div class="space-y-4 text-left">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;">
                    <textarea name="message" rows="4" placeholder="Your Message" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;"></textarea>
                </div>
                <div class="mt-6">
                    <button type="submit" class="btn-primary font-bold py-3 px-6 rounded-lg transition-all duration-300 w-full">
                        Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // --- DATA SOURCE ---
            const portfolioData = {
                pages: [
                    { id: 'home', label: 'Home' },
                    { id: 'experience', label: 'Experience' },
                    { id: 'projects', label: 'Projects' },
                    { id: 'education', label: 'Education' },
                    { id: 'resume', label: 'Resume' }
                ],
                home: {
                    name: "Bala Sravani Konakalla",
                    title: "Analytical Finance Professional",
                    about: "A dedicated and detail-oriented finance professional with a passion for uncovering insights from data. Eager to apply my skills in a challenging and growth-oriented environment.",
                    summary: "Expertise in credit monitoring, financial modeling, and compliance. Skilled in SAP BPC and advanced Excel, with a proven track record of optimizing workflows and ensuring regulatory compliance.",
                    imageUrl: "https://placehold.co/224x224/F5F1EA/9C8FA7?text=Upload",
                },
                 logos: {
                    tcs: 'TCS LOGO.svg.png',
                    mercedes: 'Benz Logo.svg.png',
                    gitam: 'Gitam Logo.svg.png',
                    vishnu: 'Vishnu Logo.svg.png',
                    sap: './public/logos/sap-logo.png',
                    financialModeling: './public/logos/financial-modeling-logo.png',
                    tableau: './public/logos/tableau-logo.png',
                    excel: './public/logos/excel-logo.png',
                    office: './public/logos/office-logo.png',
                    compliance: './public/logos/compliance-logo.png',
                    creditMonitoring: './public/logos/credit-monitoring-logo.png',
                    dataAnalysis: './public/logos/data-analysis-logo.png',
                    microsoft: './public/logos/microsoft-logo.png',
                    pwc: './public/logos/pwc-logo.png',
                    jpmorgan: './public/logos/jpmorgan-logo.png',
                    chipotle: './public/logos/chipotle-logo.png',
                    bloomberg: './public/logos/bloomberg-logo.png'
                },
                experiences: [
                    { 
                        type: 'job',
                        date: 'Jun 2024 - Present', 
                        title: 'Management Trainee', 
                        company: 'Tata Consultancy Services', 
                        logoUrl: 'tcs',
                        duties: [
                            'Executed Fixed Asset Runs and Role Forward using SAP BPC, ensuring 100% compliance.',
                            'Monitored cost centers and role IDs, improving process efficiency by 15%.',
                            'Resolved system discrepancies through root cause analysis to enhance data reliability.'
                        ],
                        domain: [
                            'Financial Reporting',
                            'SAP Business Planning & Consolidation',
                            'Internal Controls'
                        ]
                    },
                    { 
                        type: 'internship',
                        date: 'Jun 2023 - Jul 2023', 
                        title: 'Sales Trainee (Internship)', 
                        company: 'Silver Star Mercedes Benz', 
                        logoUrl: 'mercedes',
                        duties: [
                            'Performed credit risk assessments and analyzed financial statements.',
                            'Managed end-to-end accounts payable, enhancing vendor relationships.',
                            'Conducted detailed cost-benefit analyses for marketing campaigns.'
                        ],
                        domain: [
                            'Credit Risk Analysis',
                            'Accounts Payable Management',
                            'Financial Statement Analysis'
                        ]
                    }
                ],
                skills: [
                    { name: 'SAP BPC', logoUrl: 'sap' },
                    { name: 'Financial Modeling', logoUrl: 'financialModeling' },
                    { name: 'Tableau', logoUrl: 'tableau' },
                    { name: 'Advanced Excel', logoUrl: 'excel' },
                    { name: 'MS Office Suite', logoUrl: 'office' },
                    { name: 'Compliance', logoUrl: 'compliance' },
                    { name: 'Credit Monitoring', logoUrl: 'creditMonitoring' },
                    { name: 'Data Analysis', logoUrl: 'dataAnalysis' }
                ],
                educations: [
                    { 
                        degree: 'Masters of Business Administration', 
                        specialization: 'Finance & Marketing',
                        school: 'GITAM School of Business', 
                        location: 'Visakhapatnam',
                        date: '2022 - 2024', 
                        details: 'CGPA: 8.19',
                        logoUrl: 'gitam' 
                    },
                    { 
                        degree: 'Bachelor of Technology', 
                        specialization: 'Civil Engineering',
                        school: 'Shri Vishnu Engineering College for Women', 
                        location: 'Bhimavaram',
                        date: '2017 - 2021', 
                        details: 'CGPA: 8.29',
                        logoUrl: 'vishnu'
                    }
                ],
                certifications: [
                    { 
                        title: 'Microsoft 365 Fundamentals', issuer: 'Microsoft (Coursera)', 
                        logoUrl: 'microsoft', issueDate: 'Apr 2023',
                        skills: ['Cloud Computing', 'MS Office 365', 'Collaboration Tools'], category: 'Systems',
                        certificateImageUrl: './public/certificates/MS-365-Cert.png'
                    },
                    { 
                        title: 'Financial Modeling & Valuation Analyst (FMVA)', issuer: 'Corporate Finance Institute (CFI)',
                        logoUrl: 'financialModeling', issueDate: 'Jun 2025',
                        skills: ['Financial Modeling', 'Valuation', 'Excel', 'Corporate Finance'], category: 'Finance',
                        certificateImageUrl: './public/certificates/FMVA-Cert.png'
                    },
                    { 
                        title: 'Bloomberg Market Concepts', issuer: 'Bloomberg',
                        logoUrl: 'bloomberg', issueDate: 'Sep 2025',
                        skills: ['Market Concepts', 'Economic Indicators', 'Currencies', 'Fixed Income', 'Equities'], category: 'Finance',
                        certificateImageUrl: './public/certificates/Bloomberg-Cert.png'
                    }
                ],
                contact: {
                    email: 'sravikonakalla@gmail.com',
                    linkedin: 'https://linkedin.com/in/kbalasravani',
                    formspree_url: 'https://formspree.io/f/your_unique_id'
                },
                chipotleProject: {
                    dashboardData: {
                        valuationRange: "$2800 – $3200",
                        impliedUpside: "+8%",
                        wacc: "7.5%",
                        terminalGrowth: "3.0%"
                    }
                }
            };
            
            const getLogoUrl = (key) => portfolioData.logos[key] || `https://placehold.co/60x60/FFFFFF/463863?text=Logo`;


            const mainContainer = document.querySelector('main');
            const navContainer = document.getElementById('main-nav');

            const showPage = (pageId) => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                const newPage = document.getElementById(`page-${pageId}`);
                if (newPage) {
                    newPage.classList.add('active');
                    if (pageId === 'projects') {
                        setTimeout(() => {
                            setupProjectPage();
                        }, 50);
                    }
                    if (pageId === 'experience') {
                        setTimeout(setupExperiencePage, 50);
                    }
                }
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.pageId === pageId) {
                        link.classList.add('active');
                        link.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                    }
                });
                // Do not scroll to top for home page to preserve parallax scroll position
                if (pageId !== 'home') {
                    window.scrollTo(0, 0);
                }
                handleScrollAnimations(); 
            };

            portfolioData.pages.forEach(page => {
                const link = document.createElement('a');
                link.className = 'nav-link';
                if (page.id === 'home') link.classList.add('active');
                link.textContent = page.label;
                link.dataset.pageId = page.id;
                link.onclick = () => showPage(page.id);
                navContainer.appendChild(link);
            });
            
            const createHomePage = () => {
                const page = document.createElement('div');
                page.id = 'page-home';
                page.className = 'page active';

                const parallaxBanners = [
                    { 
                        id: 'experience', 
                        title: 'Work Experience', 
                        lines: [
                            'Hands-on experience across management, sales, and financial analysis roles.',
                            'Developing expertise through progressive responsibilities and real-world problem-solving.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'experience'
                    },
                    { 
                        id: 'education', 
                        title: 'Academic Background', 
                        lines: [
                            'Academic foundation in business and technology, strengthened by an MBA.',
                            'Blending quantitative skills with strategic thinking.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'education'
                    },
                    { 
                        id: 'projects', 
                        title: 'Key Projects', 
                        lines: [
                            'Real-time financial modeling and valuation projects, including Chipotle Mexican Grill FMVA® analysis.',
                            'Transforming theory into practical, data-driven insights.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'projects'
                    },
                    { 
                        id: 'resume', 
                        title: 'Resume', 
                        lines: [
                            'Certified in financial modeling and valuation, continuously upskilling in finance.',
                            'Explore my resume to see detailed experience and qualifications.'
                        ],
                         bg: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?q=80&w=1920&auto-format&fit=crop',
                        buttonPageId: 'resume'
                    }
                ];

                const parallaxBannersHTML = parallaxBanners.map(section => `
                    <div class="parallax-banner" style="background-image: url('${section.bg}')">
                        <div class="parallax-overlay"></div>
                        <div class="parallax-content p-8">
                            <h2 class="text-3xl md:text-4xl font-bold mb-4">${section.title}</h2>
                            <div class="max-w-2xl mx-auto mb-6 space-y-2 text-base md:text-lg text-center md:text-left">
                                <p>${section.lines[0]}</p>
                                <p>${section.lines[1]}</p>
                            </div>
                            <button onclick="document.getElementById('main-nav').querySelector('[data-page-id=${section.buttonPageId}]').click()" class="explore-btn font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-2" aria-label="Explore ${section.title}">
                                Explore <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <div class="min-h-screen flex flex-col relative">
                        <section class="flex-grow flex items-center pt-40 pb-16">
                            <div class="container mx-auto px-6">
                               <div class="grid md:grid-cols-10 gap-8 items-center">
                                    <div class="md:col-span-3 flex justify-center md:justify-end">
                                        <div id="profile-image-container" class="relative profile-image-placeholder w-40 h-40 md:w-56 md:h-56">
                                            <img id="profile-image" src="${portfolioData.home.imageUrl}" alt="Profile image placeholder" class="rounded-full w-full h-full object-cover border-4 border-white/50">
                                            <div class="absolute inset-0 bg-black/30 rounded-full flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity cursor-pointer">
                                                <div class="text-center text-white">
                                                    <i class="fas fa-camera text-2xl"></i>
                                                    <p class="text-sm font-semibold">Upload Image</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="md:col-span-7 text-center md:text-left">
                                        <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight" style="color: #221C2A;">${portfolioData.home.name}</h1>
                                        <h2 class="text-2xl md:text-3xl mb-4" style="color: #463863;">${portfolioData.home.title}</h2>
                                        <p class="text-lg" style="color: #9C8FA7;">${portfolioData.home.about}</p>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="pb-16 md:pb-24">
                            <div class="container mx-auto px-6 text-center">
                                <h3 class="text-3xl md:text-4xl font-bold mb-6" style="color: #221C2A;">Profile Summary</h3>
                                <p class="text-lg md:text-xl max-w-4xl mx-auto leading-relaxed" style="color: #463863;">${portfolioData.home.summary}</p>
                            </div>
                        </section>
                    </div>
                    
                    <!-- Redesigned Parallax Section -->
                    <div class="bg-gray-800 relative z-10">
                        ${parallaxBannersHTML}
                    </div>
                `;
                mainContainer.appendChild(page);
            };

            const createExperiencePage = () => {
                const page = document.createElement('div');
                page.id = 'page-experience';
                page.className = 'page';
                
                const experiencesHTML = portfolioData.experiences.map(exp => {
                    const iconClass = exp.type === 'job' ? 'fa-briefcase' : 'fa-user-graduate';
                    return `
                    <div class="timeline-item-container">
                        <div class="timeline-content-wrapper">
                            <div class="bg-white p-6 rounded-xl shadow-md card-effect">
                                <div class="flex items-start gap-4">
                                    <div class="logo-holder !w-14 !h-14">
                                        <img src="${getLogoUrl(exp.logoUrl)}" alt="${exp.company} Logo">
                                    </div>
                                    <div class="flex-grow">
                                        <div class="flex justify-between items-center">
                                            <h3 class="text-xl font-bold text-gray-900">${exp.title}</h3>
                                            <i class="fas ${iconClass} text-gray-400 hidden md:block"></i>
                                        </div>
                                        <p class="font-semibold" style="color: #463863;">${exp.company}</p>
                                        <p class="text-sm text-gray-500 mt-1">${exp.date}</p>
                                    </div>
                                </div>
                                <div class="timeline-details">
                                    <div class="border-t border-gray-200 my-4"></div>
                                    <h4 class="font-bold mb-2">Responsibilities:</h4>
                                    <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                        ${exp.duties.map(duty => `<li>${duty}</li>`).join('')}
                                    </ul>
                                    <h4 class="font-bold mt-4 mb-2">Domain Expertise:</h4>
                                    <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                        ${exp.domain.map(d => `<li>${d}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `}).join('');

                const skillsHTML = portfolioData.skills.map(skill => `
                    <div class="p-4 rounded-lg card-effect flex flex-col items-center justify-center gap-4 text-center h-full">
                        <div class="skill-logo-holder">
                            <img src="${getLogoUrl(skill.logoUrl)}" alt="${skill.name} Logo" onerror="this.src='https://placehold.co/48x48/FFFFFF/463863?text=Icon'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <p class="text-sm font-semibold" style="color: #221C2A;">${skill.name}</p>
                    </div>`).join('');

                page.innerHTML = `
                    <section class="pt-28 pb-16">
                        <div class="container mx-auto px-6">
                            <h3 class="text-3xl md:text-4xl font-bold text-center mb-16" style="color: #221C2A;">Work Experience</h3>
                            <div class="experience-timeline">
                                ${experiencesHTML}
                            </div>
                            <div class="text-center mt-16">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Technical Skills</h3>
                                <div class="max-w-4xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-4">${skillsHTML}</div>
                            </div>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            };

            const createEducationPage = () => {
                const page = document.createElement('div');
                page.id = 'page-education';
                page.className = 'page';

                const educationCardsHTML = portfolioData.educations.map(edu => `
                    <div class="education-card bg-white rounded-2xl flex overflow-hidden w-full max-w-2xl mx-auto">
                        <div class="logo-holder">
                            <img src="${getLogoUrl(edu.logoUrl)}" alt="${edu.school} Logo" onerror="this.src='https://placehold.co/120x120/FFFFFF/463863?text=Logo'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <div class="py-6 pr-6 pl-8 relative flex-grow">
                            <h4 class="text-xl font-bold" style="color: #221C2A;">${edu.degree}</h4>
                            <p class="font-semibold text-md mb-1" style="color: #463863;">${edu.specialization}</p>
                            <p class="text-sm" style="color: #9C8FA7;">${edu.school}, ${edu.location}</p>
                            <p class="text-sm font-medium" style="color: #D1A46E;">${edu.date}</p>
                            <div class="absolute bottom-6 right-6">
                                <span class="cgpa-badge">${edu.details}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                const accordionHTML = portfolioData.certifications.map(cert => `
                    <div class="accordion-item">
                        <button class="accordion-header">
                            <div class="flex items-center gap-4">
                                <div class="logo-holder w-10 h-10 text-sm">
                                    <img src="${getLogoUrl(cert.logoUrl)}" alt="${cert.issuer} Logo">
                                </div>
                                <span>${cert.title}</span>
                            </div>
                            <i class="fas fa-plus icon"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="accordion-content-inner grid md:grid-cols-3 gap-6 items-center">
                                <div class="md:col-span-1">
                                    <img src="${cert.certificateImageUrl}" alt="${cert.title} certificate" class="rounded-lg shadow-lg w-full cursor-pointer" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x250/FFFFFF/463863?text=Cert';">
                                </div>
                                <div class="md:col-span-2">
                                    <h5 class="font-bold text-lg mb-2" style="color: #463863;">${cert.issuer}</h5>
                                    <p class="text-sm text-gray-500 mb-4">Issued: ${cert.issueDate}</p>
                                    <h6 class="font-semibold mb-2">Skills Covered:</h6>
                                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                                        ${cert.skills.map(skill => `<li>${skill}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <section class="pt-28 pb-16">
                        <div class="container mx-auto px-6">
                            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Academic Background</h3>
                            <div class="space-y-8">
                                ${educationCardsHTML}
                            </div>
                            
                            <div class="cert-section mt-20">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Certifications</h3>
                                <div class="max-w-4xl mx-auto">
                                    ${accordionHTML}
                                </div>
                            </div>
                        </div>
                    </section>
                    `;
                mainContainer.appendChild(page);
            };

            const createResumePage = () => {
                const page = document.createElement('div');
                page.id = 'page-resume';
                page.className = 'page';

                const getLastSunday = () => {
                    const today = new Date();
                    const dayOfWeek = today.getDay(); // Sunday is 0, Monday is 1, ...
                    const lastSunday = new Date(today);
                    lastSunday.setDate(today.getDate() - dayOfWeek);
                    return lastSunday.toLocaleDateString('en-US', {
                        month: 'long', day: 'numeric', year: 'numeric'
                    });
                };

                page.innerHTML = `
                    <section class="pt-28 pb-16 min-h-[90vh] flex items-center">
                        <div class="container mx-auto px-4 text-center max-w-4xl">
                            <h2 class="text-3xl md:text-4xl font-bold mb-2" style="color: #221C2A;">Resume</h2>
                            <p class="max-w-xl mx-auto mb-8" style="color: #9C8FA7;">Preview my resume below or download the PDF version.</p>

                            <div id="resume-viewer" class="relative bg-white rounded-2xl shadow-lg p-2 md:p-4">
                                <div class="overflow-auto rounded-lg" style="height: 70vh;">
                                    <img src="https://placehold.co/827x1169/ffffff/221C2A?text=Resume+Preview" alt="Preview of Bala Sravani Konakalla’s Resume" class="w-full h-auto mx-auto cursor-pointer hover:opacity-90 transition-opacity" onclick="openLightbox(this.src)">
                                </div>
                            </div>

                            <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
                                 <a href="./Bala_Sravani_Konakalla_Resume.pdf" download="Bala_Sravani_Konakalla_Resume.pdf" class="btn-primary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="Download Resume PDF">
                                    <i class="fas fa-download"></i> Download PDF
                                </a>
                                <a href="https://linkedin.com/in/kbalasravani" target="_blank" class="btn-secondary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="View on LinkedIn">
                                    <i class="fab fa-linkedin"></i> View on LinkedIn
                                </a>
                            </div>

                            <p id="resume-update-date" class="text-xs text-gray-400 mt-4">Last Updated on ${getLastSunday()}</p>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            };
            
            const createProjectsPage = () => {
                const page = document.createElement('div');
                page.id = 'page-projects';
                page.className = 'page';

                const timelineSteps = [
                    {icon: 'fa-search-dollar', label: 'Company & Industry Research', details: 'Analyzed 10-K filings, investor calls, and industry reports to understand CMG\'s business model, competitive landscape, and macro trends.'},
                    {icon: 'fa-history', label: 'Historical Financials Analysis', details: 'Deconstructed revenue by segment and geography. Analyzed margin evolution, unit economics, and historical performance trends.'},
                    {icon: 'fa-bullseye', label: 'Forecasting & Assumptions', details: 'Built granular drivers for key metrics like same-store sales and new store growth. Projected costs based on historical trends and management guidance.'},
                    {icon: 'fa-file-invoice-dollar', label: '3-Statement Model', details: 'Constructed a fully integrated model linking the Income Statement, Balance Sheet, and Cash Flow statement. Ensured model integrity with balance checks.'},
                    {icon: 'fa-balance-scale', label: 'Valuation (DCF, Multiples)', details: 'Performed a Discounted Cash Flow (DCF) analysis using the Free Cash Flow to Firm (FCFF) method. Calibrated WACC and conducted trading comparables analysis.'},
                    {icon: 'fa-lightbulb', label: 'Final Insights & Conclusion', details: 'Derived the intrinsic value range for CMG. Performed sensitivity and scenario analysis to identify key value drivers, risks, and form a final investment thesis.'}
                ];

                page.innerHTML = `
                <!-- 1. Project Header Section -->
                <div id="project-header" class="project-section-fade-in relative overflow-hidden">
                    <div class="absolute inset-0 z-0">
                        <svg class="absolute bottom-0 right-0 h-1/2 w-1/2 text-gray-500 opacity-[0.03]" fill="currentColor" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path d="M512 597.995c-113.003 0-204.8-91.797-204.8-204.8s91.797-204.8 204.8-204.8 204.8 91.797 204.8 204.8-91.797 204.8-204.8 204.8zM512 256c-79.508 0-144.37 64.862-144.37 144.37s64.862 144.37 144.37 144.37 144.37-64.862 144.37-144.37-64.862-144.37-144.37-144.37z"/><path d="M512 1024c-282.77 0-512-229.23-512-512s229.23-512 512-512 512 229.23 512 512-229.23 512-512 512zM512 61.44C264.604 61.44 61.44 264.604 61.44 512s203.164 450.56 450.56 450.56 450.56-203.164 450.56-450.56-203.164-450.56-450.56-450.56z"/><path d="M961.075 613.99c-30.822-1.946-59.597-10.138-85.3-23.757l-2.048-1.229c-10.138-6.042-19.866-12.7-28.979-20.07-8.806-6.963-16.896-14.541-24.166-22.733-1.434-1.638-2.867-3.277-4.301-4.915-28.365-32.358-49.152-70.554-59.802-112.947-3.277-13.005-5.325-26.317-6.554-39.834-0.614-10.138-0.614-20.378-0.205-30.515 1.536-25.805 6.758-50.995 15.36-74.957 14.848-41.472 40.55-78.131 74.547-107.008 33.382-28.365 73.626-47.309 117.555-55.296 5.837-1.024 11.674-1.843 17.613-2.458 35.84-3.79 72.192-0.307 106.803 10.138 34.099 10.24 65.638 27.238 93.39 49.971 2.867 2.355 5.632 4.813 8.397 7.27 34.816 30.618 60.006 70.144 72.909 114.176 15.36 52.634 15.053 108.954-0.819 161.792-12.902 43.11-37.376 81.92-69.837 114.176-32.051 31.846-70.963 56.525-114.074 71.373-35.635 12.288-73.421 18.227-111.821 17.408-10.138-0.205-20.275-0.819-30.31-1.843z"/></svg>
                    </div>
                    <div class="container mx-auto max-w-screen-xl px-6 md:px-8 py-10 md:py-16 relative z-10">
                        <div class="grid md:grid-cols-5 gap-8 md:gap-12 items-center">
                            <div class="md:col-span-2 text-center md:text-left">
                                <div class="flex justify-center md:justify-start mb-6">
                                    <div class="w-24 h-24 bg-white rounded-full p-2 chipotle-logo-glow flex items-center justify-center">
                                        <img src="${getLogoUrl('chipotle')}" alt="Chipotle Company Logo" class="rounded-full" onerror="this.src='https://placehold.co/96x96/FFFFFF/AD2F1F?text=CMG'">
                                    </div>
                                </div>
                                <h1 class="text-2xl md:text-4xl font-extrabold text-gray-900 leading-tight">Chipotle Mexican Grill Financial Modeling & Valuation</h1>
                                <h2 class="text-lg md:text-xl font-semibold text-gray-600 mt-2">Chipotle Mexican Grill, Inc. (NYSE: CMG)</h2>
                                <div class="flex flex-wrap justify-center md:justify-start gap-2 mt-6">
                                    <span class="bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full">FMVA® Techniques</span>
                                    <span class="bg-red-100 text-red-800 text-xs font-semibold px-3 py-1 rounded-full">Scenario Analysis</span>
                                </div>
                            </div>
                            <div class="md:col-span-3">
                                <div class="bg-white/70 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-gray-200">
                                    <h3 class="font-bold text-lg mb-2 text-gray-800">About the Company</h3>
                                    <p class="text-gray-600 text-sm leading-relaxed mb-6">
                                        Chipotle Mexican Grill is an American chain of fast-casual restaurants specializing in Mission burritos and tacos. Revenue is driven by high-volume sales in company-operated stores, with a focus on fresh ingredients and a customizable menu. Key growth levers include digital sales, new restaurant openings, and menu innovation.
                                    </p>
                                    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 text-center">
                                        <div><p class="font-bold text-gray-800">Analysis</p><p class="text-xs text-gray-500">Sep 2025</p></div>
                                        <div><p class="font-bold text-gray-800">Historical Years</p><p class="text-xs text-gray-500">2021 - 2024</p></div>
                                        <div><p class="font-bold text-gray-800">Forecast Years</p><p class="text-xs text-gray-500">2025 - 2028</p></div>
                                        <div><p class="font-bold text-gray-800">Sources</p><p class="text-xs text-gray-500">10-K filings</p></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                         <div class="w-full border-t border-gray-300/60 my-8 md:my-12"></div>
                         <div class="flex flex-wrap justify-center md:justify-start items-center gap-4">
                            <a href="#" aria-label="Download Financial Model" class="btn-primary font-bold py-3 px-6 rounded-lg inline-flex items-center gap-2">
                                <i class="fas fa-download"></i> Download Model
                            </a>
                            <a href="#" aria-label="View project on GitHub" class="btn-icon text-2xl"><i class="fab fa-github"></i></a>
                        </div>
                    </div>
                </div>

                <!-- Historical Analysis Section -->
                <section class="historical-analysis-section py-12 md:py-16 bg-white/50 project-section-fade-in">
                     <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-8">
                             <h2 class="text-3xl md:text-4xl font-bold">Historical Analysis</h2>
                             <p class="mt-2 text-gray-600 max-w-3xl mx-auto">An interactive view of financial performance and store expansion metrics.</p>
                        </div>
                        <div class="grid md:grid-cols-12 gap-6 md:gap-8">
                            <!-- Nav -->
                            <div class="md:col-span-2 historical-analysis-nav flex md:flex-col gap-4">
                                <button class="mini-card-toggle text-left p-3 rounded-lg w-40 md:w-full" data-view="financials" aria-pressed="true">
                                    <h4 class="font-bold text-sm">Financials</h4>
                                    <p class="text-xs text-gray-500">Revenue & Profit</p>
                                </button>
                                <button class="mini-card-toggle text-left p-3 rounded-lg w-40 md:w-full" data-view="stores" aria-pressed="false">
                                    <h4 class="font-bold text-sm">Stores vs SSS</h4>
                                    <p class="text-xs text-gray-500">Units & Comps</p>
                                </button>
                            </div>
                            <!-- Chart -->
                            <div class="md:col-span-6">
                                <div class="chart-frame">
                                    <img id="historical-analysis-img" src="./assets/chipotle_hist_financials@2x.png" width="1280" height="720" loading="lazy" alt="Historical financials: Revenue and Net Income, 2018–2024. Key takeaway: revenue grew at [HIST_REVENUE_CAGR]% CAGR.">
                                </div>
                            </div>
                            <!-- Interpretation -->
                            <div id="historical-analysis-interp" class="md:col-span-4">
                                <h3 class="font-bold text-lg mb-2">Financial Performance</h3>
                                <p class="chart-summary font-semibold text-gray-700 text-sm mb-3">Key takeaway: Revenue grew at [HIST_REVENUE_CAGR]% CAGR (2018–2024). The chart shows a COVID-related dip in 2020 followed by digital-led recovery.</p>
                                <ul class="list-disc list-inside space-y-1 text-xs text-gray-600">
                                    <li>Digital sales were a primary recovery driver post-2020.</li>
                                    <li>Margin pressure from commodity inflation became evident in 2022.</li>
                                    <li>Store-level profitability remains strong despite cost headwinds.</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- NEW: Forecast Previews Section -->
                <section class="chipotle-preview-forecasts py-12 md:py-16 project-section-fade-in">
                     <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-12">
                             <h2 class="text-3xl md:text-4xl font-bold">Forecast Previews — Bull / Base / Bear (2025–2028)</h2>
                             <p class="mt-2 text-gray-600 max-w-3xl mx-auto">Below are three preview layout options for presenting the forecast scenarios. These are preview variants only — pick one to keep. No other site parts were modified.</p>
                        </div>

                        <!-- Variant A: Scenario Slider -->
                        <div class="variant-container cpv-slider">
                            <div class="preview-badge">Preview — Option A: Scenario Slider with Dynamic KPI Band</div>
                            <div class="cpv-slider-kpi-band mb-4 grid grid-cols-2 md:grid-cols-3 gap-4 text-center">
                                <div>
                                    <p class="text-xs text-gray-500">Implied Price</p>
                                    <p id="kpi-price" class="font-bold text-xl md:text-2xl text-gray-800 kpi-value">$3150</p>
                                </div>
                                <div>
                                    <p class="text-xs text-gray-500">Revenue CAGR</p>
                                    <p id="kpi-cagr" class="font-bold text-xl md:text-2xl text-gray-800 kpi-value">13.5%</p>
                                </div>
                                <div class="col-span-2 md:col-span-1">
                                    <p class="text-xs text-gray-500">2028 EPS</p>
                                    <p id="kpi-eps" class="font-bold text-xl md:text-2xl text-gray-800 kpi-value">$112.50</p>
                                </div>
                            </div>
                            <div class="chart-frame mb-4">
                                <img id="slider-chart-img" src="./assets/chipotle_forecast_revenue_base@2x.png" width="1280" height="720" loading="lazy" alt="Forecast — Net revenue (Base scenario), 2025–2028.">
                            </div>
                            <div class="flex justify-between text-xs font-bold text-gray-500 mb-2 px-1">
                                <span>Bear</span>
                                <span>Base</span>
                                <span>Bull</span>
                            </div>
                            <input id="scenario-slider" type="range" min="0" max="2" value="1" step="1" class="w-full">
                            <div id="slider-interp" class="mt-4 text-sm" aria-live="polite">
                                <p class="chart-summary font-semibold text-gray-700 mb-2"><strong>Base Scenario:</strong> Assumes continued strong SSS growth and moderate margin expansion.</p>
                                <ul class="list-disc list-inside space-y-1 text-xs text-gray-600">
                                    <li>Store growth continues at ~250 new units per year.</li>
                                    <li>Digital sales mix remains elevated above 40%.</li>
                                    <li>Commodity inflation moderates but labor costs remain a headwind.</li>
                                </ul>
                            </div>
                        </div>

                        <!-- Variant B: Toggle + Timeline Animation -->
                        <div class="variant-container cpv-toggle">
                             <div class="preview-badge">Preview — Option B: Toggle + Timeline Animation</div>
                             <div class="grid md:grid-cols-12 gap-6">
                                <div class="md:col-span-3">
                                    <div class="cpv-toggle-btn-group flex md:flex-col gap-2">
                                        <button data-scenario="bear" class="btn-secondary w-full text-sm py-2">Bear — Downside</button>
                                        <button data-scenario="base" class="btn-secondary w-full text-sm py-2" aria-pressed="true">Base — Central</button>
                                        <button data-scenario="bull" class="btn-secondary w-full text-sm py-2">Bull — Upside</button>
                                    </div>
                                    <div class="text-right mt-4">
                                        <label class="text-xs text-gray-500 flex items-center justify-end"><input type="checkbox" id="animation-toggle" class="mr-2" checked>Enable Animation</label>
                                    </div>
                                </div>
                                <div class="md:col-span-9">
                                     <div class="chart-frame">
                                        <img id="toggle-chart-img" src="./assets/chipotle_forecast_revenue_base@2x.png" width="1280" height="720" loading="lazy" alt="Forecast — Net revenue (Base scenario), 2025–2028.">
                                        <div class="reveal-mask"></div>
                                     </div>
                                     <div id="toggle-interp" class="mt-2 text-sm" aria-live="polite">
                                        <p class="chart-summary font-semibold text-gray-700"><strong>Base Scenario:</strong> Continued strong SSS growth and moderate margin expansion.</p>
                                     </div>
                                </div>
                             </div>
                        </div>
                        
                        <!-- Variant C: Mini-Map + Focus View -->
                        <div class="variant-container cpv-minimap">
                            <div class="preview-badge">Preview — Option C: Mini-Map + Focus View</div>
                            <div class="grid md:grid-cols-12 gap-6">
                                <div class="md:col-span-3">
                                    <h4 class="font-bold mb-2">Scenario Mini-Map</h4>
                                    <div class="minimap-container flex md:flex-col gap-2">
                                        <div class="minimap-item p-1" data-scenario="bear" aria-pressed="false">
                                            <img src="./assets/chipotle_forecast_revenue_bear@2x.png" loading="lazy" class="w-full h-auto" alt="Bear Scenario Thumbnail">
                                            <p class="text-xs font-semibold text-center mt-1">Bear</p>
                                        </div>
                                        <div class="minimap-item p-1" data-scenario="base" aria-pressed="true">
                                            <img src="./assets/chipotle_forecast_revenue_base@2x.png" loading="lazy" class="w-full h-auto" alt="Base Scenario Thumbnail">
                                            <p class="text-xs font-semibold text-center mt-1">Base</p>
                                        </div>
                                         <div class="minimap-item p-1" data-scenario="bull" aria-pressed="false">
                                            <img src="./assets/chipotle_forecast_revenue_bull@2x.png" loading="lazy" class="w-full h-auto" alt="Bull Scenario Thumbnail">
                                            <p class="text-xs font-semibold text-center mt-1">Bull</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="md:col-span-9">
                                    <h4 class="font-bold mb-2">Focus View</h4>
                                    <div class="chart-frame">
                                        <img id="minimap-chart-img" src="./assets/chipotle_forecast_revenue_base@2x.png" width="1280" height="720" loading="lazy" alt="Forecast — Net revenue (Base scenario), 2025–2028.">
                                    </div>
                                    <div id="minimap-interp" class="mt-2 text-sm" aria-live="polite">
                                        <p class="chart-summary font-semibold text-gray-700"><strong>Base Scenario:</strong> Continued strong SSS growth and moderate margin expansion.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-8 pt-8 border-t border-gray-300/60">
                             <h3 class="text-xl font-bold mb-4">Download Full Forecast</h3>
                             <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                                <a href="#" class="btn-primary w-full sm:w-auto font-bold py-3 px-6 rounded-lg inline-flex items-center justify-center gap-2">
                                    <i class="fas fa-file-pdf"></i> Download Report (PDF)
                                </a>
                                <a href="#" class="btn-secondary w-full sm:w-auto font-bold py-3 px-6 rounded-lg inline-flex items-center justify-center gap-2">
                                    <i class="fas fa-file-csv"></i> Download Data (CSV)
                                </a>
                            </div>
                        </div>

                    </div>
                </section>

                <!-- Interactive Timeline Section -->
                <section id="timeline" class="py-12 md:py-20 bg-white project-section-fade-in">
                    <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl md:text-4xl font-bold">Project Methodology</h2>
                            <p class="mt-2 text-gray-600 max-w-2xl mx-auto">This project follows a structured FMVA® process. Click on each step to see details.</p>
                        </div>
                        
                        <div class="space-y-4">
                        ${timelineSteps.map((item, index) => `
                            <div class="timeline-accordion-item bg-white rounded-lg shadow-sm">
                                <button class="w-full p-4 text-left flex justify-between items-center transition hover:bg-gray-50">
                                    <span class="font-semibold text-lg flex items-center">
                                        <i class="fas ${item.icon} text-[#463863] w-8 text-center mr-4"></i>
                                        Step ${index + 1}: ${item.label}
                                    </span>
                                    <i class="fas fa-chevron-down accordion-icon transition-transform"></i>
                                </button>
                                <div class="timeline-details bg-gray-50 text-gray-600 rounded-b-lg">
                                    <p>${item.details}</p>
                                </div>
                            </div>
                        `).join('')}
                        </div>
                    </div>
                </section>

                <!-- 3. Dashboard View Section -->
                <section id="dashboard" class="py-12 md:py-20 project-section-fade-in">
                    <div class="container mx-auto max-w-screen-xl px-6 md:px-8">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl md:text-4xl font-bold">Project Dashboard - Key Results</h2>
                            <p class="mt-2 text-gray-600">A visual-first summary of valuation outcomes, forecasts, and scenario analysis.</p>
                        </div>
                        
                        <!-- Part 1: Top Highlight Row -->
                        <div class="bg-white rounded-xl shadow-lg p-6 grid grid-cols-2 md:grid-cols-4 gap-4 text-center mb-8">
                            <div>
                                <p class="text-2xl md:text-3xl font-bold text-[#463863]">[Upload Value]</p>
                                <p class="text-sm font-semibold text-gray-500">2028 Net Revenues Forecast</p>
                                <p class="text-xs text-gray-400 mt-1">Projected Revenues by 2028</p>
                            </div>
                            <div>
                                <p class="text-2xl md:text-3xl font-bold text-green-600">[Upload Range]</p>
                                <p class="text-sm font-semibold text-gray-500">Implied Share Price Range</p>
                                 <p class="text-xs text-gray-400 mt-1">Scenario-based valuation outcomes</p>
                            </div>
                            <div>
                                <p class="text-2xl md:text-3xl font-bold text-[#463863]">[Upload CAGR]</p>
                                <p class="text-sm font-semibold text-gray-500">SSS Growth CAGR (25-28)</p>
                                <p class="text-xs text-gray-400 mt-1">Sustained growth in comparable sales</p>
                            </div>
                            <div>
                                <p class="text-2xl md:text-3xl font-bold text-[#463863]">[Upload CAGR]</p>
                                <p class="text-sm font-semibold text-gray-500">Store Growth CAGR (25-28)</p>
                                <p class="text-xs text-gray-400 mt-1">Expansion in restaurant count</p>
                            </div>
                        </div>

                        <!-- Part 2: Five Analysis Boxes -->
                        <div>
                            <!-- Row 1: Historical Context -->
                            <div class="grid md:grid-cols-2 gap-8">
                                <div class="bg-white p-6 rounded-xl shadow-lg">
                                    <h3 class="font-bold text-lg mb-2">Historical Financial Performance</h3>
                                    <div class="w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center bg-gray-50 mb-3">
                                        <i class="fas fa-upload text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-xs text-gray-500">Graph 1: Revenues, Op Income, Net Income</p>
                                    </div>
                                    <p class="text-sm text-gray-600">Chipotle has delivered consistent revenue growth alongside improving margins and net income, reflecting strong operating leverage.</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-lg">
                                    <h3 class="font-bold text-lg mb-2">Store Expansion vs Same-Store Sales</h3>
                                    <div class="w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center bg-gray-50 mb-3">
                                         <i class="fas fa-upload text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-xs text-gray-500">Graph 2: Store Expansion vs SSS</p>
                                    </div>
                                    <p class="text-sm text-gray-600">Expansion in store count has complemented steady same-store sales, highlighting the dual drivers of Chipotle’s growth.</p>
                                </div>
                            </div>
                            <!-- Row 2: Forward Forecasts -->
                            <div class="grid md:grid-cols-3 gap-8 mt-8">
                               <div class="bg-white p-6 rounded-xl shadow-lg">
                                    <h3 class="font-bold text-lg mb-2">Bull Case Forecast</h3>
                                    <div class="w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center bg-gray-50 mb-3">
                                         <i class="fas fa-upload text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-xs text-gray-500">Graph: Bull Case Forecast</p>
                                    </div>
                                    <p class="text-sm text-gray-600">In the Bull case, accelerated store expansion and stronger same-store sales drive higher revenues and valuations.</p>
                                </div>
                                <div class="bg-white p-6 rounded-xl shadow-lg">
                                    <h3 class="font-bold text-lg mb-2">Base Case Forecast</h3>
                                    <div class="w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center bg-gray-50 mb-3">
                                         <i class="fas fa-upload text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-xs text-gray-500">Graph: Base Case Forecast</p>
                                    </div>
                                    <p class="text-sm text-gray-600">The Base case reflects a balanced trajectory with sustainable growth in revenues and a moderate valuation outlook.</p>
                                </div>
                                 <div class="bg-white p-6 rounded-xl shadow-lg">
                                    <h3 class="font-bold text-lg mb-2">Bear Case Forecast</h3>
                                    <div class="w-full h-48 border-2 border-dashed border-gray-300 rounded-lg flex flex-col items-center justify-center bg-gray-50 mb-3">
                                         <i class="fas fa-upload text-2xl text-gray-400 mb-2"></i>
                                        <p class="text-xs text-gray-500">Graph: Bear Case Forecast</p>
                                    </div>
                                    <p class="text-sm text-gray-600">In the Bear case, slower store expansion and weaker sales result in downside risks to revenues and valuations.</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </section>
                
                <!-- 4. Case Study Section -->
                <section id="case-study" class="py-12 md:py-20 bg-white project-section-fade-in">
                    <div class="container mx-auto max-w-4xl px-6 md:px-8">
                        <div class="text-center mb-12">
                            <h2 class="text-3xl md:text-4xl font-bold">Case Study – Chipotle Mexican Grill FMVA® Project</h2>
                            <p class="mt-2 text-gray-600">A detailed walkthrough of the project's objective, process, and conclusions.</p>
                        </div>
                        <article class="space-y-8">
                            <div>
                                <h3 class="text-xl font-bold">Objective</h3>
                                <p class="text-gray-700 mt-2 leading-relaxed">Apply FMVA®-level modeling and valuation techniques to assess Chipotle's intrinsic value, validate key performance drivers, and communicate a clear, data-driven investment narrative.</p>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">Methodology</h3>
                                <p class="text-gray-700 mt-2 leading-relaxed">The project was executed in a sequential manner, ensuring a logical flow from data gathering to final analysis:</p>
                                <ul class="list-disc list-inside text-gray-700 space-y-2 mt-2">
                                    <li><strong>Research & Historicals:</strong> Began with a deep dive into SEC filings and industry reports to build a solid foundation.</li>
                                    <li><strong>Forecasting:</strong> Developed a granular forecast model based on key drivers like store growth, same-store sales, and margin assumptions.</li>
                                    <li><strong>3-Statement Integration:</strong> Constructed a fully integrated financial model linking the income statement, balance sheet, and cash flow statement.</li>
                                    <li><strong>Valuation:</strong> Performed a Discounted Cash Flow (DCF) analysis using the Free Cash Flow to Firm (FCFF) method and corroborated findings with a trading comparables analysis.</li>
                                    <li><strong>Sensitivities & Scenarios:</strong> Concluded with scenario modeling (Base, Bull, Bear) and sensitivity analysis to stress-test assumptions and identify key risks.</li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-xl font-bold">Key Insights</h3>
                                <ul class="list-disc list-inside text-gray-700 space-y-2 mt-2">
                                     <li>The base-case DCF analysis indicates an intrinsic value range of <strong>$2800–$3200 per share</strong>, suggesting the stock is fairly valued at current levels.</li>
                                    <li>Upside potential is primarily driven by strong digital sales growth, successful 'Chipotlane' drive-thru implementation, and effective menu price increases.</li>
                                    <li>Key risks include rising food and labor costs, supply chain vulnerabilities for fresh ingredients, and intense competition in the fast-casual dining sector.</li>
                                </ul>
                            </div>
                            <div class="w-full border-t border-gray-200 pt-8 mt-8 flex flex-wrap justify-center items-center gap-4">
                                <a href="#" aria-label="Download Full Financial Model" class="btn-primary font-bold py-3 px-6 rounded-lg inline-flex items-center gap-2"><i class="fas fa-file-excel"></i> Download Full Model</a>
                                <a href="#" aria-label="Contact me about this project" class="btn-secondary font-bold py-3 px-6 rounded-lg inline-flex items-center gap-2"><i class="fas fa-envelope"></i> Contact Me About This Project</a>
                            </div>
                        </article>
                    </div>
                </section>
                `;
                mainContainer.appendChild(page);
            };
            
            // --- INITIALIZE ALL PAGES ---
            createHomePage();
            createExperiencePage();
            createProjectsPage();
            createEducationPage();
            createResumePage();

            // --- SETUP FOR DYNAMIC PAGES/COMPONENTS ---
            const setupProjectPage = () => {
                const activePage = document.getElementById('page-projects');
                if (!activePage) return;

                const sections = activePage.querySelectorAll('.project-section-fade-in');
                const sectionObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                sections.forEach(section => sectionObserver.observe(section));

                // Timeline Accordion Logic
                const accordionItems = activePage.querySelectorAll('.timeline-accordion-item');
                accordionItems.forEach(item => {
                    const button = item.querySelector('button');
                    const content = item.querySelector('.timeline-details');
                    const icon = item.querySelector('.accordion-icon');

                    button.addEventListener('click', () => {
                        const isActive = content.classList.contains('active');
                        
                        accordionItems.forEach(otherItem => {
                             if (otherItem !== item) {
                                otherItem.querySelector('.timeline-details').classList.remove('active');
                                otherItem.querySelector('.accordion-icon').classList.remove('rotate-180');
                             }
                        });

                        if (!isActive) {
                            content.classList.add('active');
                            icon.classList.add('rotate-180');
                        } else {
                            content.classList.remove('active');
                            icon.classList.remove('rotate-180');
                        }
                    });
                });
                
                setupHistoricalAnalysis();

                // Lazy load forecast previews JS
                const forecastPreviewSection = document.querySelector('.chipotle-preview-forecasts');
                if (forecastPreviewSection) {
                    const forecastObserver = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                setupProjectForecastPreviews();
                                observer.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.1 });
                    forecastObserver.observe(forecastPreviewSection);
                }
            };

            const setupHistoricalAnalysis = () => {
                const historicalAnalysisContainer = document.querySelector('.historical-analysis-section');
                if (!historicalAnalysisContainer) return;

                const toggles = historicalAnalysisContainer.querySelectorAll('.mini-card-toggle');
                const chartImg = historicalAnalysisContainer.querySelector('#historical-analysis-img');
                const interpContainer = historicalAnalysisContainer.querySelector('#historical-analysis-interp');

                const viewData = {
                    financials: {
                        imgSrc: './assets/chipotle_hist_financials@2x.png',
                        alt: 'Historical financials: Revenue and Net Income, 2018–2024. Key takeaway: revenue grew at [HIST_REVENUE_CAGR]% CAGR.',
                        interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Financial Performance</h3>
                            <p class="chart-summary font-semibold text-gray-700 text-sm mb-3">Key takeaway: Revenue grew at [HIST_REVENUE_CAGR]% CAGR (2018–2024). The chart shows a COVID-related dip in 2020 followed by digital-led recovery.</p>
                            <ul class="list-disc list-inside space-y-1 text-xs text-gray-600">
                                <li>Digital sales were a primary recovery driver post-2020.</li>
                                <li>Margin pressure from commodity inflation became evident in 2022.</li>
                                <li>Store-level profitability remains strong despite cost headwinds.</li>
                            </ul>`
                    },
                    stores: {
                        imgSrc: './assets/chipotle_stores_vs_sss@2x.png',
                        alt: 'Stores vs same-store-sales: 2018–2024. Key takeaway: store growth linked to SSS movement.',
                         interpHTML: `
                            <h3 class="font-bold text-lg mb-2">Store Expansion vs SSS</h3>
                            <p class="chart-summary font-semibold text-gray-700 text-sm mb-3">Key takeaway: Unit openings correlate with a modest decline in SSS growth—we model mild negative elasticity in the Base case.</p>
                            <ul class="list-disc list-inside space-y-1 text-xs text-gray-600">
                                <li>Aggressive store opening strategy continues to expand footprint.</li>
                                <li>Same-store sales growth shows maturity but remains positive.</li>
                                <li>"Chipotlanes" (drive-thrus) are a key part of the new store format.</li>
                            </ul>`
                    }
                };

                toggles.forEach(toggle => {
                    toggle.addEventListener('click', () => {
                        const view = toggle.dataset.view;
                        
                        toggles.forEach(t => t.setAttribute('aria-pressed', 'false'));
                        toggle.setAttribute('aria-pressed', 'true');
                        
                        chartImg.style.opacity = 0;
                        setTimeout(() => {
                            chartImg.src = viewData[view].imgSrc;
                            chartImg.alt = viewData[view].alt;
                            interpContainer.innerHTML = viewData[view].interpHTML;
                            chartImg.style.opacity = 1;
                        }, 400);
                    });
                });
            };

            function setupProjectForecastPreviews() {
                // --- Variant A: Slider ---
                const sliderEl = document.getElementById('scenario-slider');
                if (sliderEl) {
                    const kpiPrice = document.getElementById('kpi-price');
                    const kpiCagr = document.getElementById('kpi-cagr');
                    const kpiEps = document.getElementById('kpi-eps');
                    const sliderImg = document.getElementById('slider-chart-img');
                    const sliderInterp = document.getElementById('slider-interp');
                    const scenarios = ['bear', 'base', 'bull'];
                    const data = {
                        bear: { price: '$2600', cagr: '11.0%', eps: '$95.00', interp: '<strong>Bear Scenario:</strong> Assumes recessionary pressures impacting SSS and persistent high inflation compressing margins.', alt:'Forecast — Net revenue (Bear scenario), 2025–2028.' },
                        base: { price: '$3150', cagr: '13.5%', eps: '$112.50', interp: '<strong>Base Scenario:</strong> Assumes continued strong SSS growth and moderate margin expansion.', alt:'Forecast — Net revenue (Base scenario), 2025–2028.' },
                        bull: { price: '$3700', cagr: '15.5%', eps: '$130.00', interp: '<strong>Bull Scenario:</strong> Assumes successful international expansion and new menu innovations driving higher traffic and margins.', alt:'Forecast — Net revenue (Bull scenario), 2025–2028.' }
                    };

                    sliderEl.addEventListener('input', () => {
                        const scenario = scenarios[sliderEl.value];
                        kpiPrice.textContent = data[scenario].price;
                        kpiCagr.textContent = data[scenario].cagr;
                        kpiEps.textContent = data[scenario].eps;
                        sliderImg.src = `./assets/chipotle_forecast_revenue_${scenario}@2x.png`;
                        sliderImg.alt = data[scenario].alt;
                        sliderInterp.innerHTML = `<p class="chart-summary font-semibold text-gray-700 mb-2">${data[scenario].interp}</p><ul class="list-disc list-inside space-y-1 text-xs text-gray-600"><li>...</li></ul>`;
                    });
                }
                
                // --- Variant B: Toggle ---
                const toggleContainer = document.querySelector('.cpv-toggle');
                if (toggleContainer) {
                    const toggleBtns = toggleContainer.querySelectorAll('.cpv-toggle-btn-group button');
                    const toggleImg = document.getElementById('toggle-chart-img');
                    const toggleInterp = document.getElementById('toggle-interp');
                    const animationToggle = document.getElementById('animation-toggle');
                    const chartFrame = toggleContainer.querySelector('.chart-frame');
                    const data = {
                         bear: { interp: '<strong>Bear Scenario:</strong> Recessionary pressures impact growth.', alt:'Forecast — Net revenue (Bear scenario), 2025–2028.' },
                         base: { interp: '<strong>Base Scenario:</strong> Continued strong SSS growth.', alt:'Forecast — Net revenue (Base scenario), 2025–2028.' },
                         bull: { interp: '<strong>Bull Scenario:</strong> International expansion succeeds.', alt:'Forecast — Net revenue (Bull scenario), 2025–2028.' }
                    };

                    toggleBtns.forEach(btn => {
                        btn.addEventListener('click', () => {
                            const scenario = btn.dataset.scenario;
                            toggleBtns.forEach(b => b.setAttribute('aria-pressed', 'false'));
                            btn.setAttribute('aria-pressed', 'true');

                            toggleImg.src = `./assets/chipotle_forecast_revenue_${scenario}@2x.png`;
                            toggleImg.alt = data[scenario].alt;
                            toggleInterp.innerHTML = `<p class="chart-summary font-semibold text-gray-700">${data[scenario].interp}</p>`;
                            
                            if (animationToggle.checked) {
                                chartFrame.classList.add('is-animating');
                                setTimeout(() => chartFrame.classList.remove('is-animating'), 1000);
                            }
                        });
                    });
                }
                
                // --- Variant C: Mini-Map ---
                const minimapContainer = document.querySelector('.cpv-minimap');
                 if (minimapContainer) {
                    const minimapItems = minimapContainer.querySelectorAll('.minimap-item');
                    const minimapImg = document.getElementById('minimap-chart-img');
                    const minimapInterp = document.getElementById('minimap-interp');
                     const data = {
                         bear: { interp: '<strong>Bear Scenario:</strong> Recessionary pressures impact growth.', alt:'Forecast — Net revenue (Bear scenario), 2025–2028.' },
                         base: { interp: '<strong>Base Scenario:</strong> Continued strong SSS growth.', alt:'Forecast — Net revenue (Base scenario), 2025–2028.' },
                         bull: { interp: '<strong>Bull Scenario:</strong> International expansion succeeds.', alt:'Forecast — Net revenue (Bull scenario), 2025–2028.' }
                    };
                    
                    minimapItems.forEach(item => {
                        item.addEventListener('click', () => {
                            const scenario = item.dataset.scenario;
                            minimapItems.forEach(i => i.setAttribute('aria-pressed', 'false'));
                            item.setAttribute('aria-pressed', 'true');
                            
                            minimapImg.src = `./assets/chipotle_forecast_revenue_${scenario}@2x.png`;
                            minimapImg.alt = data[scenario].alt;
                            minimapInterp.innerHTML = `<p class="chart-summary font-semibold text-gray-700">${data[scenario].interp}</p>`;
                        });
                    });
                 }
            }


            const setupExperiencePage = () => {
                const timelineItems = document.querySelectorAll('.timeline-item-container');
                if(timelineItems.length === 0) return;

                // Scroll observer for fade-in effect
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.2 });
                timelineItems.forEach(item => observer.observe(item));

                // Accordion logic
                timelineItems.forEach(item => {
                    const wrapper = item.querySelector('.timeline-content-wrapper');
                    const details = item.querySelector('.timeline-details');

                    wrapper.addEventListener('click', () => {
                        const isActive = item.classList.contains('active');

                        // Close all other items
                        timelineItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                                otherItem.querySelector('.timeline-details').classList.remove('active');
                            }
                        });

                        // Toggle the clicked item
                        if (isActive) {
                            item.classList.remove('active');
                            details.classList.remove('active');
                        } else {
                            item.classList.add('active');
                            details.classList.add('active');
                        }
                    });
                });
            };

            // --- GLOBAL LOGIC ---
            showPage('home');
            setupImageUploader(); // Initialize the image uploader
            const header = document.querySelector('header');
            const progressBar = document.getElementById('progress-bar');
            let lastScrollTop = 0;
            
            window.addEventListener('scroll', function() {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                const isScrollingDown = scrollTop > lastScrollTop;

                // Nav hide behavior
                header.classList.toggle('nav-hidden', isScrollingDown && scrollTop > header.offsetHeight);
                
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

                // Update Progress Bar
                const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercent = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
                if (progressBar) {
                    progressBar.style.width = scrollPercent + '%';
                }

                // Parallax visibility check
                const parallaxBanners = document.querySelectorAll('.parallax-banner');
                parallaxBanners.forEach(banner => {
                    const rect = banner.getBoundingClientRect();
                    if (rect.top < window.innerHeight && rect.bottom >= 0) {
                        banner.classList.add('visible');
                    }
                });
                handleScrollAnimations();
            }, false);

            const educationCards = document.querySelectorAll('.education-card');
            if (educationCards.length > 0) {
                const eduObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) entry.target.classList.add('visible');
                    });
                }, { threshold: 0.2 });
                educationCards.forEach(card => eduObserver.observe(card));
            }
            
            const successToast = document.getElementById('success-toast');
            const contactModal = document.getElementById('contact-modal');
            const contactForm = contactModal.querySelector('.contact-form');
            contactForm.action = portfolioData.contact.formspree_url; // Set the formspree URL
            
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                fetch(this.action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
                .then(response => { 
                    if (response.ok) { 
                        closeContactModal();
                        setTimeout(() => {
                           successToast.classList.add('show'); 
                            setTimeout(() => successToast.classList.remove('show'), 4000);
                        }, 400); // show after modal fade out
                        contactForm.reset(); 
                    } else {
                        alert("There was an error sending your message. Please try again.");
                    }
                }).catch(error => {
                    console.error("Form submission error.", error);
                    alert("There was an error sending your message. Please try again.");
                }); 
            });


            function handleScrollAnimations() {
                // This function can be used for other scroll-triggered animations if needed
            }

            const accordionItems = document.querySelectorAll('.accordion-item');
            accordionItems.forEach(item => {
                const header = item.querySelector('.accordion-header');
                const content = item.querySelector('.accordion-content');
                header.addEventListener('click', () => {
                    const isActive = item.classList.contains('active');
                    // Deactivate all items first to ensure only one is open
                    accordionItems.forEach(otherItem => {
                        otherItem.classList.remove('active');
                        otherItem.querySelector('.accordion-content').style.maxHeight = null;
                        otherItem.querySelector('.icon').classList.remove('fa-minus');
                        otherItem.querySelector('.icon').classList.add('fa-plus');
                    });
                    if (!isActive) {
                        item.classList.add('active');
                        content.style.maxHeight = content.scrollHeight + 'px';
                        header.querySelector('.icon').classList.remove('fa-plus');
                        header.querySelector('.icon').classList.add('fa-minus');
                    }
                });
            });

            const canvas = document.getElementById('finance-canvas');
            const ctx = canvas.getContext('2d');
            let particles = [];
            const symbols = ['$', '%', '▲', '▼', '📈', '📉'];
            const mouse = { x: null, y: null, radius: 180 };

            window.addEventListener('mousemove', (event) => { mouse.x = event.x; mouse.y = event.y; });
            window.addEventListener('mouseout', () => { mouse.x = null; mouse.y = null; });

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            function createParticles() {
                particles = [];
                let numberOfParticles = (canvas.width * canvas.height) / 20000;
                for (let i = 0; i < numberOfParticles; i++) {
                    particles.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        vx: (Math.random() - 0.5) * 0.3,
                        vy: (Math.random() - 0.5) * 0.3,
                        size: Math.random() * 2 + 10,
                        symbol: symbols[Math.floor(Math.random() * symbols.length)]
                    });
                }
            }

            function connectParticles() {
                for (let a = 0; a < particles.length; a++) {
                    for (let b = a; b < particles.length; b++) {
                        let dx = particles[a].x - particles[b].x;
                        let dy = particles[a].y - particles[b].y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < 120) {
                            ctx.strokeStyle = 'rgba(209, 164, 110, ' + (1 - distance/120) + ')';
                            ctx.lineWidth = 0.6;
                            ctx.beginPath();
                            ctx.moveTo(particles[a].x, particles[a].y);
                            ctx.lineTo(particles[b].x, particles[b].y);
                            ctx.stroke();
                        }
                    }
                }
            }

            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < particles.length; i++) {
                    let p = particles[i];
                    p.x += p.vx; p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                    if (mouse.x && mouse.y) {
                        let dx = mouse.x - p.x;
                        let dy = mouse.y - p.y;
                        let distance = Math.sqrt(dx * dx + dy * dy);
                        if (distance < mouse.radius) { p.x -= dx / 18; p.y -= dy / 18; }
                    }
                    ctx.fillStyle = `rgba(70, 56, 99, 0.5)`;
                    ctx.font = `${p.size}px Montserrat`;
                    ctx.fillText(p.symbol, p.x, p.y);
                }
                connectParticles();
                requestAnimationFrame(animate);
            }

            window.addEventListener('resize', () => { resizeCanvas(); createParticles(); });
            resizeCanvas(); createParticles(); animate();
            
            // --- Lightbox functionality ---
            const lightbox = document.getElementById('lightbox');
            const lightboxClose = document.getElementById('lightbox-close');
            window.openLightbox = function(src) {
                const lightboxImg = document.getElementById('lightbox-img');
                if (lightbox && lightboxImg) {
                    lightboxImg.src = src;
                    lightbox.classList.remove('hidden');
                    lightbox.classList.add('flex');
                }
            }
            function closeLightbox() {
                if (lightbox) {
                    lightbox.classList.add('hidden');
                    lightbox.classList.remove('flex');
                }
            }
            if (lightbox && lightboxClose) {
                lightboxClose.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
            }

            // --- Contact FAB and Modal Logic ---
            const contactFab = document.getElementById('contact-fab');
            const modalOverlay = contactModal.querySelector('.modal-overlay');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            function openContactModal() { contactModal.classList.add('visible'); }
            function closeContactModal() { contactModal.classList.remove('visible'); }

            if (contactFab) contactFab.addEventListener('click', openContactModal);
            modalOverlay.addEventListener('click', closeContactModal);
            modalCloseBtn.addEventListener('click', closeContactModal);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeLightbox();
                    closeContactModal();
                }
            });

            // --- Image Uploader ---
            function setupImageUploader() {
                const imageContainer = document.getElementById('profile-image-container');
                const image = document.getElementById('profile-image');

                if (imageContainer && image) {
                    imageContainer.addEventListener('click', () => {
                        const input = document.createElement('input');
                        input.type = 'file';
                        input.accept = 'image/*';
                        input.onchange = e => {
                            const file = e.target.files[0];
                            if (file) {
                                const reader = new FileReader();
                                reader.onload = readerEvent => {
                                    image.src = readerEvent.target.result;
                                }
                                reader.readAsDataURL(file);
                            }
                        }
                        input.click();
                    });
                }
            }

            // --- Remove FAB pulse animation after it runs ---
            const fabContent = document.querySelector('#contact-fab .fab-content');
            if (fabContent) {
                fabContent.addEventListener('animationend', () => {
                    fabContent.classList.remove('fab-pulse');
                }, { once: true });
            }
        });
    </script>
</body>
</html>

