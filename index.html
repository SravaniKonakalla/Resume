<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bala Sravani Konakalla | Finance Professional</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Montserrat -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!-- Chart.js for dashboard charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <style>
        /* --- COLOR PALETTE --- */
        /* BG #F5F1EA • Surface #FFFFFF • Text #221C2A */
        /* Accent #463863 • Accent-soft #D1A46E • Muted #9C8FA7 */

        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #F5F1EA;
            color: #221C2A;
            overflow-x: hidden;
        }
        #finance-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
        }
        .card-effect {
            background: #FFFFFF; border: 1px solid #e2e8f0;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05);
        }
        .card-effect:hover {
            transform: translateY(-6px);
            box-shadow: 0 10px 15px -3px rgba(70, 56, 99, 0.1), 0 4px 6px -4px rgba(70, 56, 99, 0.1), 0 0 25px rgba(209, 164, 110, 0.8);
        }
        header { transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1); }
        header.nav-hidden { transform: translateY(-100%); }
        .page { display: none; }
        .page.active { display: block; }
        .nav-container { 
            display: inline-block; background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); 
            border: 1px solid #e2e8f0; border-radius: 9999px; 
            padding: 0.5rem; box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1); 
            max-width: 100%;
        }
        #main-nav { display: flex; align-items: center; overflow-x: auto; scrollbar-width: none; }
        #main-nav::-webkit-scrollbar { display: none; }
        .nav-link { 
            flex-shrink: 0; padding: 0.75rem 1.5rem; border-radius: 9999px; 
            transition: all 0.3s ease; font-weight: 500; color: #221C2A;
            cursor: pointer; font-size: 1rem;
        }
        .nav-link.active { background-color: #F5F1EA; color: #463863; font-weight: 700; }
        .nav-link:not(.active):hover { background-color: #F5F1EA; }
        
        /* --- PARALLAX BANNER STYLES --- */
        .parallax-banner {
            height: 100vh; /* UPDATED: Make banner full screen height */
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }
        .parallax-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(34, 28, 42, 0.65); /* Darker overlay for better readability */
        }
        .parallax-content {
            position: relative;
            z-index: 1;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .parallax-banner.visible .parallax-content {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- OVERLAY PANEL STYLES (Kept for potential future use) --- */
        .overlay-panel-container {
            padding: 4rem 0;
        }
        .overlay-panel {
            height: 40vh;
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1.5rem;
            padding: 2rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .overlay-panel:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 30px -10px rgba(70, 56, 99, 0.15);
        }
        .overlay-panel .heading-underline {
            position: relative;
            display: inline-block;
        }
        .overlay-panel .heading-underline::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background-color: #D1A46E;
            transition: width 0.4s ease;
        }
        .overlay-panel:hover .heading-underline::after {
            width: 100%;
        }
        .overlay-panel .cta-button {
            position: absolute;
            bottom: 2rem;
            right: 2rem;
            transform: translateX(120%);
            transition: transform 0.4s ease;
        }
        .overlay-panel:hover .cta-button {
            transform: translateX(0);
        }

        /* --- LIGHTBOX STYLES --- */
        #lightbox {
            transition: opacity 0.3s ease-in-out;
        }
        #lightbox-img {
            transition: transform 0.3s ease-in-out;
            max-width: 90vw;
            max-height: 90vh;
        }
        #lightbox.hidden #lightbox-img {
            transform: scale(0.9);
        }


        /* --- PROJECT PAGE SPECIFIC STYLES --- */
        .project-section-fade-in {
            opacity: 0;
            transform: translateY(16px);
            transition: opacity 0.7s ease-out, transform 0.7s ease-out;
        }
        .project-section-fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .starbucks-logo-glow { /* Kept for other potential projects */
            box-shadow: 0 0 25px rgba(13, 111, 60, 0.4);
        }
        :root {
            --chipotle-accent: #8B4513; /* A professional brown for Chipotle */
        }
        .btn-primary, .explore-btn {
            background-color: #463863; color: #FFFFFF;
            transition: transform 0.15s ease-out, box-shadow 0.15s ease-out, background-color 0.2s ease;
        }
        .btn-primary:hover, .explore-btn:hover {
            transform: scale(1.03);
            background-color: #D1A46E;
            box-shadow: 0 8px 20px -5px rgba(209, 164, 110, 0.4);
        }
        .btn-secondary {
            background-color: #F5F1EA; color: #463863; border: 1px solid #463863;
            transition: transform 0.15s ease-out, background-color 0.15s ease-out;
        }
        .btn-secondary:hover {
            transform: scale(1.02);
            background-color: #eaddd0;
        }
        .btn-icon {
            background-color: transparent; color: #463863;
            transition: transform 0.15s ease-out, color 0.15s ease-out;
        }
        .btn-icon:hover {
            transform: scale(1.05);
            color: #D1A46E;
        }

        /* Interactive Timeline Accordion */
        .timeline-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding: 0 1rem;
        }
        .timeline-details.active {
            max-height: 500px;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .accordion-icon.rotate-180 {
            transform: rotate(180deg);
        }
        
        #success-toast {
            position: fixed; bottom: 2rem; left: 50%; transform: translateX(-50%);
            background-color: #10b981; color: white; padding: 1rem 1.5rem;
            border-radius: 0.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            z-index: 100; opacity: 0; visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
        }
        #success-toast.show {
            opacity: 1; visibility: visible; transform: translate(-50%, -10px);
        }
        
        /* --- EXPERIENCE TIMELINE STYLES --- */
        .experience-timeline { position: relative; max-width: 768px; margin: 0 auto; }
        .experience-timeline::after {
            content: '';
            position: absolute;
            width: 4px;
            background-color: #e5e7eb;
            top: 0; bottom: 0;
            left: 50%;
            margin-left: -2px;
        }
        .timeline-item-container { 
            position: relative; 
            width: 50%;
            padding: 10px 40px;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .timeline-item-container.visible {
            opacity: 1;
            transform: translateY(0px);
        }
        .timeline-item-container:nth-child(odd) { left: 0; }
        .timeline-item-container:nth-child(even) { left: 50%; }
        .timeline-item-container::after { /* The dot on the timeline */
            content: '';
            position: absolute;
            width: 20px;
            height: 20px;
            right: -10px;
            background-color: white;
            border: 4px solid #9C8FA7;
            top: 25px;
            border-radius: 50%;
            z-index: 1;
            transition: all 0.3s ease;
        }
        .timeline-item-container:nth-child(even)::after { left: -10px; }
        .timeline-item-container.active::after {
            border-color: #463863;
            transform: scale(1.2);
            box-shadow: 0 0 15px rgba(70, 56, 99, 0.6);
        }

        .timeline-content-wrapper { cursor: pointer; }
        
        /* Mobile timeline styles */
        @media (max-width: 768px) {
            .experience-timeline::after { left: 31px; }
            .timeline-item-container {
                width: 100%;
                padding-left: 70px;
                padding-right: 25px;
            }
            .timeline-item-container:nth-child(even) { left: 0%; }
            .timeline-item-container::after { left: 21px; }
        }

        .logo-holder { width: 60px; height: 60px; background: #FFFFFF; border-radius: 50%; padding: 4px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); transition: box-shadow 0.3s ease; }
        .logo-holder img { width: 100%; height: 100%; border-radius: 50%; object-fit: contain; }
        .skill-logo-holder { width: 48px; height: 48px; background: #FFFFFF; border-radius: 50%; padding: 4px; box-shadow: 0 0 8px rgba(100, 150, 255, 0.6), 0 0 15px rgba(100, 150, 255, 0.4); }
        .skill-logo-holder img { width: 100%; height: 100%; border-radius: 50%; object-fit: contain; }
        
        .education-card { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease, transform 0.6s ease, box-shadow 0.3s ease; }
        .education-card.visible { opacity: 1; transform: translateY(0); }
        .education-card:hover { transform: translateY(-8px); box-shadow: 0 12px 20px -4px rgba(70, 56, 99, 0.15), 0 0 30px rgba(209, 164, 110, 0.7); }
        .education-card .logo-holder { width: 120px; height: auto; align-self: stretch; border-radius: 0; padding: 0; box-shadow: 0 0 10px rgba(100, 150, 255, 0.7), 0 0 20px rgba(100, 150, 255, 0.5); overflow: hidden; }
        .education-card .logo-holder img { border-radius: 0; width: 100%; height: 100%; object-fit: cover; }
        .cgpa-badge { background-color: #463863; color: #FFFFFF; padding: 0.25rem 0.75rem; border-radius: 9999px; font-size: 0.8rem; font-weight: 700; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .accordion-item { background-color: #FFFFFF; border-radius: 0.5rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.05), 0 2px 4px -2px rgb(0 0 0 / 0.05); transition: margin 0.3s ease-in-out; }
        .accordion-item:not(:last-child) { margin-bottom: 1rem; }
        .accordion-header { width: 100%; padding: 1rem 1.5rem; display: flex; justify-content: space-between; align-items: center; cursor: pointer; background-color: transparent; border: none; text-align: left; font-weight: 600; font-size: 1.125rem; color: #221C2A; transition: background-color 0.3s ease; }
        .accordion-header:hover { background-color: #F5F1EA; }
        .accordion-header .icon { transition: transform 0.3s ease-in-out; color: #463863; }
        .accordion-item.active .accordion-header .icon { transform: rotate(45deg); }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease-in-out, padding 0.4s ease-in-out; padding: 0 1.5rem; }
        .accordion-content-inner { padding-bottom: 1.5rem; }
        
        /* --- NEW FAB and Modal Styles --- */
        #contact-fab {
            position: fixed;
            bottom: 1.5rem; /* bottom-6 */
            left: 1.5rem;  /* left-6 */
            z-index: 50;
        }

        #contact-fab .fab-content {
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #463863; /* Accent Violet */
            color: #FFFFFF; /* White */
            border-radius: 9999px; /* rounded-full */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* shadow-lg */
            cursor: pointer;
            width: 3rem; /* w-12 */
            height: 3rem; /* h-12 */
            overflow: hidden; /* Crucial for the reveal effect */
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-content {
            width: 12rem; /* w-48 */
        }

        /* Pulse animation for initial load */
        @keyframes pulse-ring {
          0% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0.7), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          70% { box-shadow: 0 0 0 20px rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
          100% { box-shadow: 0 0 0 0 rgba(70, 56, 99, 0), 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        }
        .fab-pulse {
            animation: pulse-ring 2s 1.5s cubic-bezier(0.215, 0.61, 0.355, 1) 1;
        }

        #contact-fab .fab-icon {
            font-size: 1.375rem; /* ~22px */
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        #contact-fab:hover .fab-icon {
            transform: translateX(-4.5rem);
        }

        #contact-fab .fab-text {
            white-space: nowrap;
            opacity: 0;
            font-weight: 600;
            position: absolute;
            transform: translateX(1rem);
            transition: opacity 0.2s ease-in-out 0.1s; /* Delayed fade-in */
        }
        
        #contact-fab:hover .fab-text {
            opacity: 1;
        }
        
        /* Desktop and larger screens */
        @media (min-width: 768px) {
            #contact-fab {
                bottom: auto;
                left: auto;
                right: 1.5rem; /* right-6 */
                top: 50%;
                transform: translateY(-50%);
            }
        }
        
        #contact-modal, #download-modal {
            position: fixed;
            inset: 0;
            z-index: 100;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        #contact-modal.visible, #download-modal.visible {
            opacity: 1;
            visibility: visible;
        }
        #contact-modal .modal-overlay, #download-modal .modal-overlay {
            position: absolute;
            inset: 0;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        #contact-modal .modal-content, #download-modal .modal-content {
            position: relative;
            background: white;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 32rem; /* 512px */
            padding: 2rem;
            transform: scale(0.95);
            transition: transform 0.3s ease-in-out;
        }
        #contact-modal.visible .modal-content, #download-modal.visible .modal-content {
            transform: scale(1);
        }

        /* Chipotle Project Specific Styles */
        .chipotle-hero {
            background-color: rgba(245, 241, 234, 0.9); /* Semi-transparent to show animation */
            backdrop-filter: blur(4px);
            border-bottom: 1px solid #e2e8f0;
        }
        .chipotle-kpi-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05), 0 2px 4px -2px rgba(0,0,0,0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            border: 1px solid #e2e8f0;
        }
        .chipotle-kpi-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0,0,0,0.07), 0 4px 6px -2px rgba(0,0,0,0.05);
        }
        .chipotle-accent-text { color: var(--chipotle-accent); }
        .chipotle-accent-bg { background-color: var(--chipotle-accent); }

        /* Scenario Switcher */
        .scenario-switcher button {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.2s ease;
            position: relative;
            border: 2px solid transparent;
        }
        .scenario-switcher button[aria-selected="true"] {
            color: var(--chipotle-accent);
            background-color: #fff;
            border-color: var(--chipotle-accent);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .scenario-content {
            transition: opacity 0.3s ease-in-out;
        }
        .scenario-content.loading {
            opacity: 0.5;
        }

    </style>
</head>
<body class="antialiased">
    
    <div id="progress-bar-container" class="fixed bottom-0 left-0 right-0 h-1.5 z-[60]">
        <div id="progress-bar" class="h-full bg-[#C58940] transition-all duration-100 ease-linear" style="width: 0%;"></div>
    </div>

    <canvas id="finance-canvas"></canvas>
    <div id="success-toast">
        <i class="fas fa-check-circle mr-2"></i> Message sent successfully! I'll get back to you soon.
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 py-4">
        <div class="container mx-auto flex justify-center items-center px-4">
            <div class="nav-container">
                <nav id="main-nav"></nav>
            </div>
        </div>
    </header>

    <main class="relative z-10">
        <!-- NOTE: Main container for pages -->
    </main>

    <footer class="py-6 text-center text-gray-500 relative z-10">
        <p>&copy; 2025 Bala Sravani Konakalla. All Rights Reserved.</p>
    </footer>

    <!-- Lightbox for resume and certificates -->
    <div id="lightbox" class="fixed inset-0 bg-black bg-opacity-80 z-[100] hidden items-center justify-center p-4">
        <button id="lightbox-close" class="absolute top-4 right-4 text-white text-4xl opacity-80 hover:opacity-100 transition-opacity">&times;</button>
        <img id="lightbox-img" src="" alt="Full view" class="max-w-full max-h-full rounded-lg shadow-2xl">
    </div>
    
    <!-- Download confirmation modal -->
    <div id="download-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content text-center">
            <h3 class="text-xl font-bold mb-4" id="download-modal-title">Download Confirmed</h3>
            <p class="text-gray-600 mb-6" id="download-modal-content">Your download will begin shortly.</p>
            <button id="download-modal-close-btn" class="btn-primary font-bold py-2 px-6 rounded-lg">Close</button>
        </div>
    </div>


    <!-- Floating Action Button -->
    <div id="contact-fab">
        <div class="fab-content fab-pulse">
            <i class="fab-icon fas fa-comments"></i>
            <span class="fab-text">Let's discuss</span>
        </div>
    </div>
    
    <!-- Contact Modal -->
    <div id="contact-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
             <button id="modal-close-btn" class="absolute top-4 right-4 text-gray-400 hover:text-gray-700 text-2xl transition-colors">
                <i class="fas fa-times"></i>
            </button>
            <h3 class="text-2xl md:text-3xl font-bold mb-6 text-center" style="color: #221C2A;">Let’s talk — I’m open to new opportunities</h3>
             <form class="contact-form w-full" action="" method="POST">
                <div class="space-y-4 text-left">
                    <input type="text" name="name" placeholder="Your Name" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;">
                    <input type="email" name="email" placeholder="Your Email" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;">
                    <textarea name="message" rows="4" placeholder="Your Message" required class="w-full bg-gray-50 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 transition-all" style="color: #221C2A; --tw-ring-color: #463863;"></textarea>
                </div>
                <div class="mt-6">
                    <button type="submit" class="btn-primary font-bold py-3 px-6 rounded-lg transition-all duration-300 w-full">
                        Send Message
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const portfolioData = {
                pages: [
                    { id: 'home', label: 'Home' },
                    { id: 'experience', label: 'Experience' },
                    { id: 'projects', label: 'Projects' },
                    { id: 'education', label: 'Education' },
                    { id: 'resume', label: 'Resume' }
                ],
                home: {
                    name: "Bala Sravani Konakalla",
                    title: "Analytical Finance Professional",
                    about: "A dedicated and detail-oriented finance professional with a passion for uncovering insights from data. Eager to apply my skills in a challenging and growth-oriented environment.",
                    summary: "Expertise in credit monitoring, financial modeling, and compliance. Skilled in SAP BPC and advanced Excel, with a proven track record of optimizing workflows and ensuring regulatory compliance.",
                    imageUrl: "https://placehold.co/300x300/463863/F5F1EA?text=BSK",
                },
                 logos: { // IMPORTANT: Logo URLs are preserved here.
                    tcs: 'TCS LOGO.svg.png',
                    mercedes: 'Benz Logo.svg.png',
                    gitam: 'Gitam Logo.svg.png',
                    vishnu: 'Vishnu Logo.svg.png',
                    sap: './public/logos/sap-logo.png',
                    financialModeling: './public/logos/financial-modeling-logo.png',
                    tableau: './public/logos/tableau-logo.png',
                    excel: './public/logos/excel-logo.png',
                    office: './public/logos/office-logo.png',
                    compliance: './public/logos/compliance-logo.png',
                    creditMonitoring: './public/logos/credit-monitoring-logo.png',
                    dataAnalysis: './public/logos/data-analysis-logo.png',
                    microsoft: './public/logos/microsoft-logo.png',
                    pwc: './public/logos/pwc-logo.png',
                    jpmorgan: './public/logos/jpmorgan-logo.png',
                    starbucks: './public/logos/starbucks-logo.png',
                    chipotle: 'https://placeholder.com/[COMPANY_LOGO_SVG]' // Placeholder for new project
                },
                experiences: [
                    { 
                        type: 'job',
                        date: 'Jun 2024 - Present', 
                        title: 'Management Trainee', 
                        company: 'Tata Consultancy Services', 
                        logoUrl: 'tcs',
                        duties: [
                            'Executed Fixed Asset Runs and Role Forward using SAP BPC, ensuring 100% compliance.',
                            'Monitored cost centers and role IDs, improving process efficiency by 15%.',
                            'Resolved system discrepancies through root cause analysis to enhance data reliability.'
                        ],
                        domain: [
                            'Financial Reporting',
                            'SAP Business Planning & Consolidation',
                            'Internal Controls'
                        ]
                    },
                    { 
                        type: 'internship',
                        date: 'Jun 2023 - Jul 2023', 
                        title: 'Sales Trainee (Internship)', 
                        company: 'Silver Star Mercedes Benz', 
                        logoUrl: 'mercedes',
                        duties: [
                            'Performed credit risk assessments and analyzed financial statements.',
                            'Managed end-to-end accounts payable, enhancing vendor relationships.',
                            'Conducted detailed cost-benefit analyses for marketing campaigns.'
                        ],
                        domain: [
                            'Credit Risk Analysis',
                            'Accounts Payable Management',
                            'Financial Statement Analysis'
                        ]
                    }
                ],
                skills: [
                    { name: 'SAP BPC', logoUrl: 'sap' },
                    { name: 'Financial Modeling', logoUrl: 'financialModeling' },
                    { name: 'Tableau', logoUrl: 'tableau' },
                    { name: 'Advanced Excel', logoUrl: 'excel' },
                    { name: 'MS Office Suite', logoUrl: 'office' },
                    { name: 'Compliance', logoUrl: 'compliance' },
                    { name: 'Credit Monitoring', logoUrl: 'creditMonitoring' },
                    { name: 'Data Analysis', logoUrl: 'dataAnalysis' }
                ],
                educations: [
                    { 
                        degree: 'Masters of Business Administration', 
                        specialization: 'Finance & Marketing',
                        school: 'GITAM School of Business', 
                        location: 'Visakhapatnam',
                        date: '2022 - 2024', 
                        details: 'CGPA: 8.19',
                        logoUrl: 'gitam' 
                    },
                    { 
                        degree: 'Bachelor of Technology', 
                        specialization: 'Civil Engineering',
                        school: 'Shri Vishnu Engineering College for Women', 
                        location: 'Bhimavaram',
                        date: '2017 - 2021', 
                        details: 'CGPA: 8.29',
                        logoUrl: 'vishnu'
                    }
                ],
                certifications: [
                    { 
                        title: 'Microsoft 365 Fundamentals', issuer: 'Microsoft', 
                        logoUrl: 'microsoft', issueDate: 'Jan 2024',
                        skills: ['Cloud Computing', 'MS Office 365', 'Collaboration Tools'], category: 'Systems',
                        certificateImageUrl: './public/certificates/MS-365-Cert.png'
                    },
                    { 
                        title: 'SAP Professional Fundamentals', issuer: 'SAP',
                        logoUrl: 'sap', issueDate: 'Dec 2023',
                        skills: ['ERP Systems', 'SAP BPC', 'Financial Planning'], category: 'Systems',
                        certificateImageUrl: './public/certificates/SAP-Cert.png'
                    },
                    { 
                        title: 'GST Taxation Certificate', issuer: 'PwC',
                        logoUrl: 'pwc', issueDate: 'Nov 2023',
                        skills: ['Taxation', 'GST Compliance', 'Financial Regulation'], category: 'Finance',
                        certificateImageUrl: './public/certificates/PwC-Cert.png'
                    },
                    {
                        title: 'Investment Banking Simulation', issuer: 'JP Morgan',
                        logoUrl: 'jpmorgan', issueDate: 'Oct 2023',
                        skills: ['Valuation', 'M&A', 'Financial Modeling'], category: 'Finance',
                        certificateImageUrl: './public/certificates/JPM-Cert.png'
                    },
                    {
                        title: 'Tableau Specialist', issuer: 'Tableau',
                        logoUrl: 'tableau', issueDate: 'Sep 2023',
                        skills: ['Data Visualization', 'Business Intelligence', 'Dashboarding'], category: 'Analytics & Tools',
                        certificateImageUrl: './public/certificates/Tableau-Cert.png'
                    }
                ],
                contact: {
                    email: 'sravikonakalla@gmail.com',
                    linkedin: 'https://linkedin.com/in/kbalasravani',
                    formspree_url: 'https://formspree.io/f/your_unique_id'
                },
                // NEW: Data for the Chipotle Project Page
                chipotleProject: {
                    title: "Chipotle (CMG): Financial Model & 4-Year Forecast",
                    meta: {
                        date: "Sep 2025",
                        history: "2021 - 2024",
                        forecast: "2025 - 2028",
                        sources: "SEC 10-k filings of chipotle, Chipotle official website"
                    },
                    downloads: {
                        excel: "[CHIPOTLE_MODEL.XLSX]",
                        csv: "[FORECAST_CSV_FILENAME]",
                        pptx: "[SUMMARY_PPTX_FILENAME]"
                    },
                    about: "Chipotle Mexican Grill (CMG) is [COMPANY_DESC_PLACEHOLDER]. As of [LATEST_DATE_PLACEHOLDER], Chipotle operates [TOTAL_STORES_PLACEHOLDER] restaurants and reported $[LATEST_REVENUE_PLACEHOLDER] in trailing twelve-month revenue. This project analyzes historical performance and provides a 4-year forecast ([FORECAST_YEARS]) under three scenarios: Bull, Base, Bear.",
                    kpis: {
                        price_base: "[IMPLIED_PRICE_BASE]",
                        price_bull: "[IMPLIED_PRICE_BULL]",
                        price_bear: "[IMPLIED_PRICE_BEAR]",
                        cagr_base: "[REVENUE_CAGR_BASE]",
                        stores_end: "[FORECAST_STORES_END]",
                        sss_base: "[AVG_SSS_BASE]"
                    },
                    historical: {
                        chart1_img: "https://placehold.co/600x400/f0f0f0/333?text=[HIST_FIN_CHART_IMAGE]",
                        chart1_alt: "[ALT_TEXT_HIST_FIN_CHART]",
                        chart1_takeaway: "[HIST_GRAPH1_TAKEAWAY]",
                        chart1_bullets: ["[HIST_GRAPH1_BULLET_1]", "[HIST_GRAPH1_BULLET_2]", "[HIST_GRAPH1_BULLET_3]"],
                        chart2_img: "https://placehold.co/600x400/f0f0f0/333?text=[STORES_VS_SSS_CHART_IMAGE]",
                        chart2_alt: "[ALT_TEXT_STORES_VS_SSS_CHART]",
                        chart2_takeaway: "[HIST_GRAPH2_TAKEAWAY]",
                        chart2_bullets: ["[HIST_GRAPH2_BULLET_1]", "[HIST_GRAPH2_BULLET_2]", "[HIST_GRAPH2_BULLET_3]"]
                    },
                    scenarios: {
                        base: {
                            label_short: "[BASE_LABEL_SHORT]",
                            revenue_chart_img: "https://placehold.co/600x400/e6f2ff/0066cc?text=[FORECAST_REVENUE_CHART_BASE]",
                            price_chart_img: "https://placehold.co/600x400/e6f2ff/0066cc?text=[FORECAST_PRICE_CHART_BASE]",
                            table_img: "https://placehold.co/1200x300/e6f2ff/0066cc?text=[FORECAST_TABLE_BASE]",
                            takeaway: "[FORECAST_BASE_TAKEAWAY]",
                            bullets: ["[FORECAST_BASE_BULLET_1]", "[FORECAST_BASE_BULLET_2]", "[FORECAST_BASE_BULLET_3]"],
                            assumptions: {
                                store_growth: "[ASSUMP_STORE_GROWTH_BASE]",
                                sss: "[ASSUMP_SSS_BASE]",
                                margin: "[ASSUMP_MARGIN_BASE]",
                                discount: "[ASSUMP_DISCOUNT_BASE]"
                            }
                        },
                        bull: {
                            label_short: "[BULL_LABEL_SHORT]",
                            revenue_chart_img: "https://placehold.co/600x400/e6ffed/009933?text=[FORECAST_REVENUE_CHART_BULL]",
                            price_chart_img: "https://placehold.co/600x400/e6ffed/009933?text=[FORECAST_PRICE_CHART_BULL]",
                            table_img: "https://placehold.co/1200x300/e6ffed/009933?text=[FORECAST_TABLE_BULL]",
                            takeaway: "[FORECAST_BULL_TAKEAWAY]",
                            bullets: ["[FORECAST_BULL_BULLET_1]", "[FORECAST_BULL_BULLET_2]", "[FORECAST_BULL_BULLET_3]"],
                             assumptions: {
                                store_growth: "[ASSUMP_STORE_GROWTH_BULL]",
                                sss: "[ASSUMP_SSS_BULL]",
                                margin: "[ASSUMP_MARGIN_BULL]",
                                discount: "[ASSUMP_DISCOUNT_BULL]"
                            }
                        },
                        bear: {
                            label_short: "[BEAR_LABEL_SHORT]",
                            revenue_chart_img: "https://placehold.co/600x400/fff0f0/cc3333?text=[FORECAST_REVENUE_CHART_BEAR]",
                            price_chart_img: "https://placehold.co/600x400/fff0f0/cc3333?text=[FORECAST_PRICE_CHART_BEAR]",
                            table_img: "https://placehold.co/1200x300/fff0f0/cc3333?text=[FORECAST_TABLE_BEAR]",
                            takeaway: "[FORECAST_BEAR_TAKEAWAY]",
                            bullets: ["[FORECAST_BEAR_BULLET_1]", "[FORECAST_BEAR_BULLET_2]", "[FORECAST_BEAR_BULLET_3]"],
                             assumptions: {
                                store_growth: "[ASSUMP_STORE_GROWTH_BEAR]",
                                sss: "[ASSUMP_SSS_BEAR]",
                                margin: "[ASSUMP_MARGIN_BEAR]",
                                discount: "[ASSUMP_DISCOUNT_BEAR]"
                            }
                        }
                    },
                    methodology: {
                        sources: "[DATA_SOURCES]",
                        approach: "[FORECAST_METHOD_DESC]",
                        disclaimer: "[DISCLAIMER_TEXT]"
                    }
                }
            };
            
            const getLogoUrl = (key) => portfolioData.logos[key] || `https://placehold.co/60x60/FFFFFF/463863?text=Logo`;

            const mainContainer = document.querySelector('main');
            const navContainer = document.getElementById('main-nav');

            const showPage = (pageId) => {
                document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                const newPage = document.getElementById(`page-${pageId}`);
                if (newPage) {
                    newPage.classList.add('active');
                    if (pageId === 'projects') {
                        // We need a slight delay to ensure the page is in the DOM before setup
                        setTimeout(setupProjectPage, 50);
                    }
                    if (pageId === 'experience') {
                        setTimeout(setupExperiencePage, 50);
                    }
                }
                
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                    if (link.dataset.pageId === pageId) {
                        link.classList.add('active');
                        link.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                    }
                });
                if (pageId !== 'home') {
                    window.scrollTo(0, 0);
                }
                handleScrollAnimations(); 
            };

            portfolioData.pages.forEach(page => {
                const link = document.createElement('a');
                link.className = 'nav-link';
                if (page.id === 'home') link.classList.add('active');
                link.textContent = page.label;
                link.dataset.pageId = page.id;
                link.onclick = () => showPage(page.id);
                navContainer.appendChild(link);
            });
            
            // --- PAGE CREATION FUNCTIONS (RESTORED) ---
            const createHomePage = () => {
                const page = document.createElement('div');
                page.id = 'page-home';
                page.className = 'page active';

                const parallaxBanners = [
                    { 
                        id: 'experience', 
                        title: 'Work Experience', 
                        lines: [
                            'Hands-on experience across management, sales, and financial analysis roles.',
                            'Developing expertise through progressive responsibilities and real-world problem-solving.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1554224155-6726b3ff858f?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'experience'
                    },
                    { 
                        id: 'education', 
                        title: 'Academic Background', 
                        lines: [
                            'Academic foundation in business and technology, strengthened by an MBA.',
                            'Blending quantitative skills with strategic thinking.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'education'
                    },
                    { 
                        id: 'projects', 
                        title: 'Key Projects', 
                        lines: [
                            'Real-time financial modeling and valuation projects, including Chipotle case study.',
                            'Transforming theory into practical, data-driven insights.'
                        ],
                        bg: 'https://images.unsplash.com/photo-1639322537228-f710d846310a?q=80&w=1920&auto=format&fit=crop',
                        buttonPageId: 'projects'
                    },
                    { 
                        id: 'resume', 
                        title: 'Resume', 
                        lines: [
                            'Certified in financial modeling and valuation, continuously upskilling in finance.',
                            'Explore my resume to see detailed experience and qualifications.'
                        ],
                         bg: 'https://images.unsplash.com/photo-1586281380349-632531db7ed4?q=80&w=1920&auto-format&fit=crop',
                        buttonPageId: 'resume'
                    }
                ];

                const parallaxBannersHTML = parallaxBanners.map(section => `
                    <div class="parallax-banner" style="background-image: url('${section.bg}')">
                        <div class="parallax-overlay"></div>
                        <div class="parallax-content p-8">
                            <h2 class="text-3xl md:text-4xl font-bold mb-4">${section.title}</h2>
                            <div class="max-w-2xl mx-auto mb-6 space-y-2 text-base md:text-lg">
                                <p>${section.lines[0]}</p>
                                <p>${section.lines[1]}</p>
                            </div>
                            <button onclick="document.getElementById('main-nav').querySelector('[data-page-id=${section.buttonPageId}]').click()" class="explore-btn font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center gap-2" aria-label="Explore ${section.title}">
                                Explore <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <div class="min-h-screen flex flex-col relative" style="background-color: rgba(245, 241, 234, 0.8); backdrop-filter: blur(6px);">
                        <section class="flex-grow flex items-center pt-40 pb-16">
                            <div class="container mx-auto px-6">
                               <div class="grid md:grid-cols-10 gap-8 items-center">
                                    <div class="md:col-span-3 flex justify-center md:justify-end">
                                        <img src="${portfolioData.home.imageUrl}" alt="${portfolioData.home.name}" class="rounded-full w-40 h-40 md:w-56 md:h-56 object-cover border-4 border-gray-200 shadow-2xl">
                                    </div>
                                    <div class="md:col-span-7 text-center md:text-left">
                                        <h1 class="text-4xl md:text-6xl font-bold mb-4 tracking-tight" style="color: #221C2A;">${portfolioData.home.name}</h1>
                                        <h2 class="text-2xl md:text-3xl mb-4" style="color: #463863;">${portfolioData.home.title}</h2>
                                        <p class="text-lg" style="color: #9C8FA7;">${portfolioData.home.about}</p>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <section class="pb-16 md:pb-24">
                            <div class="container mx-auto px-6 text-center">
                                <h3 class="text-3xl md:text-4xl font-bold mb-6" style="color: #221C2A;">Profile Summary</h3>
                                <p class="text-lg md:text-xl max-w-4xl mx-auto leading-relaxed" style="color: #463863;">${portfolioData.home.summary}</p>
                            </div>
                        </section>
                    </div>
                    
                    <div class="bg-gray-800 relative z-10">
                        ${parallaxBannersHTML}
                    </div>
                `;
                mainContainer.appendChild(page);
            };

            const createExperiencePage = () => {
                const page = document.createElement('div');
                page.id = 'page-experience';
                page.className = 'page';
                
                const experiencesHTML = portfolioData.experiences.map(exp => {
                    const iconClass = exp.type === 'job' ? 'fa-briefcase' : 'fa-user-graduate';
                    return `
                    <div class="timeline-item-container">
                        <div class="timeline-content-wrapper">
                            <div class="bg-white p-6 rounded-xl shadow-md card-effect">
                                <div class="flex items-start gap-4">
                                    <div class="logo-holder !w-14 !h-14">
                                        <img src="${getLogoUrl(exp.logoUrl)}" alt="${exp.company} Logo">
                                    </div>
                                    <div class="flex-grow">
                                        <div class="flex justify-between items-center">
                                            <h3 class="text-xl font-bold text-gray-900">${exp.title}</h3>
                                            <i class="fas ${iconClass} text-gray-400 hidden md:block"></i>
                                        </div>
                                        <p class="font-semibold" style="color: #463863;">${exp.company}</p>
                                        <p class="text-sm text-gray-500 mt-1">${exp.date}</p>
                                    </div>
                                </div>
                                <div class="timeline-details">
                                    <div class="border-t border-gray-200 my-4"></div>
                                    <h4 class="font-bold mb-2">Responsibilities:</h4>
                                    <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                        ${exp.duties.map(duty => `<li>${duty}</li>`).join('')}
                                    </ul>
                                    <h4 class="font-bold mt-4 mb-2">Domain Expertise:</h4>
                                    <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                        ${exp.domain.map(d => `<li>${d}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `}).join('');

                const skillsHTML = portfolioData.skills.map(skill => `
                    <div class="p-4 rounded-lg card-effect flex flex-col items-center justify-center gap-4 text-center h-full">
                        <div class="skill-logo-holder">
                            <img src="${getLogoUrl(skill.logoUrl)}" alt="${skill.name} Logo" onerror="this.src='https://placehold.co/48x48/FFFFFF/463863?text=Icon'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <p class="text-sm font-semibold" style="color: #221C2A;">${skill.name}</p>
                    </div>`).join('');

                page.innerHTML = `
                    <section class="pt-24 pb-16">
                        <div class="container mx-auto px-6">
                            <h3 class="text-3xl md:text-4xl font-bold text-center mb-16" style="color: #221C2A;">Work Experience</h3>
                            <div class="experience-timeline">
                                ${experiencesHTML}
                            </div>
                            <div class="text-center mt-16">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Technical Skills</h3>
                                <div class="max-w-4xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-4">${skillsHTML}</div>
                            </div>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            };
            
            const createEducationPage = () => {
                const page = document.createElement('div');
                page.id = 'page-education';
                page.className = 'page';

                const educationCardsHTML = portfolioData.educations.map(edu => `
                    <div class="education-card bg-white rounded-2xl flex overflow-hidden w-full max-w-2xl mx-auto">
                        <div class="logo-holder">
                            <img src="${getLogoUrl(edu.logoUrl)}" alt="${edu.school} Logo" onerror="this.src='https://placehold.co/120x120/FFFFFF/463863?text=Logo'; this.parentElement.style.boxShadow='none';">
                        </div>
                        <div class="py-6 pr-6 pl-8 relative flex-grow">
                            <h4 class="text-xl font-bold" style="color: #221C2A;">${edu.degree}</h4>
                            <p class="font-semibold text-md mb-1" style="color: #463863;">${edu.specialization}</p>
                            <p class="text-sm" style="color: #9C8FA7;">${edu.school}, ${edu.location}</p>
                            <p class="text-sm font-medium" style="color: #D1A46E;">${edu.date}</p>
                            <div class="absolute bottom-6 right-6">
                                <span class="cgpa-badge">${edu.details}</span>
                            </div>
                        </div>
                    </div>
                `).join('');

                const accordionHTML = portfolioData.certifications.map(cert => `
                    <div class="accordion-item">
                        <button class="accordion-header">
                            <div class="flex items-center gap-4">
                                <div class="logo-holder w-10 h-10 text-sm">
                                    <img src="${getLogoUrl(cert.logoUrl)}" alt="${cert.issuer} Logo">
                                </div>
                                <span>${cert.title}</span>
                            </div>
                            <i class="fas fa-plus icon"></i>
                        </button>
                        <div class="accordion-content">
                            <div class="accordion-content-inner grid md:grid-cols-3 gap-6 items-center">
                                <div class="md:col-span-1">
                                    <img src="${cert.certificateImageUrl}" alt="${cert.title} certificate" class="rounded-lg shadow-lg w-full cursor-pointer" onclick="openLightbox(this.src)" onerror="this.src='https://placehold.co/400x250/FFFFFF/463863?text=Cert';">
                                </div>
                                <div class="md:col-span-2">
                                    <h5 class="font-bold text-lg mb-2" style="color: #463863;">${cert.issuer}</h5>
                                    <p class="text-sm text-gray-500 mb-4">Issued: ${cert.issueDate}</p>
                                    <h6 class="font-semibold mb-2">Skills Covered:</h6>
                                    <ul class="list-disc list-inside text-gray-600 space-y-1">
                                        ${cert.skills.map(skill => `<li>${skill}</li>`).join('')}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');


                page.innerHTML = `
                    <section class="pt-24 pb-16">
                        <div class="container mx-auto px-6">
                            <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Academic Background</h3>
                            <div class="space-y-8">
                                ${educationCardsHTML}
                            </div>
                            
                            <div class="cert-section mt-20">
                                <h3 class="text-3xl md:text-4xl font-bold text-center mb-12" style="color: #221C2A;">Certifications</h3>
                                <div class="max-w-4xl mx-auto">
                                    ${accordionHTML}
                                </div>
                            </div>
                        </div>
                    </section>
                    `;
                mainContainer.appendChild(page);
            };

            const createResumePage = () => {
                const page = document.createElement('div');
                page.id = 'page-resume';
                page.className = 'page';

                const getLastSunday = () => {
                    const today = new Date();
                    const dayOfWeek = today.getDay(); // Sunday is 0, Monday is 1, ...
                    const lastSunday = new Date(today);
                    lastSunday.setDate(today.getDate() - dayOfWeek);
                    return lastSunday.toLocaleDateString('en-US', {
                        month: 'long', day: 'numeric', year: 'numeric'
                    });
                };

                page.innerHTML = `
                    <section class="pt-24 pb-16 min-h-[90vh] flex items-center">
                        <div class="container mx-auto px-4 text-center max-w-4xl">
                            <h2 class="text-3xl md:text-4xl font-bold mb-2" style="color: #221C2A;">Resume</h2>
                            <p class="max-w-xl mx-auto mb-8" style="color: #9C8FA7;">Preview my resume below or download the PDF version.</p>

                            <div id="resume-viewer" class="relative bg-white rounded-2xl shadow-lg p-2 md:p-4">
                                <div class="overflow-auto rounded-lg" style="height: 70vh;">
                                    <img src="https://placehold.co/827x1169/ffffff/221C2A?text=Resume+Preview" alt="Preview of Bala Sravani Konakalla’s Resume" class="w-full h-auto mx-auto cursor-pointer hover:opacity-90 transition-opacity" onclick="openLightbox(this.src)">
                                </div>
                            </div>

                            <div class="mt-6 flex flex-col sm:flex-row items-center justify-center gap-4">
                                 <a href="./Bala_Sravani_Konakalla_Resume.pdf" download="Bala_Sravani_Konakalla_Resume.pdf" class="btn-primary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="Download Resume PDF">
                                    <i class="fas fa-download"></i> Download PDF
                                </a>
                                <a href="https://linkedin.com/in/kbalasravani" target="_blank" class="btn-secondary w-full sm:w-auto font-bold py-3 px-6 rounded-lg transition-all duration-300 inline-flex items-center justify-center gap-2" aria-label="View on LinkedIn">
                                    <i class="fab fa-linkedin"></i> View on LinkedIn
                                </a>
                            </div>

                            <p id="resume-update-date" class="text-xs text-gray-400 mt-4">Last Updated on ${getLastSunday()}</p>
                        </div>
                    </section>
                `;
                mainContainer.appendChild(page);
            };
            
            // --- REBUILT PROJECTS PAGE ---
            const createProjectsPage = () => {
                const page = document.createElement('div');
                page.id = 'page-projects';
                page.className = 'page';
                
                const data = portfolioData.chipotleProject;

                page.innerHTML = `
                <div id="chipotle-project-container" class="pt-24">
                    <!-- 1. Hero / Header -->
                    <section class="chipotle-hero py-12 md:py-16">
                        <div class="container mx-auto px-6 max-w-6xl">
                            <div class="grid md:grid-cols-5 gap-8 md:gap-12 items-center">
                                <div class="md:col-span-3 text-center md:text-left">
                                    <div class="flex justify-center md:justify-start items-center gap-4 mb-4">
                                        <img src="${getLogoUrl('chipotle')}" alt="Chipotle Company Logo Placeholder" class="w-16 h-16">
                                    </div>
                                    <h1 class="text-2xl md:text-3xl font-bold text-gray-800 leading-tight mb-4">${data.title}</h1>
                                    <p class="text-sm text-gray-500 mb-6">
                                        Analysis: ${data.meta.date} &bull; History: ${data.meta.history} &bull; Forecast: ${data.meta.forecast} <br> Sources: ${data.meta.sources}
                                    </p>
                                    <div class="flex justify-center md:justify-start">
                                        <a href="#" class="download-btn btn-primary font-bold py-3 px-5 rounded-lg inline-flex items-center gap-2" data-filename="${data.downloads.excel}" data-content="Full financial model, assumptions, and scenario data in Excel format.">
                                            <i class="fas fa-file-excel"></i> Download Model (Excel)
                                        </a>
                                    </div>
                                </div>
                                <div class="md:col-span-2 h-full">
                                    <div class="bg-white/70 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-gray-200 h-full flex flex-col justify-center">
                                        <h3 class="font-bold text-lg mb-4 text-gray-800 text-center">About the Company</h3>
                                        <p class="text-gray-600 text-sm leading-relaxed">
                                            ${data.about}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    <!-- About the company Section Removed as content is moved to hero -->

                    <!-- 2. Project dashboard — Key results -->
                    <section class="py-10 bg-gray-50">
                        <div class="container mx-auto px-6 max-w-5xl">
                            <h2 class="text-2xl font-bold text-center mb-8">Key Results Dashboard</h2>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-4 md:gap-6">
                                <!-- KPI Cards will be populated here -->
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Implied Price (Base)</p>
                                    <p class="text-2xl font-bold chipotle-accent-text" data-kpi="price_base">${data.kpis.price_base}</p>
                                </div>
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Implied Price (Bull)</p>
                                    <p class="text-2xl font-bold text-green-600" data-kpi="price_bull">${data.kpis.price_bull}</p>
                                </div>
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Implied Price (Bear)</p>
                                    <p class="text-2xl font-bold text-red-600" data-kpi="price_bear">${data.kpis.price_bear}</p>
                                </div>
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Revenue CAGR (Base)</p>
                                    <p class="text-2xl font-bold chipotle-accent-text" data-kpi="cagr_base">${data.kpis.cagr_base}</p>
                                </div>
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Forecasted Stores (${data.meta.forecast})</p>
                                    <p class="text-2xl font-bold chipotle-accent-text" data-kpi="stores_end">${data.kpis.stores_end}</p>
                                </div>
                                <div class="chipotle-kpi-card text-center">
                                    <p class="text-sm text-gray-500">Avg. SSS Change (Base)</p>
                                    <p class="text-2xl font-bold chipotle-accent-text" data-kpi="sss_base">${data.kpis.sss_base}</p>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 3. Main Content -->
                    <main class="py-12 md:py-16">
                        <div class="container mx-auto px-6 max-w-5xl space-y-16">
                            <!-- A. Historical Performance -->
                            <div>
                                <h2 class="text-3xl font-bold mb-8 text-center">Historical Financial Performance</h2>
                                <div class="grid md:grid-cols-5 gap-8 items-center mb-12">
                                    <div class="md:col-span-3">
                                        <img src="${data.historical.chart1_img}" alt="${data.historical.chart1_alt}" class="w-full rounded-lg shadow-md">
                                    </div>
                                    <div class="md:col-span-2">
                                        <p class="font-bold text-lg mb-2">${data.historical.chart1_takeaway}</p>
                                        <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                            ${data.historical.chart1_bullets.map(b => `<li>${b}</li>`).join('')}
                                        </ul>
                                    </div>
                                </div>
                                <div class="grid md:grid-cols-5 gap-8 items-center">
                                     <div class="md:col-span-2 md:order-2">
                                        <p class="font-bold text-lg mb-2">${data.historical.chart2_takeaway}</p>
                                        <ul class="list-disc pl-5 space-y-1 text-gray-600">
                                            ${data.historical.chart2_bullets.map(b => `<li>${b}</li>`).join('')}
                                        </ul>
                                    </div>
                                    <div class="md:col-span-3 md:order-1">
                                        <img src="${data.historical.chart2_img}" alt="${data.historical.chart2_alt}" class="w-full rounded-lg shadow-md">
                                    </div>
                                </div>
                            </div>

                            <!-- B. Forecasts — Interactive Scenarios -->
                            <div class="bg-gray-50 p-6 md:p-8 rounded-xl">
                                <h2 class="text-3xl font-bold mb-8 text-center">Interactive Forecast Scenarios</h2>
                                <!-- Scenario Switcher -->
                                <div role="tablist" aria-label="Forecast Scenarios" class="scenario-switcher flex justify-center bg-gray-200 p-1 rounded-lg max-w-md mx-auto mb-8">
                                    <button role="tab" aria-selected="false" aria-controls="scenario-content" id="tab-bull" data-scenario="bull">Bull</button>
                                    <button role="tab" aria-selected="true" aria-controls="scenario-content" id="tab-base" data-scenario="base">Base</button>
                                    <button role="tab" aria-selected="false" aria-controls="scenario-content" id="tab-bear" data-scenario="bear">Bear</button>
                                </div>
                                
                                <div id="scenario-content" class="scenario-content">
                                    <!-- This content will be updated by JS -->
                                </div>
                            </div>
                        </div>
                    </main>

                     <!-- 4. Methodology -->
                    <section class="py-10">
                        <div class="container mx-auto px-6 max-w-4xl">
                            <div class="accordion-item">
                                <button class="accordion-header">
                                    <span>Methodology & Key Assumptions</span>
                                    <i class="fas fa-plus icon"></i>
                                </button>
                                <div class="accordion-content">
                                    <div class="accordion-content-inner space-y-4">
                                        <div>
                                            <h4 class="font-bold">Data Sources</h4>
                                            <p class="text-gray-600">${data.methodology.sources}</p>
                                        </div>
                                        <div>
                                            <h4 class="font-bold">Forecasting Approach</h4>
                                            <p class="text-gray-600">${data.methodology.approach}</p>
                                        </div>
                                        <div>
                                            <h4 class="font-bold">Disclaimer</h4>
                                            <p class="text-sm text-gray-500">${data.methodology.disclaimer}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- 5. Footer / Navigation -->
                    <footer class="py-12 bg-white border-t">
                        <div class="container mx-auto px-6 max-w-5xl text-center">
                             <div class="flex flex-wrap justify-center gap-4 items-center">
                                <a href="#" onclick="document.getElementById('main-nav').querySelector('[data-page-id=home]').click()" class="btn-secondary font-bold py-2 px-4 rounded-lg">
                                   <i class="fas fa-arrow-left mr-2"></i> Back to Home
                                </a>
                                <a href="mailto:${portfolioData.contact.email}" class="btn-primary font-bold py-2 px-4 rounded-lg">
                                    Contact to adapt this model
                                </a>
                            </div>
                        </div>
                    </footer>
                </div>
                `;
                mainContainer.appendChild(page);
            };
            
            // --- INITIALIZE ALL PAGES ---
            createHomePage();
            createExperiencePage();
            createProjectsPage();
            createEducationPage();
            createResumePage();

            // --- SETUP FOR DYNAMIC PAGES/COMPONENTS ---
            const setupExperiencePage = () => {
                const timelineItems = document.querySelectorAll('.timeline-item-container');
                if(timelineItems.length === 0) return;

                // Scroll observer for fade-in effect
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                        }
                    });
                }, { threshold: 0.2 });
                timelineItems.forEach(item => observer.observe(item));

                // Accordion logic
                timelineItems.forEach(item => {
                    const wrapper = item.querySelector('.timeline-content-wrapper');
                    const details = item.querySelector('.timeline-details');

                    wrapper.addEventListener('click', () => {
                        const isActive = item.classList.contains('active');

                        // Close all other items
                        timelineItems.forEach(otherItem => {
                            if (otherItem !== item) {
                                otherItem.classList.remove('active');
                                otherItem.querySelector('.timeline-details').classList.remove('active');
                            }
                        });

                        // Toggle the clicked item
                        if (isActive) {
                            item.classList.remove('active');
                            details.classList.remove('active');
                        } else {
                            item.classList.add('active');
                            details.classList.add('active');
                        }
                    });
                });
            };
            
            const setupProjectPage = () => {
                const projectContainer = document.getElementById('chipotle-project-container');
                if (!projectContainer) return;

                const scenarioSwitcher = projectContainer.querySelector('.scenario-switcher');
                const scenarioContentEl = projectContainer.querySelector('#scenario-content');
                
                const updateScenarioContent = (scenario) => {
                    const data = portfolioData.chipotleProject.scenarios[scenario];
                    if (!data) return;

                    scenarioContentEl.classList.add('loading');

                    setTimeout(() => {
                        scenarioContentEl.innerHTML = `
                            <div class="text-center mb-4">
                                <p class="font-semibold text-lg" id="scenario-headline">${data.takeaway}</p>
                                <p class="text-gray-500 text-sm">${data.label_short}</p>
                            </div>
                            <div class="grid md:grid-cols-2 gap-8 mb-8">
                               <img src="${data.revenue_chart_img}" alt="Forecast revenue chart for ${scenario} scenario" class="w-full rounded-lg shadow-md">
                               <img src="${data.price_chart_img}" alt="Forecast price chart for ${scenario} scenario" class="w-full rounded-lg shadow-md">
                            </div>
                            <div class="grid md:grid-cols-2 gap-8 items-start">
                                <div>
                                    <h4 class="font-bold mb-2">Key Assumptions (${scenario})</h4>
                                    <ul class="list-none space-y-1 text-sm bg-white p-4 rounded-md shadow-sm">
                                        <li class="flex justify-between"><span>Store Growth Rate:</span> <b class="chipotle-accent-text">${data.assumptions.store_growth}</b></li>
                                        <li class="flex justify-between"><span>Avg. SSS Growth:</span> <b class="chipotle-accent-text">${data.assumptions.sss}</b></li>
                                        <li class="flex justify-between"><span>Margin Assumption:</span> <b class="chipotle-accent-text">${data.assumptions.margin}</b></li>
                                        <li class="flex justify-between"><span>Discount Rate:</span> <b class="chipotle-accent-text">${data.assumptions.discount}</b></li>
                                    </ul>
                                </div>
                                <div>
                                    <h4 class="font-bold mb-2">Outcomes & Implications</h4>
                                     <ul id="scenario-bullets" class="list-disc pl-5 space-y-1 text-gray-600">
                                        ${data.bullets.map(b => `<li>${b}</li>`).join('')}
                                     </ul>
                                </div>
                            </div>
                             <div class="mt-8">
                                <h4 class="font-bold mb-2 text-center">Forecast Table</h4>
                                <img src="${data.table_img}" alt="Forecast table for ${scenario} scenario" class="w-full rounded-lg shadow-md mx-auto">
                            </div>
                        `;
                        scenarioContentEl.classList.remove('loading');
                    }, 200); // simulate loading
                };
                
                scenarioSwitcher.addEventListener('click', (e) => {
                    if (e.target.tagName === 'BUTTON') {
                        const scenario = e.target.dataset.scenario;
                        
                        // Update ARIA attributes
                        scenarioSwitcher.querySelectorAll('button').forEach(btn => btn.setAttribute('aria-selected', 'false'));
                        e.target.setAttribute('aria-selected', 'true');
                        
                        updateScenarioContent(scenario);
                    }
                });
                
                // Accordion Logic for Methodology on Project Page and Education page
                const accordionItems = document.querySelectorAll('.accordion-item');
                accordionItems.forEach(item => {
                    const header = item.querySelector('.accordion-header');
                    const content = item.querySelector('.accordion-content');
                    header.addEventListener('click', () => {
                        const isActive = item.classList.contains('active');
                        // Deactivate all items first to ensure only one is open on the page
                        const pageAccordionItems = item.closest('.page, #chipotle-project-container').querySelectorAll('.accordion-item');
                        pageAccordionItems.forEach(otherItem => {
                           if(otherItem !== item) {
                             otherItem.classList.remove('active');
                             otherItem.querySelector('.accordion-content').style.maxHeight = null;
                             const icon = otherItem.querySelector('.icon');
                             if(icon) {
                                icon.classList.remove('fa-minus');
                                icon.classList.add('fa-plus');
                             }
                           }
                        });

                        if (!isActive) {
                            item.classList.add('active');
                            content.style.maxHeight = content.scrollHeight + 'px';
                            const icon = header.querySelector('.icon');
                            if (icon) {
                                icon.classList.remove('fa-plus');
                                icon.classList.add('fa-minus');
                            }
                        } else {
                            item.classList.remove('active');
                            content.style.maxHeight = null;
                             const icon = header.querySelector('.icon');
                            if (icon) {
                                icon.classList.remove('fa-minus');
                                icon.classList.add('fa-plus');
                            }
                        }
                    });
                });

                // Initial load for project scenario
                updateScenarioContent('base');

                // Download buttons modal logic
                const downloadModal = document.getElementById('download-modal');
                const downloadModalTitle = document.getElementById('download-modal-title');
                const downloadModalContent = document.getElementById('download-modal-content');
                
                projectContainer.querySelectorAll('.download-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const filename = e.currentTarget.dataset.filename;
                        const content = e.currentTarget.dataset.content;
                        
                        downloadModalTitle.textContent = `Downloading ${filename}`;
                        downloadModalContent.textContent = content;
                        downloadModal.classList.add('visible');

                        console.log(`Starting download for: ${filename}`);
                        const link = document.createElement('a');
                        link.href = '#'; 
                        link.download = filename;
                        // link.click(); 
                    });
                });
            };

            function handleScrollAnimations() {
                // This function can be used for other scroll-triggered animations if needed
            }

            // --- GLOBAL LOGIC ---
            showPage('home');
            const header = document.querySelector('header');
            const progressBar = document.getElementById('progress-bar');
            let lastScrollTop = 0;
            
            window.addEventListener('scroll', function() {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                
                const isScrollingDown = scrollTop > lastScrollTop;

                // Nav hide behavior
                header.classList.toggle('nav-hidden', isScrollingDown && scrollTop > header.offsetHeight);
                
                lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;

                // Update Progress Bar
                const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                const scrollPercent = scrollHeight > 0 ? (scrollTop / scrollHeight) * 100 : 0;
                if (progressBar) {
                    progressBar.style.width = scrollPercent + '%';
                }

                // Parallax visibility check
                const parallaxBanners = document.querySelectorAll('.parallax-banner');
                parallaxBanners.forEach(banner => {
                    const rect = banner.getBoundingClientRect();
                    if (rect.top < window.innerHeight && rect.bottom >= 0) {
                        banner.classList.add('visible');
                    }
                });

                handleScrollAnimations();
            }, false);

            const educationCards = document.querySelectorAll('.education-card');
            if (educationCards.length > 0) {
                const eduObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) entry.target.classList.add('visible');
                    });
                }, { threshold: 0.2 });
                educationCards.forEach(card => eduObserver.observe(card));
            }
            
            const successToast = document.getElementById('success-toast');
            const contactModal = document.getElementById('contact-modal');
            const contactForm = contactModal.querySelector('.contact-form');
            contactForm.action = portfolioData.contact.formspree_url;
            
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(this);
                fetch(this.action, { method: 'POST', body: formData, headers: { 'Accept': 'application/json' } })
                .then(response => { 
                    if (response.ok) { 
                        closeContactModal();
                        setTimeout(() => {
                           successToast.classList.add('show'); 
                            setTimeout(() => successToast.classList.remove('show'), 4000);
                        }, 400);
                        contactForm.reset(); 
                    } else {
                        alert("There was an error sending your message. Please try again.");
                    }
                }).catch(error => {
                    console.error("Form submission error.", error);
                    alert("There was an error sending your message. Please try again.");
                }); 
            });
            
            // --- Lightbox functionality ---
            const lightbox = document.getElementById('lightbox');
            const lightboxClose = document.getElementById('lightbox-close');
            window.openLightbox = function(src) {
                const lightboxImg = document.getElementById('lightbox-img');
                if (lightbox && lightboxImg) {
                    lightboxImg.src = src;
                    lightbox.classList.remove('hidden');
                    lightbox.classList.add('flex');
                }
            }
            function closeLightbox() {
                if (lightbox) {
                    lightbox.classList.add('hidden');
                    lightbox.classList.remove('flex');
                }
            }
            if (lightbox && lightboxClose) {
                lightboxClose.addEventListener('click', closeLightbox);
                lightbox.addEventListener('click', (e) => { if (e.target === lightbox) closeLightbox(); });
            }

            // --- Modal Logic ---
            const contactFab = document.getElementById('contact-fab');
            const modalOverlay = contactModal.querySelector('.modal-overlay');
            const modalCloseBtn = document.getElementById('modal-close-btn');

            const downloadModal = document.getElementById('download-modal');
            const downloadModalOverlay = downloadModal.querySelector('.modal-overlay');
            const downloadModalCloseBtn = document.getElementById('download-modal-close-btn');

            function openContactModal() { contactModal.classList.add('visible'); }
            function closeContactModal() { contactModal.classList.remove('visible'); }
            function closeDownloadModal() { downloadModal.classList.remove('visible'); }

            if (contactFab) contactFab.addEventListener('click', openContactModal);
            modalOverlay.addEventListener('click', closeContactModal);
            modalCloseBtn.addEventListener('click', closeContactModal);
            downloadModalOverlay.addEventListener('click', closeDownloadModal);
            downloadModalCloseBtn.addEventListener('click', closeDownloadModal);

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeLightbox();
                    closeContactModal();
                    closeDownloadModal();
                }
            });

             const fabContent = document.querySelector('#contact-fab .fab-content');
            if (fabContent) {
                fabContent.addEventListener('animationend', () => {
                    fabContent.classList.remove('fab-pulse');
                }, { once: true });
            }

            // --- Background Animation (Unchanged) ---
            const canvas = document.getElementById('finance-canvas');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                let particles = [];
                const symbols = ['$', '%', '▲', '▼', '📈', '📉'];
                const mouse = { x: null, y: null, radius: 180 };
                window.addEventListener('mousemove', (event) => { mouse.x = event.x; mouse.y = event.y; });
                window.addEventListener('mouseout', () => { mouse.x = null; mouse.y = null; });
                function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
                function createParticles() {
                    particles = [];
                    let numberOfParticles = (canvas.width * canvas.height) / 20000;
                    for (let i = 0; i < numberOfParticles; i++) {
                        particles.push({ x: Math.random() * canvas.width, y: Math.random() * canvas.height, vx: (Math.random() - 0.5) * 0.3, vy: (Math.random() - 0.5) * 0.3, size: Math.random() * 2 + 10, symbol: symbols[Math.floor(Math.random() * symbols.length)] });
                    }
                }
                function connectParticles() {
                    for (let a = 0; a < particles.length; a++) {
                        for (let b = a; b < particles.length; b++) {
                            let dx = particles[a].x - particles[b].x;
                            let dy = particles[a].y - particles[b].y;
                            let distance = Math.sqrt(dx * dx + dy * dy);
                            if (distance < 120) {
                                ctx.strokeStyle = 'rgba(209, 164, 110, ' + (1 - distance/120) + ')';
                                ctx.lineWidth = 0.6;
                                ctx.beginPath();
                                ctx.moveTo(particles[a].x, particles[a].y);
                                ctx.lineTo(particles[b].x, particles[b].y);
                                ctx.stroke();
                            }
                        }
                    }
                }
                function animate() {
                    ctx.clearRect(0, 0, canvas.width, canvas.height);
                    for (let i = 0; i < particles.length; i++) {
                        let p = particles[i];
                        p.x += p.vx; p.y += p.vy;
                        if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                        if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                        if (mouse.x && mouse.y) {
                            let dx = mouse.x - p.x;
                            let dy = mouse.y - p.y;
                            let distance = Math.sqrt(dx * dx + dy * dy);
                            if (distance < mouse.radius) { p.x -= dx / 18; p.y -= dy / 18; }
                        }
                        ctx.fillStyle = `rgba(70, 56, 99, 0.5)`;
                        ctx.font = `${p.size}px Montserrat`;
                        ctx.fillText(p.symbol, p.x, p.y);
                    }
                    connectParticles();
                    requestAnimationFrame(animate);
                }
                window.addEventListener('resize', () => { resizeCanvas(); createParticles(); });
                resizeCanvas(); createParticles(); animate();
            }
        });
    </script>
</body>
</html>

